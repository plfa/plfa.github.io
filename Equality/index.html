<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Equality</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Relations/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part1/Equality.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Isomorphism/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Equality: Equality and equational reasoning</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part1-Equality-99" class="Keyword">module</a> <a id="plfa_plfa-part1-Equality-106" href="../Equality/#" class="Module">plfa.part1.Equality</a> <a id="plfa_plfa-part1-Equality-126" class="Keyword">where</a>
</pre><p>Much of our reasoning has involved equality. Given two terms <code>M</code> and <code>N</code>, both of type <code>A</code>, we write <code>M ≡ N</code> to assert that <code>M</code> and <code>N</code> are interchangeable. So far we have treated equality as a primitive, here we show how to define it as an inductive datatype.</p><h2 id="imports">Imports</h2><p>This chapter has no imports. Every chapter in this book, and nearly every module in the Agda standard library, imports equality. Since we define equality here, any import would create a conflict.</p><h2 id="equality">Equality</h2>We declare equality as follows:<pre class="Agda"><a id="plfa_plfa-part1-Equality-666" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-_≡_"></a><a id="plfa_plfa-part1-Equality-671" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part1-Equality-675" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-676" href="../Equality/#plfa_plfa-part1-Equality-676" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-678" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-680" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-683" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-685" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-686" href="../Equality/#plfa_plfa-part1-Equality-686" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-688" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-690" href="../Equality/#plfa_plfa-part1-Equality-676" class="Bound">A</a><a id="plfa_plfa-part1-Equality-691" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-693" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-695" href="../Equality/#plfa_plfa-part1-Equality-676" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-697" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-699" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-703" class="Keyword">where</a>
  <a id="plfa_plfa-part1-Equality-_≡_.refl"></a><a id="plfa_plfa-part1-Equality-711" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part1-Equality-716" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-718" href="../Equality/#plfa_plfa-part1-Equality-686" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-720" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-722" href="../Equality/#plfa_plfa-part1-Equality-686" class="Bound">x</a>
</pre><p>In other words, for any type <code>A</code> and for any <code>x</code> of type <code>A</code>, the constructor <code>refl</code> provides evidence that <code>x ≡ x</code>. Hence, every value is equal to itself, and we have no other way of showing values equal. The definition features an asymmetry, in that the first argument to <code>_≡_</code> is given by the parameter <code>x : A</code>, while the second is given by an index in <code>A → Set</code>. This follows our policy of using parameters wherever possible. The first argument to <code>_≡_</code> can be a parameter because it doesn’t vary, while the second must be an index, so it can be required to be equal to the first.</p>We declare the precedence of equality as follows:<pre class="Agda"><a id="plfa_plfa-part1-Equality-1375" class="Keyword">infix</a> <a id="plfa_plfa-part1-Equality-1381" class="Number">4</a> <a id="plfa_plfa-part1-Equality-1383" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">_≡_</a>
</pre><p>We set the precedence of <code>_≡_</code> at level 4, the same as <code>_≤_</code>, which means it binds less tightly than any arithmetic operator. It associates neither to left nor right; writing <code>x ≡ y ≡ z</code> is illegal.</p><h2 id="equality-is-an-equivalence-relation">Equality is an equivalence relation</h2>An equivalence relation is one which is reflexive, symmetric, and transitive. Reflexivity is built-in to the definition of equality, via the constructor <code>refl</code>. It is straightforward to show symmetry:<pre class="Agda"><a id="plfa_plfa-part1-Equality-sym"></a><a id="plfa_plfa-part1-Equality-1842" href="../Equality/#plfa_plfa-part1-Equality-1842" class="Function">sym</a> <a id="plfa_plfa-part1-Equality-1846" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-1848" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-1850" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-1851" href="../Equality/#plfa_plfa-part1-Equality-1851" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-1853" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-1855" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-1858" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-1860" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-1861" href="../Equality/#plfa_plfa-part1-Equality-1861" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-1863" href="../Equality/#plfa_plfa-part1-Equality-1863" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-1865" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-1867" href="../Equality/#plfa_plfa-part1-Equality-1851" class="Bound">A</a><a id="plfa_plfa-part1-Equality-1868" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-1872" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-1874" href="../Equality/#plfa_plfa-part1-Equality-1861" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-1876" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-1878" href="../Equality/#plfa_plfa-part1-Equality-1863" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-1884" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-1892" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-1894" href="../Equality/#plfa_plfa-part1-Equality-1863" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-1896" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-1898" href="../Equality/#plfa_plfa-part1-Equality-1861" class="Bound">x</a>
<a id="plfa_plfa-part1-Equality-1900" href="../Equality/#plfa_plfa-part1-Equality-1842" class="Function">sym</a> <a id="plfa_plfa-part1-Equality-1904" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part1-Equality-1909" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-1911" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
</pre><p>How does this proof work? The argument to <code>sym</code> has type <code>x ≡ y</code>, but on the left-hand side of the equation the argument has been instantiated to the pattern <code>refl</code>, which requires that <code>x</code> and <code>y</code> are the same. Hence, for the right-hand side of the equation we need a term of type <code>x ≡ x</code>, and <code>refl</code> will do.</p><p>It is instructive to develop <code>sym</code> interactively. To start, we supply a variable for the argument on the left, and a hole for the body on the right:</p><pre><code>sym : ∀ {A : Set} {x y : A}
  → x ≡ y
    -----
  → y ≡ x
sym e = {! !}</code></pre><p>If we go into the hole and type <code>C-c C-,</code> then Agda reports:</p><pre><code>Goal: .y ≡ .x
————————————————————————————————————————————————————————————
e  : .x ≡ .y
.y : .A
.x : .A
.A : Set</code></pre><p>If in the hole we type <code>C-c C-c e</code> then Agda will instantiate <code>e</code> to all possible constructors, with one equation for each. There is only one possible constructor:</p><pre><code>sym : ∀ {A : Set} {x y : A}
  → x ≡ y
    -----
  → y ≡ x
sym refl = {! !}</code></pre><p>If we go into the hole again and type <code>C-c C-,</code> then Agda now reports:</p><pre><code> Goal: .x ≡ .x
 ————————————————————————————————————————————————————————————
 .x : .A
 .A : Set</code></pre><p>This is the key step—Agda has worked out that <code>x</code> and <code>y</code> must be the same to match the pattern <code>refl</code>!</p><p>Finally, if we go back into the hole and type <code>C-c C-r</code> it will instantiate the hole with the one constructor that yields a value of the expected type:</p><pre><code>sym : ∀ {A : Set} {x y : A}
  → x ≡ y
    -----
  → y ≡ x
sym refl = refl</code></pre><p>This completes the definition as given above.</p>Transitivity is equally straightforward:<pre class="Agda"><a id="plfa_plfa-part1-Equality-trans"></a><a id="plfa_plfa-part1-Equality-3574" href="../Equality/#plfa_plfa-part1-Equality-3574" class="Function">trans</a> <a id="plfa_plfa-part1-Equality-3580" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-3582" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-3584" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-3585" href="../Equality/#plfa_plfa-part1-Equality-3585" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-3587" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-3589" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-3592" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-3594" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-3595" href="../Equality/#plfa_plfa-part1-Equality-3595" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-3597" href="../Equality/#plfa_plfa-part1-Equality-3597" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-3599" href="../Equality/#plfa_plfa-part1-Equality-3599" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-3601" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-3603" href="../Equality/#plfa_plfa-part1-Equality-3585" class="Bound">A</a><a id="plfa_plfa-part1-Equality-3604" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-3608" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-3610" href="../Equality/#plfa_plfa-part1-Equality-3595" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-3612" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-3614" href="../Equality/#plfa_plfa-part1-Equality-3597" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-3618" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-3620" href="../Equality/#plfa_plfa-part1-Equality-3597" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-3622" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-3624" href="../Equality/#plfa_plfa-part1-Equality-3599" class="Bound">z</a>
    <a id="plfa_plfa-part1-Equality-3630" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-3638" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-3640" href="../Equality/#plfa_plfa-part1-Equality-3595" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-3642" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-3644" href="../Equality/#plfa_plfa-part1-Equality-3599" class="Bound">z</a>
<a id="plfa_plfa-part1-Equality-3646" href="../Equality/#plfa_plfa-part1-Equality-3574" class="Function">trans</a> <a id="plfa_plfa-part1-Equality-3652" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part1-Equality-3657" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>  <a id="plfa_plfa-part1-Equality-3663" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-3666" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
</pre><p>Again, a useful exercise is to carry out an interactive development, checking how Agda’s knowledge changes as each of the two arguments is instantiated.</p><h2 id="cong">Congruence and substitution</h2>Equality satisfies <em>congruence</em>. If two terms are equal, they remain so after the same function is applied to both:<pre class="Agda"><a id="plfa_plfa-part1-Equality-cong"></a><a id="plfa_plfa-part1-Equality-3994" href="../Equality/#plfa_plfa-part1-Equality-3994" class="Function">cong</a> <a id="plfa_plfa-part1-Equality-3999" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4001" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-4003" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4004" href="../Equality/#plfa_plfa-part1-Equality-4004" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4006" href="../Equality/#plfa_plfa-part1-Equality-4006" class="Bound">B</a> <a id="plfa_plfa-part1-Equality-4008" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4010" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-4013" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-4015" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-4016" href="../Equality/#plfa_plfa-part1-Equality-4016" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4018" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4020" href="../Equality/#plfa_plfa-part1-Equality-4004" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4022" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4024" href="../Equality/#plfa_plfa-part1-Equality-4006" class="Bound">B</a><a id="plfa_plfa-part1-Equality-4025" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-4027" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4028" href="../Equality/#plfa_plfa-part1-Equality-4028" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4030" href="../Equality/#plfa_plfa-part1-Equality-4030" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-4032" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4034" href="../Equality/#plfa_plfa-part1-Equality-4004" class="Bound">A</a><a id="plfa_plfa-part1-Equality-4035" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-4039" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4041" href="../Equality/#plfa_plfa-part1-Equality-4028" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4043" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4045" href="../Equality/#plfa_plfa-part1-Equality-4030" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-4051" class="Comment">---------</a>
  <a id="plfa_plfa-part1-Equality-4063" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4065" href="../Equality/#plfa_plfa-part1-Equality-4016" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4067" href="../Equality/#plfa_plfa-part1-Equality-4028" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4069" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4071" href="../Equality/#plfa_plfa-part1-Equality-4016" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4073" href="../Equality/#plfa_plfa-part1-Equality-4030" class="Bound">y</a>
<a id="plfa_plfa-part1-Equality-4075" href="../Equality/#plfa_plfa-part1-Equality-3994" class="Function">cong</a> <a id="plfa_plfa-part1-Equality-4080" href="../Equality/#plfa_plfa-part1-Equality-4080" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4082" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>  <a id="plfa_plfa-part1-Equality-4088" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-4091" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
</pre>Congruence of functions with two arguments is similar:<pre class="Agda"><a id="plfa_plfa-part1-Equality-cong₂"></a><a id="plfa_plfa-part1-Equality-4164" href="../Equality/#plfa_plfa-part1-Equality-4164" class="Function">cong₂</a> <a id="plfa_plfa-part1-Equality-4170" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4172" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-4174" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4175" href="../Equality/#plfa_plfa-part1-Equality-4175" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4177" href="../Equality/#plfa_plfa-part1-Equality-4177" class="Bound">B</a> <a id="plfa_plfa-part1-Equality-4179" href="../Equality/#plfa_plfa-part1-Equality-4179" class="Bound">C</a> <a id="plfa_plfa-part1-Equality-4181" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4183" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-4186" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-4188" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-4189" href="../Equality/#plfa_plfa-part1-Equality-4189" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4191" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4193" href="../Equality/#plfa_plfa-part1-Equality-4175" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4195" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4197" href="../Equality/#plfa_plfa-part1-Equality-4177" class="Bound">B</a> <a id="plfa_plfa-part1-Equality-4199" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4201" href="../Equality/#plfa_plfa-part1-Equality-4179" class="Bound">C</a><a id="plfa_plfa-part1-Equality-4202" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-4204" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4205" href="../Equality/#plfa_plfa-part1-Equality-4205" class="Bound">u</a> <a id="plfa_plfa-part1-Equality-4207" href="../Equality/#plfa_plfa-part1-Equality-4207" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4209" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4211" href="../Equality/#plfa_plfa-part1-Equality-4175" class="Bound">A</a><a id="plfa_plfa-part1-Equality-4212" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-4214" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4215" href="../Equality/#plfa_plfa-part1-Equality-4215" class="Bound">v</a> <a id="plfa_plfa-part1-Equality-4217" href="../Equality/#plfa_plfa-part1-Equality-4217" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-4219" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4221" href="../Equality/#plfa_plfa-part1-Equality-4177" class="Bound">B</a><a id="plfa_plfa-part1-Equality-4222" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-4226" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4228" href="../Equality/#plfa_plfa-part1-Equality-4205" class="Bound">u</a> <a id="plfa_plfa-part1-Equality-4230" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4232" href="../Equality/#plfa_plfa-part1-Equality-4207" class="Bound">x</a>
  <a id="plfa_plfa-part1-Equality-4236" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4238" href="../Equality/#plfa_plfa-part1-Equality-4215" class="Bound">v</a> <a id="plfa_plfa-part1-Equality-4240" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4242" href="../Equality/#plfa_plfa-part1-Equality-4217" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-4248" class="Comment">-------------</a>
  <a id="plfa_plfa-part1-Equality-4264" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4266" href="../Equality/#plfa_plfa-part1-Equality-4189" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4268" href="../Equality/#plfa_plfa-part1-Equality-4205" class="Bound">u</a> <a id="plfa_plfa-part1-Equality-4270" href="../Equality/#plfa_plfa-part1-Equality-4215" class="Bound">v</a> <a id="plfa_plfa-part1-Equality-4272" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4274" href="../Equality/#plfa_plfa-part1-Equality-4189" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4276" href="../Equality/#plfa_plfa-part1-Equality-4207" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4278" href="../Equality/#plfa_plfa-part1-Equality-4217" class="Bound">y</a>
<a id="plfa_plfa-part1-Equality-4280" href="../Equality/#plfa_plfa-part1-Equality-4164" class="Function">cong₂</a> <a id="plfa_plfa-part1-Equality-4286" href="../Equality/#plfa_plfa-part1-Equality-4286" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4288" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part1-Equality-4293" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>  <a id="plfa_plfa-part1-Equality-4299" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-4302" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
</pre>Equality is also a congruence in the function position of an application. If two functions are equal, then applying them to the same term yields equal terms:<pre class="Agda"><a id="plfa_plfa-part1-Equality-cong-app"></a><a id="plfa_plfa-part1-Equality-4478" href="../Equality/#plfa_plfa-part1-Equality-4478" class="Function">cong-app</a> <a id="plfa_plfa-part1-Equality-4487" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4489" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-4491" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4492" href="../Equality/#plfa_plfa-part1-Equality-4492" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4494" href="../Equality/#plfa_plfa-part1-Equality-4494" class="Bound">B</a> <a id="plfa_plfa-part1-Equality-4496" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4498" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-4501" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-4503" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4504" href="../Equality/#plfa_plfa-part1-Equality-4504" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4506" href="../Equality/#plfa_plfa-part1-Equality-4506" class="Bound">g</a> <a id="plfa_plfa-part1-Equality-4508" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4510" href="../Equality/#plfa_plfa-part1-Equality-4492" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4512" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4514" href="../Equality/#plfa_plfa-part1-Equality-4494" class="Bound">B</a><a id="plfa_plfa-part1-Equality-4515" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-4519" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4521" href="../Equality/#plfa_plfa-part1-Equality-4504" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4523" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4525" href="../Equality/#plfa_plfa-part1-Equality-4506" class="Bound">g</a>
    <a id="plfa_plfa-part1-Equality-4531" class="Comment">---------------------</a>
  <a id="plfa_plfa-part1-Equality-4555" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4557" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-4559" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-4560" href="../Equality/#plfa_plfa-part1-Equality-4560" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4562" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4564" href="../Equality/#plfa_plfa-part1-Equality-4492" class="Bound">A</a><a id="plfa_plfa-part1-Equality-4565" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-4567" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4569" href="../Equality/#plfa_plfa-part1-Equality-4504" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-4571" href="../Equality/#plfa_plfa-part1-Equality-4560" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4573" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4575" href="../Equality/#plfa_plfa-part1-Equality-4506" class="Bound">g</a> <a id="plfa_plfa-part1-Equality-4577" href="../Equality/#plfa_plfa-part1-Equality-4560" class="Bound">x</a>
<a id="plfa_plfa-part1-Equality-4579" href="../Equality/#plfa_plfa-part1-Equality-4478" class="Function">cong-app</a> <a id="plfa_plfa-part1-Equality-4588" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part1-Equality-4593" href="../Equality/#plfa_plfa-part1-Equality-4593" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4595" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-4597" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
</pre>Equality also satisfies <em>substitution</em>. If two values are equal and a predicate holds of the first then it also holds of the second:<pre class="Agda"><a id="plfa_plfa-part1-Equality-subst"></a><a id="plfa_plfa-part1-Equality-4748" href="../Equality/#plfa_plfa-part1-Equality-4748" class="Function">subst</a> <a id="plfa_plfa-part1-Equality-4754" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4756" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-4758" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4759" href="../Equality/#plfa_plfa-part1-Equality-4759" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4761" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4763" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-4766" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-4768" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-4769" href="../Equality/#plfa_plfa-part1-Equality-4769" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4771" href="../Equality/#plfa_plfa-part1-Equality-4771" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-4773" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4775" href="../Equality/#plfa_plfa-part1-Equality-4759" class="Bound">A</a><a id="plfa_plfa-part1-Equality-4776" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-4778" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-4779" href="../Equality/#plfa_plfa-part1-Equality-4779" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-4781" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-4783" href="../Equality/#plfa_plfa-part1-Equality-4759" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-4785" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4787" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-4790" class="Symbol">)</a>
  <a id="plfa_plfa-part1-Equality-4794" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4796" href="../Equality/#plfa_plfa-part1-Equality-4769" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4798" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-4800" href="../Equality/#plfa_plfa-part1-Equality-4771" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-4806" class="Comment">---------</a>
  <a id="plfa_plfa-part1-Equality-4818" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4820" href="../Equality/#plfa_plfa-part1-Equality-4779" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-4822" href="../Equality/#plfa_plfa-part1-Equality-4769" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-4824" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-4826" href="../Equality/#plfa_plfa-part1-Equality-4779" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-4828" href="../Equality/#plfa_plfa-part1-Equality-4771" class="Bound">y</a>
<a id="plfa_plfa-part1-Equality-4830" href="../Equality/#plfa_plfa-part1-Equality-4748" class="Function">subst</a> <a id="plfa_plfa-part1-Equality-4836" href="../Equality/#plfa_plfa-part1-Equality-4836" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-4838" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part1-Equality-4843" href="../Equality/#plfa_plfa-part1-Equality-4843" class="Bound">px</a> <a id="plfa_plfa-part1-Equality-4846" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-4848" href="../Equality/#plfa_plfa-part1-Equality-4843" class="Bound">px</a>
</pre><p>A predicate is a proposition over values of some type <code>A</code>, and since we model <em>propositions as types</em>, a predicate is a type parameterized in <code>A</code>. As an example, <code>even : ℕ → Set</code> and <code>odd : ℕ → Set</code> from Chapter <a href="../Relations/#even-and-odd">Relations</a> are predicates on natural numbers <code>ℕ</code>. (We will compare representing predicates as data types <code>A → Set</code> versus functions to booleans <code>A → Bool</code> in Chapter <a href="../Decidable/">Decidable</a>.)</p><h2 id="chains-of-equations">Chains of equations</h2>Here we show how to support reasoning with chains of equations, as used throughout the book. We package the declarations into a module, named <code>≡-Reasoning</code>, to match the format used in Agda’s standard library:<pre class="Agda"><a id="plfa_plfa-part1-Equality-5531" class="Keyword">module</a> <a id="plfa_plfa-part1-Equality-≡-Reasoning"></a><a id="plfa_plfa-part1-Equality-5538" href="../Equality/#plfa_plfa-part1-Equality-5538" class="Module">≡-Reasoning</a> <a id="plfa_plfa-part1-Equality-5550" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-5551" href="../Equality/#plfa_plfa-part1-Equality-5551" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-5553" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5555" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-5558" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-5560" class="Keyword">where</a>

  <a id="plfa_plfa-part1-Equality-5569" class="Keyword">infix</a>  <a id="plfa_plfa-part1-Equality-5576" class="Number">1</a> <a id="plfa_plfa-part1-Equality-5578" href="../Equality/#plfa_plfa-part1-Equality-5626" class="Function Operator">begin_</a>
  <a id="plfa_plfa-part1-Equality-5587" class="Keyword">infixr</a> <a id="plfa_plfa-part1-Equality-5594" class="Number">2</a> <a id="plfa_plfa-part1-Equality-5596" href="../Equality/#plfa_plfa-part1-Equality-5706" class="Function Operator">_≡⟨⟩_</a> <a id="plfa_plfa-part1-Equality-5602" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">step-≡</a>
  <a id="plfa_plfa-part1-Equality-5611" class="Keyword">infix</a>  <a id="plfa_plfa-part1-Equality-5618" class="Number">3</a> <a id="plfa_plfa-part1-Equality-5620" href="../Equality/#plfa_plfa-part1-Equality-5927" class="Function Operator">_∎</a>

  <a id="plfa_plfa-part1-Equality-≡-Reasoning.begin_"></a><a id="plfa_plfa-part1-Equality-5626" href="../Equality/#plfa_plfa-part1-Equality-5626" class="Function Operator">begin_</a> <a id="plfa_plfa-part1-Equality-5633" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5635" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-5637" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-5638" href="../Equality/#plfa_plfa-part1-Equality-5638" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5640" href="../Equality/#plfa_plfa-part1-Equality-5640" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-5642" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5644" href="../Equality/#plfa_plfa-part1-Equality-5551" class="Bound">A</a><a id="plfa_plfa-part1-Equality-5645" class="Symbol">}</a>
    <a id="plfa_plfa-part1-Equality-5651" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5653" href="../Equality/#plfa_plfa-part1-Equality-5638" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5655" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5657" href="../Equality/#plfa_plfa-part1-Equality-5640" class="Bound">y</a>
      <a id="plfa_plfa-part1-Equality-5665" class="Comment">-----</a>
    <a id="plfa_plfa-part1-Equality-5675" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5677" href="../Equality/#plfa_plfa-part1-Equality-5638" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5679" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5681" href="../Equality/#plfa_plfa-part1-Equality-5640" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-5685" href="../Equality/#plfa_plfa-part1-Equality-5626" class="Function Operator">begin</a> <a id="plfa_plfa-part1-Equality-5691" href="../Equality/#plfa_plfa-part1-Equality-5691" class="Bound">x≡y</a>  <a id="plfa_plfa-part1-Equality-5696" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-5699" href="../Equality/#plfa_plfa-part1-Equality-5691" class="Bound">x≡y</a>

  <a id="plfa_plfa-part1-Equality-≡-Reasoning._≡⟨⟩_"></a><a id="plfa_plfa-part1-Equality-5706" href="../Equality/#plfa_plfa-part1-Equality-5706" class="Function Operator">_≡⟨⟩_</a> <a id="plfa_plfa-part1-Equality-5712" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5714" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-5716" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-5717" href="../Equality/#plfa_plfa-part1-Equality-5717" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5719" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5721" href="../Equality/#plfa_plfa-part1-Equality-5551" class="Bound">A</a><a id="plfa_plfa-part1-Equality-5722" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-5724" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-5725" href="../Equality/#plfa_plfa-part1-Equality-5725" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-5727" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5729" href="../Equality/#plfa_plfa-part1-Equality-5551" class="Bound">A</a><a id="plfa_plfa-part1-Equality-5730" class="Symbol">}</a>
    <a id="plfa_plfa-part1-Equality-5736" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5738" href="../Equality/#plfa_plfa-part1-Equality-5717" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5740" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5742" href="../Equality/#plfa_plfa-part1-Equality-5725" class="Bound">y</a>
      <a id="plfa_plfa-part1-Equality-5750" class="Comment">-----</a>
    <a id="plfa_plfa-part1-Equality-5760" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5762" href="../Equality/#plfa_plfa-part1-Equality-5717" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5764" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5766" href="../Equality/#plfa_plfa-part1-Equality-5725" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-5770" href="../Equality/#plfa_plfa-part1-Equality-5770" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5772" href="../Equality/#plfa_plfa-part1-Equality-5706" class="Function Operator">≡⟨⟩</a> <a id="plfa_plfa-part1-Equality-5776" href="../Equality/#plfa_plfa-part1-Equality-5776" class="Bound">x≡y</a>  <a id="plfa_plfa-part1-Equality-5781" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-5784" href="../Equality/#plfa_plfa-part1-Equality-5776" class="Bound">x≡y</a>

  <a id="plfa_plfa-part1-Equality-≡-Reasoning.step-≡"></a><a id="plfa_plfa-part1-Equality-5791" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">step-≡</a> <a id="plfa_plfa-part1-Equality-5798" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5800" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-5802" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-5803" href="../Equality/#plfa_plfa-part1-Equality-5803" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5805" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-5806" href="../Equality/#plfa_plfa-part1-Equality-5806" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-5808" href="../Equality/#plfa_plfa-part1-Equality-5808" class="Bound">z</a><a id="plfa_plfa-part1-Equality-5809" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-5811" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5813" href="../Equality/#plfa_plfa-part1-Equality-5551" class="Bound">A</a><a id="plfa_plfa-part1-Equality-5814" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-5816" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5818" href="../Equality/#plfa_plfa-part1-Equality-5806" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-5820" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5822" href="../Equality/#plfa_plfa-part1-Equality-5808" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-5824" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5826" href="../Equality/#plfa_plfa-part1-Equality-5803" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5828" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5830" href="../Equality/#plfa_plfa-part1-Equality-5806" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-5832" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5834" href="../Equality/#plfa_plfa-part1-Equality-5803" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5836" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5838" href="../Equality/#plfa_plfa-part1-Equality-5808" class="Bound">z</a>
  <a id="plfa_plfa-part1-Equality-5842" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">step-≡</a> <a id="plfa_plfa-part1-Equality-5849" href="../Equality/#plfa_plfa-part1-Equality-5849" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5851" href="../Equality/#plfa_plfa-part1-Equality-5851" class="Bound">y≡z</a> <a id="plfa_plfa-part1-Equality-5855" href="../Equality/#plfa_plfa-part1-Equality-5855" class="Bound">x≡y</a>  <a id="plfa_plfa-part1-Equality-5860" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-5863" href="../Equality/#plfa_plfa-part1-Equality-3574" class="Function">trans</a> <a id="plfa_plfa-part1-Equality-5869" href="../Equality/#plfa_plfa-part1-Equality-5855" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-5873" href="../Equality/#plfa_plfa-part1-Equality-5851" class="Bound">y≡z</a>

  <a id="plfa_plfa-part1-Equality-5880" class="Keyword">syntax</a> <a id="plfa_plfa-part1-Equality-5887" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">step-≡</a> <a id="plfa_plfa-part1-Equality-5894" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5896" class="Bound">y≡z</a> <a id="plfa_plfa-part1-Equality-5900" class="Bound">x≡y</a>  <a id="plfa_plfa-part1-Equality-5905" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-5908" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5910" class="Function">≡⟨</a>  <a id="plfa_plfa-part1-Equality-5914" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-5918" class="Function">⟩</a> <a id="plfa_plfa-part1-Equality-5920" class="Bound">y≡z</a>

  <a id="plfa_plfa-part1-Equality-≡-Reasoning._∎"></a><a id="plfa_plfa-part1-Equality-5927" href="../Equality/#plfa_plfa-part1-Equality-5927" class="Function Operator">_∎</a> <a id="plfa_plfa-part1-Equality-5930" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5932" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-5934" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-5935" href="../Equality/#plfa_plfa-part1-Equality-5935" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5937" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-5939" href="../Equality/#plfa_plfa-part1-Equality-5551" class="Bound">A</a><a id="plfa_plfa-part1-Equality-5940" class="Symbol">)</a>
      <a id="plfa_plfa-part1-Equality-5948" class="Comment">-----</a>
    <a id="plfa_plfa-part1-Equality-5958" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-5960" href="../Equality/#plfa_plfa-part1-Equality-5935" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5962" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-5964" href="../Equality/#plfa_plfa-part1-Equality-5935" class="Bound">x</a>
  <a id="plfa_plfa-part1-Equality-5968" href="../Equality/#plfa_plfa-part1-Equality-5968" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-5970" href="../Equality/#plfa_plfa-part1-Equality-5927" class="Function Operator">∎</a>  <a id="plfa_plfa-part1-Equality-5973" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-5976" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>

<a id="plfa_plfa-part1-Equality-5982" class="Keyword">open</a> <a id="plfa_plfa-part1-Equality-5987" href="../Equality/#plfa_plfa-part1-Equality-5538" class="Module">≡-Reasoning</a>
</pre><p>This is our first use of a nested module. It consists of the keyword <code>module</code> followed by the module name and any parameters, explicit or implicit, the keyword <code>where</code>, and the contents of the module indented. Modules may contain any sort of declaration, including other nested modules. Nested modules are similar to the top-level modules that constitute each chapter of this book, save that the body of a top-level module need not be indented. Opening the module makes all of the definitions available in the current environment.</p><p>This is also our first use of a syntax declaration, which specifies that the term on the left may be written with the syntax on the right. The syntax <code>x ≡⟨ x≡y ⟩ y≡z</code> inherits the fixity <code>infixr 2</code> declared for <code>step-≡</code>, and the special syntax is available when the identifier <code>step-≡</code> is imported.</p>Rather than introducing <code>step-≡</code> with special syntax, we might have declared <code>_≡⟨_⟩′_</code> directly:<pre class="Agda"><a id="plfa_plfa-part1-Equality-_≡⟨_⟩′_"></a><a id="plfa_plfa-part1-Equality-6941" href="../Equality/#plfa_plfa-part1-Equality-6941" class="Function Operator">_≡⟨_⟩′_</a> <a id="plfa_plfa-part1-Equality-6949" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-6951" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-6953" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-6954" href="../Equality/#plfa_plfa-part1-Equality-6954" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-6956" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-6958" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-6961" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-6963" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-6964" href="../Equality/#plfa_plfa-part1-Equality-6964" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-6966" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-6968" href="../Equality/#plfa_plfa-part1-Equality-6954" class="Bound">A</a><a id="plfa_plfa-part1-Equality-6969" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-6971" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-6972" href="../Equality/#plfa_plfa-part1-Equality-6972" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-6974" href="../Equality/#plfa_plfa-part1-Equality-6974" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-6976" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-6978" href="../Equality/#plfa_plfa-part1-Equality-6954" class="Bound">A</a><a id="plfa_plfa-part1-Equality-6979" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-6983" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-6985" href="../Equality/#plfa_plfa-part1-Equality-6964" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-6987" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-6989" href="../Equality/#plfa_plfa-part1-Equality-6972" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-6993" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-6995" href="../Equality/#plfa_plfa-part1-Equality-6972" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-6997" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-6999" href="../Equality/#plfa_plfa-part1-Equality-6974" class="Bound">z</a>
    <a id="plfa_plfa-part1-Equality-7005" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-7013" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-7015" href="../Equality/#plfa_plfa-part1-Equality-6964" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-7017" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-7019" href="../Equality/#plfa_plfa-part1-Equality-6974" class="Bound">z</a>
<a id="plfa_plfa-part1-Equality-7021" href="../Equality/#plfa_plfa-part1-Equality-7021" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-7023" href="../Equality/#plfa_plfa-part1-Equality-6941" class="Function Operator">≡⟨</a> <a id="plfa_plfa-part1-Equality-7026" href="../Equality/#plfa_plfa-part1-Equality-7026" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-7030" href="../Equality/#plfa_plfa-part1-Equality-6941" class="Function Operator">⟩′</a> <a id="plfa_plfa-part1-Equality-7033" href="../Equality/#plfa_plfa-part1-Equality-7033" class="Bound">y≡z</a>  <a id="plfa_plfa-part1-Equality-7038" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-7041" href="../Equality/#plfa_plfa-part1-Equality-3574" class="Function">trans</a> <a id="plfa_plfa-part1-Equality-7047" href="../Equality/#plfa_plfa-part1-Equality-7026" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-7051" href="../Equality/#plfa_plfa-part1-Equality-7033" class="Bound">y≡z</a>
</pre><p>The reason for indirection is that <code>step-≡</code> reverses the order of the arguments, which happens to allow Agda to perform type inference more efficiently. We will encounter some long chains in Chapter <a href="../Lambda/">Lambda</a>, so efficiency can be important.</p>Let’s look at a proof of transitivity as a chain of equations:<pre class="Agda"><a id="plfa_plfa-part1-Equality-trans′"></a><a id="plfa_plfa-part1-Equality-7382" href="../Equality/#plfa_plfa-part1-Equality-7382" class="Function">trans′</a> <a id="plfa_plfa-part1-Equality-7389" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-7391" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-7393" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-7394" href="../Equality/#plfa_plfa-part1-Equality-7394" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-7396" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-7398" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-7401" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-7403" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-7404" href="../Equality/#plfa_plfa-part1-Equality-7404" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-7406" href="../Equality/#plfa_plfa-part1-Equality-7406" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-7408" href="../Equality/#plfa_plfa-part1-Equality-7408" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-7410" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-7412" href="../Equality/#plfa_plfa-part1-Equality-7394" class="Bound">A</a><a id="plfa_plfa-part1-Equality-7413" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-7417" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-7419" href="../Equality/#plfa_plfa-part1-Equality-7404" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-7421" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-7423" href="../Equality/#plfa_plfa-part1-Equality-7406" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-7427" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-7429" href="../Equality/#plfa_plfa-part1-Equality-7406" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-7431" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-7433" href="../Equality/#plfa_plfa-part1-Equality-7408" class="Bound">z</a>
    <a id="plfa_plfa-part1-Equality-7439" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-7447" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-7449" href="../Equality/#plfa_plfa-part1-Equality-7404" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-7451" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-7453" href="../Equality/#plfa_plfa-part1-Equality-7408" class="Bound">z</a>
<a id="plfa_plfa-part1-Equality-7455" href="../Equality/#plfa_plfa-part1-Equality-7382" class="Function">trans′</a> <a id="plfa_plfa-part1-Equality-7462" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-7463" href="../Equality/#plfa_plfa-part1-Equality-7463" class="Bound">A</a><a id="plfa_plfa-part1-Equality-7464" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-7466" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-7467" href="../Equality/#plfa_plfa-part1-Equality-7467" class="Bound">x</a><a id="plfa_plfa-part1-Equality-7468" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-7470" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-7471" href="../Equality/#plfa_plfa-part1-Equality-7471" class="Bound">y</a><a id="plfa_plfa-part1-Equality-7472" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-7474" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-7475" href="../Equality/#plfa_plfa-part1-Equality-7475" class="Bound">z</a><a id="plfa_plfa-part1-Equality-7476" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-7478" href="../Equality/#plfa_plfa-part1-Equality-7478" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-7482" href="../Equality/#plfa_plfa-part1-Equality-7482" class="Bound">y≡z</a> <a id="plfa_plfa-part1-Equality-7486" class="Symbol">=</a>
  <a id="plfa_plfa-part1-Equality-7490" href="../Equality/#plfa_plfa-part1-Equality-5626" class="Function Operator">begin</a>
    <a id="plfa_plfa-part1-Equality-7500" href="../Equality/#plfa_plfa-part1-Equality-7467" class="Bound">x</a>
  <a id="plfa_plfa-part1-Equality-7504" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">≡⟨</a> <a id="plfa_plfa-part1-Equality-7507" href="../Equality/#plfa_plfa-part1-Equality-7478" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-7511" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">⟩</a>
    <a id="plfa_plfa-part1-Equality-7517" href="../Equality/#plfa_plfa-part1-Equality-7471" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-7521" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">≡⟨</a> <a id="plfa_plfa-part1-Equality-7524" href="../Equality/#plfa_plfa-part1-Equality-7482" class="Bound">y≡z</a> <a id="plfa_plfa-part1-Equality-7528" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">⟩</a>
    <a id="plfa_plfa-part1-Equality-7534" href="../Equality/#plfa_plfa-part1-Equality-7475" class="Bound">z</a>
  <a id="plfa_plfa-part1-Equality-7538" href="../Equality/#plfa_plfa-part1-Equality-5927" class="Function Operator">∎</a>
</pre><p>According to the fixity declarations, the body parses as follows:</p><pre><code>begin (x ≡⟨ x≡y ⟩ (y ≡⟨ y≡z ⟩ (z ∎)))</code></pre><p>The application of <code>begin</code> is purely cosmetic, as it simply returns its argument. That argument consists of <code>_≡⟨_⟩_</code> applied to <code>x</code>, <code>x≡y</code>, and <code>y ≡⟨ y≡z ⟩ (z ∎)</code>. The first argument is a term, <code>x</code>, while the second and third arguments are both proofs of equations, in particular proofs of <code>x ≡ y</code> and <code>y ≡ z</code> respectively, which are combined by <code>trans</code> in the body of <code>_≡⟨_⟩_</code> to yield a proof of <code>x ≡ z</code>. The proof of <code>y ≡ z</code> consists of <code>_≡⟨_⟩_</code> applied to <code>y</code>, <code>y≡z</code>, and <code>z ∎</code>. The first argument is a term, <code>y</code>, while the second and third arguments are both proofs of equations, in particular proofs of <code>y ≡ z</code> and <code>z ≡ z</code> respectively, which are combined by <code>trans</code> in the body of <code>_≡⟨_⟩_</code> to yield a proof of <code>y ≡ z</code>. Finally, the proof of <code>z ≡ z</code> consists of <code>_∎</code> applied to the term <code>z</code>, which yields <code>refl</code>. After simplification, the body is equivalent to the term:</p><pre><code>trans x≡y (trans y≡z refl)</code></pre><p>We could replace any use of a chain of equations by a chain of applications of <code>trans</code>; the result would be more compact but harder to read. The trick behind <code>∎</code> means that a chain of equalities simplifies to a chain of applications of <code>trans</code> that ends in <code>trans e refl</code>, where <code>e</code> is a term that proves some equality, even though <code>e</code> alone would do.</p><h4 id="exercise-trans-and--reasoning-practice">Exercise <code>trans</code> and <code>≡-Reasoning</code> (practice)</h4><p>Sadly, we cannot use the definition of trans’ using ≡-Reasoning as the definition for trans. Can you see why? (Hint: look at the definition of <code>_≡⟨_⟩_</code>)</p><pre class="Agda"><a id="plfa_plfa-part1-Equality-9137" class="Comment">-- Your code goes here</a>
</pre><h2 id="chains-of-equations-another-example">Chains of equations, another example</h2>As a second example of chains of equations, we repeat the proof that addition is commutative. We first repeat the definitions of naturals and addition. We cannot import them because (as noted at the beginning of this chapter) it would cause a conflict:<pre class="Agda"><a id="plfa_plfa-part1-Equality-9468" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-ℕ"></a><a id="plfa_plfa-part1-Equality-9473" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a> <a id="plfa_plfa-part1-Equality-9475" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9477" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-9481" class="Keyword">where</a>
  <a id="plfa_plfa-part1-Equality-ℕ.zero"></a><a id="plfa_plfa-part1-Equality-9489" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part1-Equality-9494" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9496" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a>
  <a id="plfa_plfa-part1-Equality-ℕ.suc"></a><a id="plfa_plfa-part1-Equality-9500" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a>  <a id="plfa_plfa-part1-Equality-9505" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9507" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a> <a id="plfa_plfa-part1-Equality-9509" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-9511" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a>

<a id="plfa_plfa-part1-Equality-_+_"></a><a id="plfa_plfa-part1-Equality-9514" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">_+_</a> <a id="plfa_plfa-part1-Equality-9518" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9520" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a> <a id="plfa_plfa-part1-Equality-9522" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-9524" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a> <a id="plfa_plfa-part1-Equality-9526" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-9528" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a>
<a id="plfa_plfa-part1-Equality-9530" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a>    <a id="plfa_plfa-part1-Equality-9538" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-9540" href="../Equality/#plfa_plfa-part1-Equality-9540" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-9543" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-9546" href="../Equality/#plfa_plfa-part1-Equality-9540" class="Bound">n</a>
<a id="plfa_plfa-part1-Equality-9548" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-9549" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-9553" href="../Equality/#plfa_plfa-part1-Equality-9553" class="Bound">m</a><a id="plfa_plfa-part1-Equality-9554" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-9556" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-9558" href="../Equality/#plfa_plfa-part1-Equality-9558" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-9561" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-9564" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-9568" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-9569" href="../Equality/#plfa_plfa-part1-Equality-9553" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-9571" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-9573" href="../Equality/#plfa_plfa-part1-Equality-9558" class="Bound">n</a><a id="plfa_plfa-part1-Equality-9574" class="Symbol">)</a>
</pre>To save space we postulate (rather than prove in full) two lemmas:<pre class="Agda"><a id="plfa_plfa-part1-Equality-9656" class="Keyword">postulate</a>
  <a id="plfa_plfa-part1-Equality-+-identity"></a><a id="plfa_plfa-part1-Equality-9668" href="../Equality/#plfa_plfa-part1-Equality-9668" class="Postulate">+-identity</a> <a id="plfa_plfa-part1-Equality-9679" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9681" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-9683" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-9684" href="../Equality/#plfa_plfa-part1-Equality-9684" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-9686" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9688" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-9689" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-9691" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-9693" href="../Equality/#plfa_plfa-part1-Equality-9684" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-9695" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-9697" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part1-Equality-9702" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-9704" href="../Equality/#plfa_plfa-part1-Equality-9684" class="Bound">m</a>
  <a id="plfa_plfa-part1-Equality-+-suc"></a><a id="plfa_plfa-part1-Equality-9708" href="../Equality/#plfa_plfa-part1-Equality-9708" class="Postulate">+-suc</a> <a id="plfa_plfa-part1-Equality-9714" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9716" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-9718" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-9719" href="../Equality/#plfa_plfa-part1-Equality-9719" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-9721" href="../Equality/#plfa_plfa-part1-Equality-9721" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-9723" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-9725" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-9726" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-9728" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-9730" href="../Equality/#plfa_plfa-part1-Equality-9719" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-9732" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-9734" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-9738" href="../Equality/#plfa_plfa-part1-Equality-9721" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-9740" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-9742" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-9746" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-9747" href="../Equality/#plfa_plfa-part1-Equality-9719" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-9749" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-9751" href="../Equality/#plfa_plfa-part1-Equality-9721" class="Bound">n</a><a id="plfa_plfa-part1-Equality-9752" class="Symbol">)</a>
</pre><p>This is our first use of a <em>postulate</em>. A postulate specifies a signature for an identifier but no definition. Here we postulate something proved earlier to save space. Postulates must be used with caution. If we postulate something false then we could use Agda to prove anything whatsoever.</p>We then repeat the proof of commutativity:<pre class="Agda"><a id="plfa_plfa-part1-Equality-+-comm"></a><a id="plfa_plfa-part1-Equality-10106" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-10113" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-10115" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-10117" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-10118" href="../Equality/#plfa_plfa-part1-Equality-10118" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10120" href="../Equality/#plfa_plfa-part1-Equality-10120" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-10122" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-10124" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-10125" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-10127" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-10129" href="../Equality/#plfa_plfa-part1-Equality-10118" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10131" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10133" href="../Equality/#plfa_plfa-part1-Equality-10120" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-10135" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-10137" href="../Equality/#plfa_plfa-part1-Equality-10120" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-10139" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10141" href="../Equality/#plfa_plfa-part1-Equality-10118" class="Bound">m</a>
<a id="plfa_plfa-part1-Equality-10143" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-10150" href="../Equality/#plfa_plfa-part1-Equality-10150" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10152" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part1-Equality-10157" class="Symbol">=</a>
  <a id="plfa_plfa-part1-Equality-10161" href="../Equality/#plfa_plfa-part1-Equality-5626" class="Function Operator">begin</a>
    <a id="plfa_plfa-part1-Equality-10171" href="../Equality/#plfa_plfa-part1-Equality-10150" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10173" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10175" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a>
  <a id="plfa_plfa-part1-Equality-10182" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">≡⟨</a> <a id="plfa_plfa-part1-Equality-10185" href="../Equality/#plfa_plfa-part1-Equality-9668" class="Postulate">+-identity</a> <a id="plfa_plfa-part1-Equality-10196" href="../Equality/#plfa_plfa-part1-Equality-10150" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10198" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">⟩</a>
    <a id="plfa_plfa-part1-Equality-10204" href="../Equality/#plfa_plfa-part1-Equality-10150" class="Bound">m</a>
  <a id="plfa_plfa-part1-Equality-10208" href="../Equality/#plfa_plfa-part1-Equality-5706" class="Function Operator">≡⟨⟩</a>
    <a id="plfa_plfa-part1-Equality-10216" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part1-Equality-10221" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10223" href="../Equality/#plfa_plfa-part1-Equality-10150" class="Bound">m</a>
  <a id="plfa_plfa-part1-Equality-10227" href="../Equality/#plfa_plfa-part1-Equality-5927" class="Function Operator">∎</a>
<a id="plfa_plfa-part1-Equality-10229" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-10236" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10238" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-10239" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-10243" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a><a id="plfa_plfa-part1-Equality-10244" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-10246" class="Symbol">=</a>
  <a id="plfa_plfa-part1-Equality-10250" href="../Equality/#plfa_plfa-part1-Equality-5626" class="Function Operator">begin</a>
    <a id="plfa_plfa-part1-Equality-10260" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10262" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10264" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-10268" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a>
  <a id="plfa_plfa-part1-Equality-10272" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">≡⟨</a> <a id="plfa_plfa-part1-Equality-10275" href="../Equality/#plfa_plfa-part1-Equality-9708" class="Postulate">+-suc</a> <a id="plfa_plfa-part1-Equality-10281" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10283" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-10285" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">⟩</a>
    <a id="plfa_plfa-part1-Equality-10291" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-10295" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-10296" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10298" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10300" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a><a id="plfa_plfa-part1-Equality-10301" class="Symbol">)</a>
  <a id="plfa_plfa-part1-Equality-10305" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">≡⟨</a> <a id="plfa_plfa-part1-Equality-10308" href="../Equality/#plfa_plfa-part1-Equality-3994" class="Function">cong</a> <a id="plfa_plfa-part1-Equality-10313" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-10317" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-10318" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-10325" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-10327" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a><a id="plfa_plfa-part1-Equality-10328" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-10330" href="../Equality/#plfa_plfa-part1-Equality-5791" class="Function">⟩</a>
    <a id="plfa_plfa-part1-Equality-10336" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-10340" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-10341" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-10343" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10345" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a><a id="plfa_plfa-part1-Equality-10346" class="Symbol">)</a>
  <a id="plfa_plfa-part1-Equality-10350" href="../Equality/#plfa_plfa-part1-Equality-5706" class="Function Operator">≡⟨⟩</a>
    <a id="plfa_plfa-part1-Equality-10358" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-10362" href="../Equality/#plfa_plfa-part1-Equality-10243" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-10364" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-10366" href="../Equality/#plfa_plfa-part1-Equality-10236" class="Bound">m</a>
  <a id="plfa_plfa-part1-Equality-10370" href="../Equality/#plfa_plfa-part1-Equality-5927" class="Function Operator">∎</a>
</pre><p>The reasoning here is similar to that in the preceding section. We use <code>_≡⟨⟩_</code> when no justification is required. One can think of <code>_≡⟨⟩_</code> as equivalent to <code>_≡⟨ refl ⟩_</code>.</p><p>Agda always treats a term as equivalent to its simplified term. The reason that one can write</p><pre><code>  suc (n + m)
≡⟨⟩
  suc n + m</code></pre><p>is because Agda treats both terms as the same. This also means that one could instead interchange the lines and write</p><pre><code>  suc n + m
≡⟨⟩
  suc (n + m)</code></pre><p>and Agda would not object. Agda only checks that the terms separated by <code>≡⟨⟩</code> have the same simplified form; it’s up to us to write them in an order that will make sense to the reader.</p><h4 id="exercise--reasoning-stretch">Exercise <code>≤-Reasoning</code> (stretch)</h4><p>The proof of monotonicity from Chapter <a href="../Relations/">Relations</a> can be written in a more readable form by using an analogue of our notation for <code>≡-Reasoning</code>. Define <code>≤-Reasoning</code> analogously, and use it to write out an alternative proof that addition is monotonic with regard to inequality. Rewrite all of <code>+-monoˡ-≤</code>, <code>+-monoʳ-≤</code>, and <code>+-mono-≤</code>.</p><pre class="Agda"><a id="plfa_plfa-part1-Equality-11436" class="Comment">-- Your code goes here</a>
</pre><h2 id="rewriting">Rewriting</h2>Consider a property of natural numbers, such as being even. We repeat the earlier definition:<pre class="Agda"><a id="plfa_plfa-part1-Equality-11582" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-even"></a><a id="plfa_plfa-part1-Equality-11587" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-11592" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11594" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a> <a id="plfa_plfa-part1-Equality-11596" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-11598" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part1-Equality-11602" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-odd"></a><a id="plfa_plfa-part1-Equality-11607" href="../Equality/#plfa_plfa-part1-Equality-11607" class="Datatype">odd</a>  <a id="plfa_plfa-part1-Equality-11612" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11614" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a> <a id="plfa_plfa-part1-Equality-11616" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-11618" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>

<a id="plfa_plfa-part1-Equality-11623" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-11628" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-11633" class="Keyword">where</a>

  <a id="plfa_plfa-part1-Equality-even.even-zero"></a><a id="plfa_plfa-part1-Equality-11642" href="../Equality/#plfa_plfa-part1-Equality-11642" class="InductiveConstructor">even-zero</a> <a id="plfa_plfa-part1-Equality-11652" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11654" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-11659" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a>

  <a id="plfa_plfa-part1-Equality-even.even-suc"></a><a id="plfa_plfa-part1-Equality-11667" href="../Equality/#plfa_plfa-part1-Equality-11667" class="InductiveConstructor">even-suc</a> <a id="plfa_plfa-part1-Equality-11676" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11678" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-11680" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-11681" href="../Equality/#plfa_plfa-part1-Equality-11681" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-11683" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11685" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-11686" class="Symbol">}</a>
    <a id="plfa_plfa-part1-Equality-11692" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-11694" href="../Equality/#plfa_plfa-part1-Equality-11607" class="Datatype">odd</a> <a id="plfa_plfa-part1-Equality-11698" href="../Equality/#plfa_plfa-part1-Equality-11681" class="Bound">n</a>
      <a id="plfa_plfa-part1-Equality-11706" class="Comment">------------</a>
    <a id="plfa_plfa-part1-Equality-11723" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-11725" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-11730" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-11731" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-11735" href="../Equality/#plfa_plfa-part1-Equality-11681" class="Bound">n</a><a id="plfa_plfa-part1-Equality-11736" class="Symbol">)</a>

<a id="plfa_plfa-part1-Equality-11739" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-11744" href="../Equality/#plfa_plfa-part1-Equality-11607" class="Datatype">odd</a> <a id="plfa_plfa-part1-Equality-11748" class="Keyword">where</a>
  <a id="plfa_plfa-part1-Equality-odd.odd-suc"></a><a id="plfa_plfa-part1-Equality-11756" href="../Equality/#plfa_plfa-part1-Equality-11756" class="InductiveConstructor">odd-suc</a> <a id="plfa_plfa-part1-Equality-11764" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11766" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-11768" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-11769" href="../Equality/#plfa_plfa-part1-Equality-11769" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-11771" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-11773" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-11774" class="Symbol">}</a>
    <a id="plfa_plfa-part1-Equality-11780" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-11782" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-11787" href="../Equality/#plfa_plfa-part1-Equality-11769" class="Bound">n</a>
      <a id="plfa_plfa-part1-Equality-11795" class="Comment">-----------</a>
    <a id="plfa_plfa-part1-Equality-11811" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-11813" href="../Equality/#plfa_plfa-part1-Equality-11607" class="Datatype">odd</a> <a id="plfa_plfa-part1-Equality-11817" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-11818" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-11822" href="../Equality/#plfa_plfa-part1-Equality-11769" class="Bound">n</a><a id="plfa_plfa-part1-Equality-11823" class="Symbol">)</a>
</pre><p>In the previous section, we proved addition is commutative. Given evidence that <code>even (m + n)</code> holds, we ought also to be able to take that as evidence that <code>even (n + m)</code> holds.</p>Agda includes special notation to support just this kind of reasoning, the <code>rewrite</code> notation we encountered earlier. To enable this notation, we use pragmas to tell Agda which type corresponds to equality:<pre class="Agda"><a id="plfa_plfa-part1-Equality-12225" class="Symbol">{-#</a> <a id="plfa_plfa-part1-Equality-12229" class="Keyword">BUILTIN</a> <a id="plfa_plfa-part1-Equality-12237" class="Keyword">EQUALITY</a> <a id="plfa_plfa-part1-Equality-12246" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part1-Equality-12250" class="Symbol">#-}</a>
</pre>We can then prove the desired property as follows:<pre class="Agda"><a id="plfa_plfa-part1-Equality-even-comm"></a><a id="plfa_plfa-part1-Equality-12318" href="../Equality/#plfa_plfa-part1-Equality-12318" class="Function">even-comm</a> <a id="plfa_plfa-part1-Equality-12328" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-12330" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-12332" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-12333" href="../Equality/#plfa_plfa-part1-Equality-12333" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-12335" href="../Equality/#plfa_plfa-part1-Equality-12335" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-12337" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-12339" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-12340" class="Symbol">)</a>
  <a id="plfa_plfa-part1-Equality-12344" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-12346" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-12351" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-12352" href="../Equality/#plfa_plfa-part1-Equality-12333" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-12354" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-12356" href="../Equality/#plfa_plfa-part1-Equality-12335" class="Bound">n</a><a id="plfa_plfa-part1-Equality-12357" class="Symbol">)</a>
    <a id="plfa_plfa-part1-Equality-12363" class="Comment">------------</a>
  <a id="plfa_plfa-part1-Equality-12378" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-12380" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-12385" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-12386" href="../Equality/#plfa_plfa-part1-Equality-12335" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-12388" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-12390" href="../Equality/#plfa_plfa-part1-Equality-12333" class="Bound">m</a><a id="plfa_plfa-part1-Equality-12391" class="Symbol">)</a>
<a id="plfa_plfa-part1-Equality-12393" href="../Equality/#plfa_plfa-part1-Equality-12318" class="Function">even-comm</a> <a id="plfa_plfa-part1-Equality-12403" href="../Equality/#plfa_plfa-part1-Equality-12403" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-12405" href="../Equality/#plfa_plfa-part1-Equality-12405" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-12407" href="../Equality/#plfa_plfa-part1-Equality-12407" class="Bound">ev</a>  <a id="plfa_plfa-part1-Equality-12411" class="Keyword">rewrite</a> <a id="plfa_plfa-part1-Equality-12419" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-12426" href="../Equality/#plfa_plfa-part1-Equality-12405" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-12428" href="../Equality/#plfa_plfa-part1-Equality-12403" class="Bound">m</a>  <a id="plfa_plfa-part1-Equality-12431" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-12434" href="../Equality/#plfa_plfa-part1-Equality-12407" class="Bound">ev</a>
</pre><p>Here <code>ev</code> ranges over evidence that <code>even (m + n)</code> holds, and we show that it also provides evidence that <code>even (n + m)</code> holds. In general, the keyword <code>rewrite</code> is followed by evidence of an equality, and that equality is used to rewrite the type of the goal and of any variable in scope.</p><p>It is instructive to develop <code>even-comm</code> interactively. To start, we supply variables for the arguments on the left, and a hole for the body on the right:</p><pre><code>even-comm : ∀ (m n : ℕ)
  → even (m + n)
    ------------
  → even (n + m)
even-comm m n ev = {! !}</code></pre><p>If we go into the hole and type <code>C-c C-,</code> then Agda reports:</p><pre><code>Goal: even (n + m)
————————————————————————————————————————————————————————————
ev : even (m + n)
n  : ℕ
m  : ℕ</code></pre><p>Now we add the rewrite:</p><pre><code>even-comm : ∀ (m n : ℕ)
  → even (m + n)
    ------------
  → even (n + m)
even-comm m n ev rewrite +-comm n m = {! !}</code></pre><p>If we go into the hole again and type <code>C-c C-,</code> then Agda now reports:</p><pre><code>Goal: even (m + n)
————————————————————————————————————————————————————————————
ev : even (m + n)
n  : ℕ
m  : ℕ</code></pre><p>The arguments have been swapped in the goal. Now it is trivial to see that <code>ev</code> satisfies the goal, and typing <code>C-c C-a</code> in the hole causes it to be filled with <code>ev</code>. The command <code>C-c C-a</code> performs an automated search, including checking whether a variable in scope has the same type as the goal.</p><h2 id="multiple-rewrites">Multiple rewrites</h2>One may perform multiple rewrites, each separated by a vertical bar. For instance, here is a second proof that addition is commutative, relying on rewrites rather than chains of equalities:<pre class="Agda"><a id="plfa_plfa-part1-Equality-+-comm′"></a><a id="plfa_plfa-part1-Equality-14098" href="../Equality/#plfa_plfa-part1-Equality-14098" class="Function">+-comm′</a> <a id="plfa_plfa-part1-Equality-14106" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-14108" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-14110" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-14111" href="../Equality/#plfa_plfa-part1-Equality-14111" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14113" href="../Equality/#plfa_plfa-part1-Equality-14113" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14115" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-14117" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-14118" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-14120" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-14122" href="../Equality/#plfa_plfa-part1-Equality-14111" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14124" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-14126" href="../Equality/#plfa_plfa-part1-Equality-14113" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14128" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-14130" href="../Equality/#plfa_plfa-part1-Equality-14113" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14132" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-14134" href="../Equality/#plfa_plfa-part1-Equality-14111" class="Bound">m</a>
<a id="plfa_plfa-part1-Equality-14136" href="../Equality/#plfa_plfa-part1-Equality-14098" class="Function">+-comm′</a> <a id="plfa_plfa-part1-Equality-14144" href="../Equality/#plfa_plfa-part1-Equality-9489" class="InductiveConstructor">zero</a>    <a id="plfa_plfa-part1-Equality-14152" href="../Equality/#plfa_plfa-part1-Equality-14152" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-14155" class="Keyword">rewrite</a> <a id="plfa_plfa-part1-Equality-14163" href="../Equality/#plfa_plfa-part1-Equality-9668" class="Postulate">+-identity</a> <a id="plfa_plfa-part1-Equality-14174" href="../Equality/#plfa_plfa-part1-Equality-14152" class="Bound">n</a>             <a id="plfa_plfa-part1-Equality-14188" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-14191" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part1-Equality-14196" href="../Equality/#plfa_plfa-part1-Equality-14098" class="Function">+-comm′</a> <a id="plfa_plfa-part1-Equality-14204" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-14205" href="../Equality/#plfa_plfa-part1-Equality-9500" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part1-Equality-14209" href="../Equality/#plfa_plfa-part1-Equality-14209" class="Bound">m</a><a id="plfa_plfa-part1-Equality-14210" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-14212" href="../Equality/#plfa_plfa-part1-Equality-14212" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-14215" class="Keyword">rewrite</a> <a id="plfa_plfa-part1-Equality-14223" href="../Equality/#plfa_plfa-part1-Equality-9708" class="Postulate">+-suc</a> <a id="plfa_plfa-part1-Equality-14229" href="../Equality/#plfa_plfa-part1-Equality-14212" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14231" href="../Equality/#plfa_plfa-part1-Equality-14209" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14233" class="Symbol">|</a> <a id="plfa_plfa-part1-Equality-14235" href="../Equality/#plfa_plfa-part1-Equality-14098" class="Function">+-comm′</a> <a id="plfa_plfa-part1-Equality-14243" href="../Equality/#plfa_plfa-part1-Equality-14209" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14245" href="../Equality/#plfa_plfa-part1-Equality-14212" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-14248" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-14251" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
</pre><p>This is far more compact. Among other things, whereas the previous proof required <code>cong suc (+-comm m n)</code> as the justification to invoke the inductive hypothesis, here it is sufficient to rewrite with <code>+-comm m n</code>, as rewriting automatically takes congruence into account. Although proofs with rewriting are shorter, proofs as chains of equalities are easier to follow, and we will stick with the latter when feasible.</p><h2 id="rewriting-expanded">Rewriting expanded</h2>The <code>rewrite</code> notation is in fact shorthand for an appropriate use of <code>with</code> abstraction:<pre class="Agda"><a id="plfa_plfa-part1-Equality-even-comm′"></a><a id="plfa_plfa-part1-Equality-14804" href="../Equality/#plfa_plfa-part1-Equality-14804" class="Function">even-comm′</a> <a id="plfa_plfa-part1-Equality-14815" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-14817" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-14819" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-14820" href="../Equality/#plfa_plfa-part1-Equality-14820" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14822" href="../Equality/#plfa_plfa-part1-Equality-14822" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14824" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-14826" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-14827" class="Symbol">)</a>
  <a id="plfa_plfa-part1-Equality-14831" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-14833" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-14838" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-14839" href="../Equality/#plfa_plfa-part1-Equality-14820" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14841" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-14843" href="../Equality/#plfa_plfa-part1-Equality-14822" class="Bound">n</a><a id="plfa_plfa-part1-Equality-14844" class="Symbol">)</a>
    <a id="plfa_plfa-part1-Equality-14850" class="Comment">------------</a>
  <a id="plfa_plfa-part1-Equality-14865" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-14867" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-14872" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-14873" href="../Equality/#plfa_plfa-part1-Equality-14822" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14875" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-14877" href="../Equality/#plfa_plfa-part1-Equality-14820" class="Bound">m</a><a id="plfa_plfa-part1-Equality-14878" class="Symbol">)</a>
<a id="plfa_plfa-part1-Equality-14880" href="../Equality/#plfa_plfa-part1-Equality-14804" class="Function">even-comm′</a> <a id="plfa_plfa-part1-Equality-14891" href="../Equality/#plfa_plfa-part1-Equality-14891" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14893" href="../Equality/#plfa_plfa-part1-Equality-14893" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-14895" href="../Equality/#plfa_plfa-part1-Equality-14895" class="Bound">ev</a> <a id="plfa_plfa-part1-Equality-14898" class="Keyword">with</a>   <a id="plfa_plfa-part1-Equality-14905" href="../Equality/#plfa_plfa-part1-Equality-14891" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14907" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-14909" href="../Equality/#plfa_plfa-part1-Equality-14893" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-14912" class="Symbol">|</a> <a id="plfa_plfa-part1-Equality-14914" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-14921" href="../Equality/#plfa_plfa-part1-Equality-14891" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-14923" href="../Equality/#plfa_plfa-part1-Equality-14893" class="Bound">n</a>
<a id="plfa_plfa-part1-Equality-14925" class="Symbol">...</a>                  <a id="plfa_plfa-part1-Equality-14946" class="Symbol">|</a> <a id="plfa_plfa-part1-Equality-14948" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part1-Equality-14950" class="DottedPattern Bound">n</a> <a id="plfa_plfa-part1-Equality-14952" href="../Equality/#plfa_plfa-part1-Equality-9514" class="DottedPattern Function Operator">+</a> <a id="plfa_plfa-part1-Equality-14954" class="DottedPattern Bound">m</a><a id="plfa_plfa-part1-Equality-14955" class="DottedPattern Symbol">)</a> <a id="plfa_plfa-part1-Equality-14957" class="Symbol">|</a> <a id="plfa_plfa-part1-Equality-14959" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>       <a id="plfa_plfa-part1-Equality-14970" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-14972" class="Bound">ev</a>
</pre><p>In general, one can follow <code>with</code> by any number of expressions, separated by bars, where each following equation has the same number of patterns. We often write expressions and the corresponding patterns so they line up in columns, as above. Here the first column asserts that <code>m + n</code> and <code>n + m</code> are identical, and the second column justifies that assertion with evidence of the appropriate equality. Note also the use of the <em>dot pattern</em>, <code>.(n + m)</code>. A dot pattern consists of a dot followed by an expression, and is used when other information forces the value matched to be equal to the value of the expression in the dot pattern. In this case, the identification of <code>m + n</code> and <code>n + m</code> is justified by the subsequent matching of <code>+-comm m n</code> against <code>refl</code>. One might think that the first clause is redundant as the information is inherent in the second clause, but in fact Agda is rather picky on this point: omitting the first clause or reversing the order of the clauses will cause Agda to report an error. (Try it and see!)</p>In this case, we can avoid rewrite by simply applying the substitution function defined earlier:<pre class="Agda"><a id="plfa_plfa-part1-Equality-even-comm″"></a><a id="plfa_plfa-part1-Equality-16123" href="../Equality/#plfa_plfa-part1-Equality-16123" class="Function">even-comm″</a> <a id="plfa_plfa-part1-Equality-16134" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-16136" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-16138" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-16139" href="../Equality/#plfa_plfa-part1-Equality-16139" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-16141" href="../Equality/#plfa_plfa-part1-Equality-16141" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-16143" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-16145" href="../Equality/#plfa_plfa-part1-Equality-9473" class="Datatype">ℕ</a><a id="plfa_plfa-part1-Equality-16146" class="Symbol">)</a>
  <a id="plfa_plfa-part1-Equality-16150" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-16152" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-16157" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-16158" href="../Equality/#plfa_plfa-part1-Equality-16139" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-16160" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-16162" href="../Equality/#plfa_plfa-part1-Equality-16141" class="Bound">n</a><a id="plfa_plfa-part1-Equality-16163" class="Symbol">)</a>
    <a id="plfa_plfa-part1-Equality-16169" class="Comment">------------</a>
  <a id="plfa_plfa-part1-Equality-16184" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-16186" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-16191" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-16192" href="../Equality/#plfa_plfa-part1-Equality-16141" class="Bound">n</a> <a id="plfa_plfa-part1-Equality-16194" href="../Equality/#plfa_plfa-part1-Equality-9514" class="Function Operator">+</a> <a id="plfa_plfa-part1-Equality-16196" href="../Equality/#plfa_plfa-part1-Equality-16139" class="Bound">m</a><a id="plfa_plfa-part1-Equality-16197" class="Symbol">)</a>
<a id="plfa_plfa-part1-Equality-16199" href="../Equality/#plfa_plfa-part1-Equality-16123" class="Function">even-comm″</a> <a id="plfa_plfa-part1-Equality-16210" href="../Equality/#plfa_plfa-part1-Equality-16210" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-16212" href="../Equality/#plfa_plfa-part1-Equality-16212" class="Bound">n</a>  <a id="plfa_plfa-part1-Equality-16215" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-16218" href="../Equality/#plfa_plfa-part1-Equality-4748" class="Function">subst</a> <a id="plfa_plfa-part1-Equality-16224" href="../Equality/#plfa_plfa-part1-Equality-11587" class="Datatype">even</a> <a id="plfa_plfa-part1-Equality-16229" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-16230" href="../Equality/#plfa_plfa-part1-Equality-10106" class="Function">+-comm</a> <a id="plfa_plfa-part1-Equality-16237" href="../Equality/#plfa_plfa-part1-Equality-16210" class="Bound">m</a> <a id="plfa_plfa-part1-Equality-16239" href="../Equality/#plfa_plfa-part1-Equality-16212" class="Bound">n</a><a id="plfa_plfa-part1-Equality-16240" class="Symbol">)</a>
</pre><p>Nonetheless, rewrite is a vital part of the Agda toolkit. We will use it sparingly, but it is occasionally essential.</p><h2 id="leibniz-equality">Leibniz equality</h2><p>The form of asserting equality that we have used is due to Martin-Löf, and was published in 1975. An older form is due to Leibniz, and was published in 1686. Leibniz asserted the <em>identity of indiscernibles</em>: two objects are equal if and only if they satisfy the same properties. This principle sometimes goes by the name Leibniz’ Law, and is closely related to Spock’s Law, “A difference that makes no difference is no difference”. Here we define Leibniz equality, and show that two terms satisfy Leibniz equality if and only if they satisfy Martin-Löf equality.</p><p>Leibniz equality is usually formalised to state that <code>x ≐ y</code> holds if every property <code>P</code> that holds of <code>x</code> also holds of <code>y</code>. Perhaps surprisingly, this definition is sufficient to also ensure the converse, that every property <code>P</code> that holds of <code>y</code> also holds of <code>x</code>.</p>Let <code>x</code> and <code>y</code> be objects of type <code>A</code>. We say that <code>x ≐ y</code> holds if for every predicate <code>P</code> over type <code>A</code> we have that <code>P x</code> implies <code>P y</code>:<pre class="Agda"><a id="plfa_plfa-part1-Equality-_≐_"></a><a id="plfa_plfa-part1-Equality-17375" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">_≐_</a> <a id="plfa_plfa-part1-Equality-17379" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-17381" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-17383" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-17384" href="../Equality/#plfa_plfa-part1-Equality-17384" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-17386" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-17388" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-17391" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-17393" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-17394" href="../Equality/#plfa_plfa-part1-Equality-17394" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-17396" href="../Equality/#plfa_plfa-part1-Equality-17396" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-17398" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-17400" href="../Equality/#plfa_plfa-part1-Equality-17384" class="Bound">A</a><a id="plfa_plfa-part1-Equality-17401" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-17403" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-17405" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set₁</a>
<a id="plfa_plfa-part1-Equality-17410" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">_≐_</a> <a id="plfa_plfa-part1-Equality-17414" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-17415" href="../Equality/#plfa_plfa-part1-Equality-17415" class="Bound">A</a><a id="plfa_plfa-part1-Equality-17416" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-17418" href="../Equality/#plfa_plfa-part1-Equality-17418" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-17420" href="../Equality/#plfa_plfa-part1-Equality-17420" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-17422" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-17424" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-17426" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-17427" href="../Equality/#plfa_plfa-part1-Equality-17427" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-17429" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-17431" href="../Equality/#plfa_plfa-part1-Equality-17415" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-17433" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-17435" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-17438" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-17440" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-17442" href="../Equality/#plfa_plfa-part1-Equality-17427" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-17444" href="../Equality/#plfa_plfa-part1-Equality-17418" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-17446" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-17448" href="../Equality/#plfa_plfa-part1-Equality-17427" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-17450" href="../Equality/#plfa_plfa-part1-Equality-17420" class="Bound">y</a>
</pre><p>We cannot write the left-hand side of the equation as <code>x ≐ y</code>, and instead we write <code>_≐_ {A} x y</code> to provide access to the implicit parameter <code>A</code> which appears on the right-hand side.</p><p>This is our first use of <em>levels</em>. We cannot assign <code>Set</code> the type <code>Set</code>, since this would lead to contradictions such as Russell’s Paradox and Girard’s Paradox. Instead, there is a hierarchy of types, where <code>Set : Set₁</code>, <code>Set₁ : Set₂</code>, and so on. In fact, <code>Set</code> itself is just an abbreviation for <code>Set₀</code>. Since the equation defining <code>_≐_</code> mentions <code>Set</code> on the right-hand side, the corresponding signature must use <code>Set₁</code>. We say a bit more about levels below.</p>Leibniz equality is reflexive and transitive, where the first follows by a variant of the identity function and the second by a variant of function composition:<pre class="Agda"><a id="plfa_plfa-part1-Equality-refl-≐"></a><a id="plfa_plfa-part1-Equality-18278" href="../Equality/#plfa_plfa-part1-Equality-18278" class="Function">refl-≐</a> <a id="plfa_plfa-part1-Equality-18285" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18287" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-18289" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18290" href="../Equality/#plfa_plfa-part1-Equality-18290" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-18292" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18294" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-18297" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-18299" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18300" href="../Equality/#plfa_plfa-part1-Equality-18300" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18302" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18304" href="../Equality/#plfa_plfa-part1-Equality-18290" class="Bound">A</a><a id="plfa_plfa-part1-Equality-18305" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-18309" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18311" href="../Equality/#plfa_plfa-part1-Equality-18300" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18313" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-18315" href="../Equality/#plfa_plfa-part1-Equality-18300" class="Bound">x</a>
<a id="plfa_plfa-part1-Equality-18317" href="../Equality/#plfa_plfa-part1-Equality-18278" class="Function">refl-≐</a> <a id="plfa_plfa-part1-Equality-18324" href="../Equality/#plfa_plfa-part1-Equality-18324" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-18326" href="../Equality/#plfa_plfa-part1-Equality-18326" class="Bound">Px</a>  <a id="plfa_plfa-part1-Equality-18330" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-18333" href="../Equality/#plfa_plfa-part1-Equality-18326" class="Bound">Px</a>

<a id="plfa_plfa-part1-Equality-trans-≐"></a><a id="plfa_plfa-part1-Equality-18337" href="../Equality/#plfa_plfa-part1-Equality-18337" class="Function">trans-≐</a> <a id="plfa_plfa-part1-Equality-18345" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18347" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-18349" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18350" href="../Equality/#plfa_plfa-part1-Equality-18350" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-18352" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18354" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-18357" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-18359" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18360" href="../Equality/#plfa_plfa-part1-Equality-18360" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18362" href="../Equality/#plfa_plfa-part1-Equality-18362" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-18364" href="../Equality/#plfa_plfa-part1-Equality-18364" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-18366" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18368" href="../Equality/#plfa_plfa-part1-Equality-18350" class="Bound">A</a><a id="plfa_plfa-part1-Equality-18369" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-18373" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18375" href="../Equality/#plfa_plfa-part1-Equality-18360" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18377" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-18379" href="../Equality/#plfa_plfa-part1-Equality-18362" class="Bound">y</a>
  <a id="plfa_plfa-part1-Equality-18383" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18385" href="../Equality/#plfa_plfa-part1-Equality-18362" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-18387" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-18389" href="../Equality/#plfa_plfa-part1-Equality-18364" class="Bound">z</a>
    <a id="plfa_plfa-part1-Equality-18395" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-18403" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18405" href="../Equality/#plfa_plfa-part1-Equality-18360" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18407" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-18409" href="../Equality/#plfa_plfa-part1-Equality-18364" class="Bound">z</a>
<a id="plfa_plfa-part1-Equality-18411" href="../Equality/#plfa_plfa-part1-Equality-18337" class="Function">trans-≐</a> <a id="plfa_plfa-part1-Equality-18419" href="../Equality/#plfa_plfa-part1-Equality-18419" class="Bound">x≐y</a> <a id="plfa_plfa-part1-Equality-18423" href="../Equality/#plfa_plfa-part1-Equality-18423" class="Bound">y≐z</a> <a id="plfa_plfa-part1-Equality-18427" href="../Equality/#plfa_plfa-part1-Equality-18427" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-18429" href="../Equality/#plfa_plfa-part1-Equality-18429" class="Bound">Px</a>  <a id="plfa_plfa-part1-Equality-18433" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-18436" href="../Equality/#plfa_plfa-part1-Equality-18423" class="Bound">y≐z</a> <a id="plfa_plfa-part1-Equality-18440" href="../Equality/#plfa_plfa-part1-Equality-18427" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-18442" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-18443" href="../Equality/#plfa_plfa-part1-Equality-18419" class="Bound">x≐y</a> <a id="plfa_plfa-part1-Equality-18447" href="../Equality/#plfa_plfa-part1-Equality-18427" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-18449" href="../Equality/#plfa_plfa-part1-Equality-18429" class="Bound">Px</a><a id="plfa_plfa-part1-Equality-18451" class="Symbol">)</a>
</pre>Symmetry is less obvious. We have to show that if <code>P x</code> implies <code>P y</code> for all predicates <code>P</code>, then the implication holds the other way round as well:<pre class="Agda"><a id="plfa_plfa-part1-Equality-sym-≐"></a><a id="plfa_plfa-part1-Equality-18617" href="../Equality/#plfa_plfa-part1-Equality-18617" class="Function">sym-≐</a> <a id="plfa_plfa-part1-Equality-18623" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18625" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-18627" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18628" href="../Equality/#plfa_plfa-part1-Equality-18628" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-18630" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18632" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-18635" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-18637" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18638" href="../Equality/#plfa_plfa-part1-Equality-18638" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18640" href="../Equality/#plfa_plfa-part1-Equality-18640" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-18642" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18644" href="../Equality/#plfa_plfa-part1-Equality-18628" class="Bound">A</a><a id="plfa_plfa-part1-Equality-18645" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-18649" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18651" href="../Equality/#plfa_plfa-part1-Equality-18638" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-18653" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-18655" href="../Equality/#plfa_plfa-part1-Equality-18640" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-18661" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-18669" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18671" href="../Equality/#plfa_plfa-part1-Equality-18640" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-18673" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-18675" href="../Equality/#plfa_plfa-part1-Equality-18638" class="Bound">x</a>
<a id="plfa_plfa-part1-Equality-18677" href="../Equality/#plfa_plfa-part1-Equality-18617" class="Function">sym-≐</a> <a id="plfa_plfa-part1-Equality-18683" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18684" href="../Equality/#plfa_plfa-part1-Equality-18684" class="Bound">A</a><a id="plfa_plfa-part1-Equality-18685" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-18687" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18688" href="../Equality/#plfa_plfa-part1-Equality-18688" class="Bound">x</a><a id="plfa_plfa-part1-Equality-18689" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-18691" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-18692" href="../Equality/#plfa_plfa-part1-Equality-18692" class="Bound">y</a><a id="plfa_plfa-part1-Equality-18693" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-18695" href="../Equality/#plfa_plfa-part1-Equality-18695" class="Bound">x≐y</a> <a id="plfa_plfa-part1-Equality-18699" href="../Equality/#plfa_plfa-part1-Equality-18699" class="Bound">P</a>  <a id="plfa_plfa-part1-Equality-18702" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-18705" href="../Equality/#plfa_plfa-part1-Equality-18787" class="Function">Qy</a>
  <a id="plfa_plfa-part1-Equality-18710" class="Keyword">where</a>
    <a id="plfa_plfa-part1-Equality-18720" href="../Equality/#plfa_plfa-part1-Equality-18720" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-18722" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18724" href="../Equality/#plfa_plfa-part1-Equality-18684" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-18726" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18728" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
    <a id="plfa_plfa-part1-Equality-18736" href="../Equality/#plfa_plfa-part1-Equality-18720" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-18738" href="../Equality/#plfa_plfa-part1-Equality-18738" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-18740" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-18742" href="../Equality/#plfa_plfa-part1-Equality-18699" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-18744" href="../Equality/#plfa_plfa-part1-Equality-18738" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-18746" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-18748" href="../Equality/#plfa_plfa-part1-Equality-18699" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-18750" href="../Equality/#plfa_plfa-part1-Equality-18688" class="Bound">x</a>
    <a id="plfa_plfa-part1-Equality-18756" href="../Equality/#plfa_plfa-part1-Equality-18756" class="Function">Qx</a> <a id="plfa_plfa-part1-Equality-18759" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18761" href="../Equality/#plfa_plfa-part1-Equality-18720" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-18763" href="../Equality/#plfa_plfa-part1-Equality-18688" class="Bound">x</a>
    <a id="plfa_plfa-part1-Equality-18769" href="../Equality/#plfa_plfa-part1-Equality-18756" class="Function">Qx</a> <a id="plfa_plfa-part1-Equality-18772" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-18774" href="../Equality/#plfa_plfa-part1-Equality-18278" class="Function">refl-≐</a> <a id="plfa_plfa-part1-Equality-18781" href="../Equality/#plfa_plfa-part1-Equality-18699" class="Bound">P</a>
    <a id="plfa_plfa-part1-Equality-18787" href="../Equality/#plfa_plfa-part1-Equality-18787" class="Function">Qy</a> <a id="plfa_plfa-part1-Equality-18790" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-18792" href="../Equality/#plfa_plfa-part1-Equality-18720" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-18794" href="../Equality/#plfa_plfa-part1-Equality-18692" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-18800" href="../Equality/#plfa_plfa-part1-Equality-18787" class="Function">Qy</a> <a id="plfa_plfa-part1-Equality-18803" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-18805" href="../Equality/#plfa_plfa-part1-Equality-18695" class="Bound">x≐y</a> <a id="plfa_plfa-part1-Equality-18809" href="../Equality/#plfa_plfa-part1-Equality-18720" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-18811" href="../Equality/#plfa_plfa-part1-Equality-18756" class="Function">Qx</a>
</pre><p>Given <code>x ≐ y</code>, a specific <code>P</code>, we have to construct a proof that <code>P y</code> implies <code>P x</code>. To do so, we instantiate the equality with a predicate <code>Q</code> such that <code>Q z</code> holds if <code>P z</code> implies <code>P x</code>. The property <code>Q x</code> is trivial by reflexivity, and hence <code>Q y</code> follows from <code>x ≐ y</code>. But <code>Q y</code> is exactly a proof of what we require, that <code>P y</code> implies <code>P x</code>.</p>We now show that Martin-Löf equality implies Leibniz equality, and vice versa. In the forward direction, if we know <code>x ≡ y</code> we need for any <code>P</code> to take evidence of <code>P x</code> to evidence of <code>P y</code>, which is easy since equality of <code>x</code> and <code>y</code> implies that any proof of <code>P x</code> is also a proof of <code>P y</code>:<pre class="Agda"><a id="plfa_plfa-part1-Equality-≡-implies-≐"></a><a id="plfa_plfa-part1-Equality-19476" href="../Equality/#plfa_plfa-part1-Equality-19476" class="Function">≡-implies-≐</a> <a id="plfa_plfa-part1-Equality-19488" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19490" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-19492" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19493" href="../Equality/#plfa_plfa-part1-Equality-19493" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-19495" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19497" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-19500" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-19502" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19503" href="../Equality/#plfa_plfa-part1-Equality-19503" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19505" href="../Equality/#plfa_plfa-part1-Equality-19505" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-19507" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19509" href="../Equality/#plfa_plfa-part1-Equality-19493" class="Bound">A</a><a id="plfa_plfa-part1-Equality-19510" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-19514" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-19516" href="../Equality/#plfa_plfa-part1-Equality-19503" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19518" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-19520" href="../Equality/#plfa_plfa-part1-Equality-19505" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-19526" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-19534" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-19536" href="../Equality/#plfa_plfa-part1-Equality-19503" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19538" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-19540" href="../Equality/#plfa_plfa-part1-Equality-19505" class="Bound">y</a>
<a id="plfa_plfa-part1-Equality-19542" href="../Equality/#plfa_plfa-part1-Equality-19476" class="Function">≡-implies-≐</a> <a id="plfa_plfa-part1-Equality-19554" href="../Equality/#plfa_plfa-part1-Equality-19554" class="Bound">x≡y</a> <a id="plfa_plfa-part1-Equality-19558" href="../Equality/#plfa_plfa-part1-Equality-19558" class="Bound">P</a>  <a id="plfa_plfa-part1-Equality-19561" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-19564" href="../Equality/#plfa_plfa-part1-Equality-4748" class="Function">subst</a> <a id="plfa_plfa-part1-Equality-19570" href="../Equality/#plfa_plfa-part1-Equality-19558" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-19572" href="../Equality/#plfa_plfa-part1-Equality-19554" class="Bound">x≡y</a>
</pre><p>This direction follows from substitution, which we showed earlier.</p>In the reverse direction, given that for any <code>P</code> we can take a proof of <code>P x</code> to a proof of <code>P y</code> we need to show <code>x ≡ y</code>:<pre class="Agda"><a id="plfa_plfa-part1-Equality-≐-implies-≡"></a><a id="plfa_plfa-part1-Equality-19779" href="../Equality/#plfa_plfa-part1-Equality-19779" class="Function">≐-implies-≡</a> <a id="plfa_plfa-part1-Equality-19791" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19793" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-19795" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19796" href="../Equality/#plfa_plfa-part1-Equality-19796" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-19798" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19800" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part1-Equality-19803" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-19805" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19806" href="../Equality/#plfa_plfa-part1-Equality-19806" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19808" href="../Equality/#plfa_plfa-part1-Equality-19808" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-19810" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19812" href="../Equality/#plfa_plfa-part1-Equality-19796" class="Bound">A</a><a id="plfa_plfa-part1-Equality-19813" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-19817" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-19819" href="../Equality/#plfa_plfa-part1-Equality-19806" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19821" href="../Equality/#plfa_plfa-part1-Equality-17375" class="Function Operator">≐</a> <a id="plfa_plfa-part1-Equality-19823" href="../Equality/#plfa_plfa-part1-Equality-19808" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-19829" class="Comment">-----</a>
  <a id="plfa_plfa-part1-Equality-19837" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-19839" href="../Equality/#plfa_plfa-part1-Equality-19806" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19841" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-19843" href="../Equality/#plfa_plfa-part1-Equality-19808" class="Bound">y</a>
<a id="plfa_plfa-part1-Equality-19845" href="../Equality/#plfa_plfa-part1-Equality-19779" class="Function">≐-implies-≡</a> <a id="plfa_plfa-part1-Equality-19857" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19858" href="../Equality/#plfa_plfa-part1-Equality-19858" class="Bound">A</a><a id="plfa_plfa-part1-Equality-19859" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-19861" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19862" href="../Equality/#plfa_plfa-part1-Equality-19862" class="Bound">x</a><a id="plfa_plfa-part1-Equality-19863" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-19865" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-19866" href="../Equality/#plfa_plfa-part1-Equality-19866" class="Bound">y</a><a id="plfa_plfa-part1-Equality-19867" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-19869" href="../Equality/#plfa_plfa-part1-Equality-19869" class="Bound">x≐y</a>  <a id="plfa_plfa-part1-Equality-19874" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-19877" href="../Equality/#plfa_plfa-part1-Equality-19951" class="Function">Qy</a>
  <a id="plfa_plfa-part1-Equality-19882" class="Keyword">where</a>
    <a id="plfa_plfa-part1-Equality-19892" href="../Equality/#plfa_plfa-part1-Equality-19892" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-19894" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19896" href="../Equality/#plfa_plfa-part1-Equality-19858" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-19898" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-19900" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
    <a id="plfa_plfa-part1-Equality-19908" href="../Equality/#plfa_plfa-part1-Equality-19892" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-19910" href="../Equality/#plfa_plfa-part1-Equality-19910" class="Bound">z</a> <a id="plfa_plfa-part1-Equality-19912" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-19914" href="../Equality/#plfa_plfa-part1-Equality-19862" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-19916" href="../Equality/#plfa_plfa-part1-Equality-671" class="Datatype Operator">≡</a> <a id="plfa_plfa-part1-Equality-19918" href="../Equality/#plfa_plfa-part1-Equality-19910" class="Bound">z</a>
    <a id="plfa_plfa-part1-Equality-19924" href="../Equality/#plfa_plfa-part1-Equality-19924" class="Function">Qx</a> <a id="plfa_plfa-part1-Equality-19927" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19929" href="../Equality/#plfa_plfa-part1-Equality-19892" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-19931" href="../Equality/#plfa_plfa-part1-Equality-19862" class="Bound">x</a>
    <a id="plfa_plfa-part1-Equality-19937" href="../Equality/#plfa_plfa-part1-Equality-19924" class="Function">Qx</a> <a id="plfa_plfa-part1-Equality-19940" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-19942" href="../Equality/#plfa_plfa-part1-Equality-711" class="InductiveConstructor">refl</a>
    <a id="plfa_plfa-part1-Equality-19951" href="../Equality/#plfa_plfa-part1-Equality-19951" class="Function">Qy</a> <a id="plfa_plfa-part1-Equality-19954" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-19956" href="../Equality/#plfa_plfa-part1-Equality-19892" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-19958" href="../Equality/#plfa_plfa-part1-Equality-19866" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-19964" href="../Equality/#plfa_plfa-part1-Equality-19951" class="Function">Qy</a> <a id="plfa_plfa-part1-Equality-19967" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-19969" href="../Equality/#plfa_plfa-part1-Equality-19869" class="Bound">x≐y</a> <a id="plfa_plfa-part1-Equality-19973" href="../Equality/#plfa_plfa-part1-Equality-19892" class="Function">Q</a> <a id="plfa_plfa-part1-Equality-19975" href="../Equality/#plfa_plfa-part1-Equality-19924" class="Function">Qx</a>
</pre><p>The proof is similar to that for symmetry of Leibniz equality. We take <code>Q</code> to be the predicate that holds of <code>z</code> if <code>x ≡ z</code>. Then <code>Q x</code> is trivial by reflexivity of Martin-Löf equality, and hence <code>Q y</code> follows from <code>x ≐ y</code>. But <code>Q y</code> is exactly a proof of what we require, that <code>x ≡ y</code>.</p><p>(Parts of this section are adapted from <em>≐≃≡: Leibniz Equality is Isomorphic to Martin-Löf Identity, Parametrically</em>, by Andreas Abel, Jesper Cockx, Dominique Devries, Andreas Nuyts, and Philip Wadler, draft, 2017.)</p><h2 id="unipoly">Universe polymorphism</h2><p>As we have seen, not every type belongs to <code>Set</code>, but instead every type belongs somewhere in the hierarchy <code>Set₀</code>, <code>Set₁</code>, <code>Set₂</code>, and so on, where <code>Set</code> abbreviates <code>Set₀</code>, and <code>Set₀ : Set₁</code>, <code>Set₁ : Set₂</code>, and so on. The definition of equality given above is fine if we want to compare two values of a type that belongs to <code>Set</code>, but what if we want to compare two values of a type that belongs to <code>Set ℓ</code> for some arbitrary level <code>ℓ</code>?</p>The answer is <em>universe polymorphism</em>, where a definition is made with respect to an arbitrary level <code>ℓ</code>. To make use of levels, we first import the following:<pre class="Agda"><a id="plfa_plfa-part1-Equality-21134" class="Keyword">open</a> <a id="plfa_plfa-part1-Equality-21139" class="Keyword">import</a> <a id="plfa_plfa-part1-Equality-21146" href="https://agda.github.io/agda-stdlib/v1.7.2/Level.html" class="Module">Level</a> <a id="plfa_plfa-part1-Equality-21152" class="Keyword">using</a> <a id="plfa_plfa-part1-Equality-21158" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-21159" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#591" class="Postulate">Level</a><a id="plfa_plfa-part1-Equality-21164" class="Symbol">;</a> <a id="plfa_plfa-part1-Equality-21166" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#804" class="Primitive Operator">_⊔_</a><a id="plfa_plfa-part1-Equality-21169" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-21171" class="Keyword">renaming</a> <a id="plfa_plfa-part1-Equality-21180" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-21181" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#758" class="Primitive">zero</a> <a id="plfa_plfa-part1-Equality-21186" class="Symbol">to</a> <a id="plfa_plfa-part1-Equality-21189" class="Primitive">lzero</a><a id="plfa_plfa-part1-Equality-21194" class="Symbol">;</a> <a id="plfa_plfa-part1-Equality-21196" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#774" class="Primitive">suc</a> <a id="plfa_plfa-part1-Equality-21200" class="Symbol">to</a> <a id="plfa_plfa-part1-Equality-21203" class="Primitive">lsuc</a><a id="plfa_plfa-part1-Equality-21207" class="Symbol">)</a>
</pre><p>We rename constructors <code>zero</code> and <code>suc</code> to <code>lzero</code> and <code>lsuc</code> to avoid confusion between levels and naturals.</p><p>Levels are isomorphic to natural numbers, and have similar constructors:</p><pre><code>lzero : Level
lsuc  : Level → Level</code></pre><p>The names <code>Set₀</code>, <code>Set₁</code>, <code>Set₂</code>, and so on, are abbreviations for</p><pre><code>Set lzero
Set (lsuc lzero)
Set (lsuc (lsuc lzero))</code></pre><p>and so on. There is also an operator</p><pre><code>_⊔_ : Level → Level → Level</code></pre><p>that given two levels returns the larger of the two.</p>Here is the definition of equality, generalised to an arbitrary level:<pre class="Agda"><a id="plfa_plfa-part1-Equality-21779" class="Keyword">data</a> <a id="plfa_plfa-part1-Equality-_≡′_"></a><a id="plfa_plfa-part1-Equality-21784" href="../Equality/#plfa_plfa-part1-Equality-21784" class="Datatype Operator">_≡′_</a> <a id="plfa_plfa-part1-Equality-21789" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-21790" href="../Equality/#plfa_plfa-part1-Equality-21790" class="Bound">ℓ</a> <a id="plfa_plfa-part1-Equality-21792" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21794" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#591" class="Postulate">Level</a><a id="plfa_plfa-part1-Equality-21799" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-21801" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-21802" href="../Equality/#plfa_plfa-part1-Equality-21802" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-21804" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21806" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-21810" href="../Equality/#plfa_plfa-part1-Equality-21790" class="Bound">ℓ</a><a id="plfa_plfa-part1-Equality-21811" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-21813" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-21814" href="../Equality/#plfa_plfa-part1-Equality-21814" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-21816" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21818" href="../Equality/#plfa_plfa-part1-Equality-21802" class="Bound">A</a><a id="plfa_plfa-part1-Equality-21819" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-21821" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21823" href="../Equality/#plfa_plfa-part1-Equality-21802" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-21825" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-21827" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-21831" href="../Equality/#plfa_plfa-part1-Equality-21790" class="Bound">ℓ</a> <a id="plfa_plfa-part1-Equality-21833" class="Keyword">where</a>
  <a id="plfa_plfa-part1-Equality-_≡′_.refl′"></a><a id="plfa_plfa-part1-Equality-21841" href="../Equality/#plfa_plfa-part1-Equality-21841" class="InductiveConstructor">refl′</a> <a id="plfa_plfa-part1-Equality-21847" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21849" href="../Equality/#plfa_plfa-part1-Equality-21814" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-21851" href="../Equality/#plfa_plfa-part1-Equality-21784" class="Datatype Operator">≡′</a> <a id="plfa_plfa-part1-Equality-21854" href="../Equality/#plfa_plfa-part1-Equality-21814" class="Bound">x</a>
</pre>Similarly, here is the generalised definition of symmetry:<pre class="Agda"><a id="plfa_plfa-part1-Equality-sym′"></a><a id="plfa_plfa-part1-Equality-21927" href="../Equality/#plfa_plfa-part1-Equality-21927" class="Function">sym′</a> <a id="plfa_plfa-part1-Equality-21932" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21934" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-21936" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-21937" href="../Equality/#plfa_plfa-part1-Equality-21937" class="Bound">ℓ</a> <a id="plfa_plfa-part1-Equality-21939" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21941" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#591" class="Postulate">Level</a><a id="plfa_plfa-part1-Equality-21946" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-21948" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-21949" href="../Equality/#plfa_plfa-part1-Equality-21949" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-21951" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21953" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-21957" href="../Equality/#plfa_plfa-part1-Equality-21937" class="Bound">ℓ</a><a id="plfa_plfa-part1-Equality-21958" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-21960" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-21961" href="../Equality/#plfa_plfa-part1-Equality-21961" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-21963" href="../Equality/#plfa_plfa-part1-Equality-21963" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-21965" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-21967" href="../Equality/#plfa_plfa-part1-Equality-21949" class="Bound">A</a><a id="plfa_plfa-part1-Equality-21968" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-21972" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-21974" href="../Equality/#plfa_plfa-part1-Equality-21961" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-21976" href="../Equality/#plfa_plfa-part1-Equality-21784" class="Datatype Operator">≡′</a> <a id="plfa_plfa-part1-Equality-21979" href="../Equality/#plfa_plfa-part1-Equality-21963" class="Bound">y</a>
    <a id="plfa_plfa-part1-Equality-21985" class="Comment">------</a>
  <a id="plfa_plfa-part1-Equality-21994" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-21996" href="../Equality/#plfa_plfa-part1-Equality-21963" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-21998" href="../Equality/#plfa_plfa-part1-Equality-21784" class="Datatype Operator">≡′</a> <a id="plfa_plfa-part1-Equality-22001" href="../Equality/#plfa_plfa-part1-Equality-21961" class="Bound">x</a>
<a id="plfa_plfa-part1-Equality-22003" href="../Equality/#plfa_plfa-part1-Equality-21927" class="Function">sym′</a> <a id="plfa_plfa-part1-Equality-22008" href="../Equality/#plfa_plfa-part1-Equality-21841" class="InductiveConstructor">refl′</a> <a id="plfa_plfa-part1-Equality-22014" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-22016" href="../Equality/#plfa_plfa-part1-Equality-21841" class="InductiveConstructor">refl′</a>
</pre><p>For simplicity, we avoid universe polymorphism in the definitions given in the text, but most definitions in the standard library, including those for equality, are generalised to arbitrary levels as above.</p>Here is the generalised definition of Leibniz equality:<pre class="Agda"><a id="plfa_plfa-part1-Equality-_≐′_"></a><a id="plfa_plfa-part1-Equality-22298" href="../Equality/#plfa_plfa-part1-Equality-22298" class="Function Operator">_≐′_</a> <a id="plfa_plfa-part1-Equality-22303" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22305" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-22307" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22308" href="../Equality/#plfa_plfa-part1-Equality-22308" class="Bound">ℓ</a> <a id="plfa_plfa-part1-Equality-22310" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22312" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#591" class="Postulate">Level</a><a id="plfa_plfa-part1-Equality-22317" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22319" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22320" href="../Equality/#plfa_plfa-part1-Equality-22320" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-22322" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22324" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-22328" href="../Equality/#plfa_plfa-part1-Equality-22308" class="Bound">ℓ</a><a id="plfa_plfa-part1-Equality-22329" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22331" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22332" href="../Equality/#plfa_plfa-part1-Equality-22332" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-22334" href="../Equality/#plfa_plfa-part1-Equality-22334" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-22336" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22338" href="../Equality/#plfa_plfa-part1-Equality-22320" class="Bound">A</a><a id="plfa_plfa-part1-Equality-22339" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-22341" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22343" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-22347" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22348" href="../Equality/#plfa_plfa-part1-Equality-21203" class="Primitive">lsuc</a> <a id="plfa_plfa-part1-Equality-22353" href="../Equality/#plfa_plfa-part1-Equality-22308" class="Bound">ℓ</a><a id="plfa_plfa-part1-Equality-22354" class="Symbol">)</a>
<a id="plfa_plfa-part1-Equality-22356" href="../Equality/#plfa_plfa-part1-Equality-22298" class="Function Operator">_≐′_</a> <a id="plfa_plfa-part1-Equality-22361" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22362" href="../Equality/#plfa_plfa-part1-Equality-22362" class="Bound">ℓ</a><a id="plfa_plfa-part1-Equality-22363" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22365" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22366" href="../Equality/#plfa_plfa-part1-Equality-22366" class="Bound">A</a><a id="plfa_plfa-part1-Equality-22367" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22369" href="../Equality/#plfa_plfa-part1-Equality-22369" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-22371" href="../Equality/#plfa_plfa-part1-Equality-22371" class="Bound">y</a> <a id="plfa_plfa-part1-Equality-22373" class="Symbol">=</a> <a id="plfa_plfa-part1-Equality-22375" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-22377" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22378" href="../Equality/#plfa_plfa-part1-Equality-22378" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-22380" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22382" href="../Equality/#plfa_plfa-part1-Equality-22366" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-22384" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22386" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-22390" href="../Equality/#plfa_plfa-part1-Equality-22362" class="Bound">ℓ</a><a id="plfa_plfa-part1-Equality-22391" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-22393" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22395" href="../Equality/#plfa_plfa-part1-Equality-22378" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-22397" href="../Equality/#plfa_plfa-part1-Equality-22369" class="Bound">x</a> <a id="plfa_plfa-part1-Equality-22399" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22401" href="../Equality/#plfa_plfa-part1-Equality-22378" class="Bound">P</a> <a id="plfa_plfa-part1-Equality-22403" href="../Equality/#plfa_plfa-part1-Equality-22371" class="Bound">y</a>
</pre><p>Before the signature used <code>Set₁</code> as the type of a term that includes <code>Set</code>, whereas here the signature uses <code>Set (lsuc ℓ)</code> as the type of a term that includes <code>Set ℓ</code>.</p>Most other functions in the standard library are also generalised to arbitrary levels. For instance, here is the definition of composition.<pre class="Agda"><a id="plfa_plfa-part1-Equality-_∘_"></a><a id="plfa_plfa-part1-Equality-22726" href="../Equality/#plfa_plfa-part1-Equality-22726" class="Function Operator">_∘_</a> <a id="plfa_plfa-part1-Equality-22730" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22732" class="Symbol">∀</a> <a id="plfa_plfa-part1-Equality-22734" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22735" href="../Equality/#plfa_plfa-part1-Equality-22735" class="Bound">ℓ₁</a> <a id="plfa_plfa-part1-Equality-22738" href="../Equality/#plfa_plfa-part1-Equality-22738" class="Bound">ℓ₂</a> <a id="plfa_plfa-part1-Equality-22741" href="../Equality/#plfa_plfa-part1-Equality-22741" class="Bound">ℓ₃</a> <a id="plfa_plfa-part1-Equality-22744" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22746" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#591" class="Postulate">Level</a><a id="plfa_plfa-part1-Equality-22751" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22753" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22754" href="../Equality/#plfa_plfa-part1-Equality-22754" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-22756" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22758" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-22762" href="../Equality/#plfa_plfa-part1-Equality-22735" class="Bound">ℓ₁</a><a id="plfa_plfa-part1-Equality-22764" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22766" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22767" href="../Equality/#plfa_plfa-part1-Equality-22767" class="Bound">B</a> <a id="plfa_plfa-part1-Equality-22769" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22771" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-22775" href="../Equality/#plfa_plfa-part1-Equality-22738" class="Bound">ℓ₂</a><a id="plfa_plfa-part1-Equality-22777" class="Symbol">}</a> <a id="plfa_plfa-part1-Equality-22779" class="Symbol">{</a><a id="plfa_plfa-part1-Equality-22780" href="../Equality/#plfa_plfa-part1-Equality-22780" class="Bound">C</a> <a id="plfa_plfa-part1-Equality-22782" class="Symbol">:</a> <a id="plfa_plfa-part1-Equality-22784" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part1-Equality-22788" href="../Equality/#plfa_plfa-part1-Equality-22741" class="Bound">ℓ₃</a><a id="plfa_plfa-part1-Equality-22790" class="Symbol">}</a>
  <a id="plfa_plfa-part1-Equality-22794" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22796" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22797" href="../Equality/#plfa_plfa-part1-Equality-22767" class="Bound">B</a> <a id="plfa_plfa-part1-Equality-22799" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22801" href="../Equality/#plfa_plfa-part1-Equality-22780" class="Bound">C</a><a id="plfa_plfa-part1-Equality-22802" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-22804" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22806" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22807" href="../Equality/#plfa_plfa-part1-Equality-22754" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-22809" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22811" href="../Equality/#plfa_plfa-part1-Equality-22767" class="Bound">B</a><a id="plfa_plfa-part1-Equality-22812" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-22814" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22816" href="../Equality/#plfa_plfa-part1-Equality-22754" class="Bound">A</a> <a id="plfa_plfa-part1-Equality-22818" class="Symbol">→</a> <a id="plfa_plfa-part1-Equality-22820" href="../Equality/#plfa_plfa-part1-Equality-22780" class="Bound">C</a>
<a id="plfa_plfa-part1-Equality-22822" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22823" href="../Equality/#plfa_plfa-part1-Equality-22823" class="Bound">g</a> <a id="plfa_plfa-part1-Equality-22825" href="../Equality/#plfa_plfa-part1-Equality-22726" class="Function Operator">∘</a> <a id="plfa_plfa-part1-Equality-22827" href="../Equality/#plfa_plfa-part1-Equality-22827" class="Bound">f</a><a id="plfa_plfa-part1-Equality-22828" class="Symbol">)</a> <a id="plfa_plfa-part1-Equality-22830" href="../Equality/#plfa_plfa-part1-Equality-22830" class="Bound">x</a>  <a id="plfa_plfa-part1-Equality-22833" class="Symbol">=</a>  <a id="plfa_plfa-part1-Equality-22836" href="../Equality/#plfa_plfa-part1-Equality-22823" class="Bound">g</a> <a id="plfa_plfa-part1-Equality-22838" class="Symbol">(</a><a id="plfa_plfa-part1-Equality-22839" href="../Equality/#plfa_plfa-part1-Equality-22827" class="Bound">f</a> <a id="plfa_plfa-part1-Equality-22841" href="../Equality/#plfa_plfa-part1-Equality-22830" class="Bound">x</a><a id="plfa_plfa-part1-Equality-22842" class="Symbol">)</a>
</pre><p>Further information on levels can be found in the <a href="https://agda.readthedocs.io/en/v2.6.1/language/universe-levels.html">Agda docs</a>.</p><h2 id="standard-library">Standard library</h2>Definitions similar to those in this chapter can be found in the standard library. The Agda standard library defines <code>_≡⟨_⟩_</code> as <code>step-≡</code>, <a href="https://github.com/agda/agda-stdlib/blob/master/CHANGELOG/v1.3.md#changes-to-how-equational-reasoning-is-implemented">which reverses the order of the arguments</a>. The standard library also defines a syntax macro, which is automatically imported whenever you import <code>step-≡</code>, which recovers the original argument order:<pre class="Agda"><a id="plfa_plfa-part1-Equality-23374" class="Comment">-- import Relation.Binary.PropositionalEquality as Eq</a>
<a id="plfa_plfa-part1-Equality-23428" class="Comment">-- open Eq using (_≡_; refl; trans; sym; cong; cong-app; subst)</a>
<a id="plfa_plfa-part1-Equality-23492" class="Comment">-- open Eq.≡-Reasoning using (begin_; _≡⟨⟩_; step-≡; _∎)</a>
</pre><p>Here the imports are shown as comments rather than code to avoid collisions, as mentioned in the introduction.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>≡  U+2261  IDENTICAL TO (\==, \equiv)
⟨  U+27E8  MATHEMATICAL LEFT ANGLE BRACKET (\&lt;)
⟩  U+27E9  MATHEMATICAL RIGHT ANGLE BRACKET (\&gt;)
∎  U+220E  END OF PROOF (\qed)
≐  U+2250  APPROACHES THE LIMIT (\.=)
ℓ  U+2113  SCRIPT SMALL L (\ell)
⊔  U+2294  SQUARE CUP (\lub)
₀  U+2080  SUBSCRIPT ZERO (\_0)
₁  U+2081  SUBSCRIPT ONE (\_1)
₂  U+2082  SUBSCRIPT TWO (\_2)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Relations/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part1/Equality.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Isomorphism/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>