<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Isomorphism: Isomorphism and Embedding | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Isomorphism: Isomorphism and Embedding" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/20.07/Isomorphism/" />
<meta property="og:url" content="https://plfa.github.io/20.07/Isomorphism/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"url":"https://plfa.github.io/20.07/Isomorphism/","headline":"Isomorphism: Isomorphism and Embedding","description":"Programming Language Foundations in Agda","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/20.07/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/20.07/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/20.07/">The Book</a>
                <a class="page-link" href="/20.07/Announcements/">Announcements</a>
                <a class="page-link" href="/20.07/GettingStarted/">Getting Started</a>
                <a class="page-link" href="/20.07/Citing/">Citing</a>
                <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">Isomorphism: Isomorphism and Embedding</h1>
  </header>

  <p style="text-align:center;">

    <a alt="Previous chapter" href="/20.07/Equality/">Prev</a>


    &bullet;


    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev-20.07/src/plfa/part1/Isomorphism.lagda.md">Source</a>


    &bullet;


    <a alt="Next chapter" href="/20.07/Connectives/">Next</a>

</p>


  <div class="post-content">
    <pre class="Agda"><a id="159" class="Keyword">module</a> <a id="166" href="/20.07/Isomorphism/" class="Module">plfa.part1.Isomorphism</a> <a id="189" class="Keyword">where</a>
</pre>
<p>This section introduces isomorphism as a way of asserting that two
types are equal, and embedding as a way of asserting that one type is
smaller than another.  We apply isomorphisms in the next chapter
to demonstrate that operations on types such as product and sum
satisfy properties akin to associativity, commutativity, and
distributivity.</p>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="560" class="Keyword">import</a> <a id="567" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="605" class="Symbol">as</a> <a id="608" class="Module">Eq</a>
<a id="611" class="Keyword">open</a> <a id="616" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="619" class="Keyword">using</a> <a id="625" class="Symbol">(</a><a id="626" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="629" class="Symbol">;</a> <a id="631" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="635" class="Symbol">;</a> <a id="637" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="641" class="Symbol">;</a> <a id="643" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a><a id="651" class="Symbol">)</a>
<a id="653" class="Keyword">open</a> <a id="658" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2499" class="Module">Eq.≡-Reasoning</a>
<a id="673" class="Keyword">open</a> <a id="678" class="Keyword">import</a> <a id="685" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="694" class="Keyword">using</a> <a id="700" class="Symbol">(</a><a id="701" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="702" class="Symbol">;</a> <a id="704" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a><a id="708" class="Symbol">;</a> <a id="710" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a><a id="713" class="Symbol">;</a> <a id="715" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a><a id="718" class="Symbol">)</a>
<a id="720" class="Keyword">open</a> <a id="725" class="Keyword">import</a> <a id="732" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="752" class="Keyword">using</a> <a id="758" class="Symbol">(</a><a id="759" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#11911" class="Function">+-comm</a><a id="765" class="Symbol">)</a>
</pre>

<h2 id="lambda-expressions">Lambda expressions</h2>

<p>The chapter begins with a few preliminaries that will be useful
here and elsewhere: lambda expressions, function composition, and
extensionality.</p>

<p><em>Lambda expressions</em> provide a compact way to define functions without
naming them.  A term of the form</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>λ{ P₁ → N₁; ⋯ ; Pₙ → Nₙ }
</code></pre></div></div>

<p>is equivalent to a function <code class="language-plaintext highlighter-rouge">f</code> defined by the equations</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f P₁ = N₁
⋯
f Pₙ = Nₙ
</code></pre></div></div>

<p>where the <code class="language-plaintext highlighter-rouge">Pₙ</code> are patterns (left-hand sides of an equation) and the
<code class="language-plaintext highlighter-rouge">Nₙ</code> are expressions (right-hand side of an equation).</p>

<p>In the case that there is one equation and the pattern is a variable,
we may also use the syntax</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>λ x → N
</code></pre></div></div>

<p>or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>λ (x : A) → N
</code></pre></div></div>

<p>both of which are equivalent to <code class="language-plaintext highlighter-rouge">λ{x → N}</code>. The latter allows one to
specify the domain of the function.</p>

<p>Often using an anonymous lambda expression is more convenient than
using a named function: it avoids a lengthy type declaration; and the
definition appears exactly where the function is used, so there is no
need for the writer to remember to declare it in advance, or for the
reader to search for the definition in the code.</p>

<h2 id="function-composition">Function composition</h2>

<p>In what follows, we will make use of function composition:</p>
<pre class="Agda"><a id="_∘_"></a><a id="1952" href="/20.07/Isomorphism/#1952" class="Function Operator">_∘_</a> <a id="1956" class="Symbol">:</a> <a id="1958" class="Symbol">∀</a> <a id="1960" class="Symbol">{</a><a id="1961" href="/20.07/Isomorphism/#1961" class="Bound">A</a> <a id="1963" href="/20.07/Isomorphism/#1963" class="Bound">B</a> <a id="1965" href="/20.07/Isomorphism/#1965" class="Bound">C</a> <a id="1967" class="Symbol">:</a> <a id="1969" class="PrimitiveType">Set</a><a id="1972" class="Symbol">}</a> <a id="1974" class="Symbol">→</a> <a id="1976" class="Symbol">(</a><a id="1977" href="/20.07/Isomorphism/#1963" class="Bound">B</a> <a id="1979" class="Symbol">→</a> <a id="1981" href="/20.07/Isomorphism/#1965" class="Bound">C</a><a id="1982" class="Symbol">)</a> <a id="1984" class="Symbol">→</a> <a id="1986" class="Symbol">(</a><a id="1987" href="/20.07/Isomorphism/#1961" class="Bound">A</a> <a id="1989" class="Symbol">→</a> <a id="1991" href="/20.07/Isomorphism/#1963" class="Bound">B</a><a id="1992" class="Symbol">)</a> <a id="1994" class="Symbol">→</a> <a id="1996" class="Symbol">(</a><a id="1997" href="/20.07/Isomorphism/#1961" class="Bound">A</a> <a id="1999" class="Symbol">→</a> <a id="2001" href="/20.07/Isomorphism/#1965" class="Bound">C</a><a id="2002" class="Symbol">)</a>
<a id="2004" class="Symbol">(</a><a id="2005" href="/20.07/Isomorphism/#2005" class="Bound">g</a> <a id="2007" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="2009" href="/20.07/Isomorphism/#2009" class="Bound">f</a><a id="2010" class="Symbol">)</a> <a id="2012" href="/20.07/Isomorphism/#2012" class="Bound">x</a>  <a id="2015" class="Symbol">=</a> <a id="2017" href="/20.07/Isomorphism/#2005" class="Bound">g</a> <a id="2019" class="Symbol">(</a><a id="2020" href="/20.07/Isomorphism/#2009" class="Bound">f</a> <a id="2022" href="/20.07/Isomorphism/#2012" class="Bound">x</a><a id="2023" class="Symbol">)</a>
</pre>
<p>Thus, <code class="language-plaintext highlighter-rouge">g ∘ f</code> is the function that first applies <code class="language-plaintext highlighter-rouge">f</code> and
then applies <code class="language-plaintext highlighter-rouge">g</code>.  An equivalent definition, exploiting lambda
expressions, is as follows:</p>
<pre class="Agda"><a id="_∘′_"></a><a id="2181" href="/20.07/Isomorphism/#2181" class="Function Operator">_∘′_</a> <a id="2186" class="Symbol">:</a> <a id="2188" class="Symbol">∀</a> <a id="2190" class="Symbol">{</a><a id="2191" href="/20.07/Isomorphism/#2191" class="Bound">A</a> <a id="2193" href="/20.07/Isomorphism/#2193" class="Bound">B</a> <a id="2195" href="/20.07/Isomorphism/#2195" class="Bound">C</a> <a id="2197" class="Symbol">:</a> <a id="2199" class="PrimitiveType">Set</a><a id="2202" class="Symbol">}</a> <a id="2204" class="Symbol">→</a> <a id="2206" class="Symbol">(</a><a id="2207" href="/20.07/Isomorphism/#2193" class="Bound">B</a> <a id="2209" class="Symbol">→</a> <a id="2211" href="/20.07/Isomorphism/#2195" class="Bound">C</a><a id="2212" class="Symbol">)</a> <a id="2214" class="Symbol">→</a> <a id="2216" class="Symbol">(</a><a id="2217" href="/20.07/Isomorphism/#2191" class="Bound">A</a> <a id="2219" class="Symbol">→</a> <a id="2221" href="/20.07/Isomorphism/#2193" class="Bound">B</a><a id="2222" class="Symbol">)</a> <a id="2224" class="Symbol">→</a> <a id="2226" class="Symbol">(</a><a id="2227" href="/20.07/Isomorphism/#2191" class="Bound">A</a> <a id="2229" class="Symbol">→</a> <a id="2231" href="/20.07/Isomorphism/#2195" class="Bound">C</a><a id="2232" class="Symbol">)</a>
<a id="2234" href="/20.07/Isomorphism/#2234" class="Bound">g</a> <a id="2236" href="/20.07/Isomorphism/#2181" class="Function Operator">∘′</a> <a id="2239" href="/20.07/Isomorphism/#2239" class="Bound">f</a>  <a id="2242" class="Symbol">=</a>  <a id="2245" class="Symbol">λ</a> <a id="2247" href="/20.07/Isomorphism/#2247" class="Bound">x</a> <a id="2249" class="Symbol">→</a> <a id="2251" href="/20.07/Isomorphism/#2234" class="Bound">g</a> <a id="2253" class="Symbol">(</a><a id="2254" href="/20.07/Isomorphism/#2239" class="Bound">f</a> <a id="2256" href="/20.07/Isomorphism/#2247" class="Bound">x</a><a id="2257" class="Symbol">)</a>
</pre>

<h2 id="extensionality">Extensionality</h2>

<p>Extensionality asserts that the only way to distinguish functions is
by applying them; if two functions applied to the same argument always
yield the same result, then they are the same function.  It is the
converse of <code class="language-plaintext highlighter-rouge">cong-app</code>, as introduced
<a href="/20.07/Equality/#cong">earlier</a>.</p>

<p>Agda does not presume extensionality, but we can postulate that it holds:</p>
<pre class="Agda"><a id="2672" class="Keyword">postulate</a>
  <a id="extensionality"></a><a id="2684" href="/20.07/Isomorphism/#2684" class="Postulate">extensionality</a> <a id="2699" class="Symbol">:</a> <a id="2701" class="Symbol">∀</a> <a id="2703" class="Symbol">{</a><a id="2704" href="/20.07/Isomorphism/#2704" class="Bound">A</a> <a id="2706" href="/20.07/Isomorphism/#2706" class="Bound">B</a> <a id="2708" class="Symbol">:</a> <a id="2710" class="PrimitiveType">Set</a><a id="2713" class="Symbol">}</a> <a id="2715" class="Symbol">{</a><a id="2716" href="/20.07/Isomorphism/#2716" class="Bound">f</a> <a id="2718" href="/20.07/Isomorphism/#2718" class="Bound">g</a> <a id="2720" class="Symbol">:</a> <a id="2722" href="/20.07/Isomorphism/#2704" class="Bound">A</a> <a id="2724" class="Symbol">→</a> <a id="2726" href="/20.07/Isomorphism/#2706" class="Bound">B</a><a id="2727" class="Symbol">}</a>
    <a id="2733" class="Symbol">→</a> <a id="2735" class="Symbol">(∀</a> <a id="2738" class="Symbol">(</a><a id="2739" href="/20.07/Isomorphism/#2739" class="Bound">x</a> <a id="2741" class="Symbol">:</a> <a id="2743" href="/20.07/Isomorphism/#2704" class="Bound">A</a><a id="2744" class="Symbol">)</a> <a id="2746" class="Symbol">→</a> <a id="2748" href="/20.07/Isomorphism/#2716" class="Bound">f</a> <a id="2750" href="/20.07/Isomorphism/#2739" class="Bound">x</a> <a id="2752" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2754" href="/20.07/Isomorphism/#2718" class="Bound">g</a> <a id="2756" href="/20.07/Isomorphism/#2739" class="Bound">x</a><a id="2757" class="Symbol">)</a>
      <a id="2765" class="Comment">-----------------------</a>
    <a id="2793" class="Symbol">→</a> <a id="2795" href="/20.07/Isomorphism/#2716" class="Bound">f</a> <a id="2797" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2799" href="/20.07/Isomorphism/#2718" class="Bound">g</a>
</pre>
<p>Postulating extensionality does not lead to difficulties, as it is
known to be consistent with the theory that underlies Agda.</p>

<p>As an example, consider that we need results from two libraries,
one where addition is defined, as in
Chapter <a href="/20.07/Naturals/">Naturals</a>,
and one where it is defined the other way around.</p>
<pre class="Agda"><a id="_+′_"></a><a id="3139" href="/20.07/Isomorphism/#3139" class="Function Operator">_+′_</a> <a id="3144" class="Symbol">:</a> <a id="3146" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="3148" class="Symbol">→</a> <a id="3150" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="3152" class="Symbol">→</a> <a id="3154" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
<a id="3156" href="/20.07/Isomorphism/#3156" class="Bound">m</a> <a id="3158" href="/20.07/Isomorphism/#3139" class="Function Operator">+′</a> <a id="3161" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a>  <a id="3167" class="Symbol">=</a> <a id="3169" href="/20.07/Isomorphism/#3156" class="Bound">m</a>
<a id="3171" href="/20.07/Isomorphism/#3171" class="Bound">m</a> <a id="3173" href="/20.07/Isomorphism/#3139" class="Function Operator">+′</a> <a id="3176" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="3180" href="/20.07/Isomorphism/#3180" class="Bound">n</a> <a id="3182" class="Symbol">=</a> <a id="3184" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="3188" class="Symbol">(</a><a id="3189" href="/20.07/Isomorphism/#3171" class="Bound">m</a> <a id="3191" href="/20.07/Isomorphism/#3139" class="Function Operator">+′</a> <a id="3194" href="/20.07/Isomorphism/#3180" class="Bound">n</a><a id="3195" class="Symbol">)</a>
</pre>
<p>Applying commutativity, it is easy to show that both operators always
return the same result given the same arguments:</p>
<pre class="Agda"><a id="same-app"></a><a id="3324" href="/20.07/Isomorphism/#3324" class="Function">same-app</a> <a id="3333" class="Symbol">:</a> <a id="3335" class="Symbol">∀</a> <a id="3337" class="Symbol">(</a><a id="3338" href="/20.07/Isomorphism/#3338" class="Bound">m</a> <a id="3340" href="/20.07/Isomorphism/#3340" class="Bound">n</a> <a id="3342" class="Symbol">:</a> <a id="3344" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="3345" class="Symbol">)</a> <a id="3347" class="Symbol">→</a> <a id="3349" href="/20.07/Isomorphism/#3338" class="Bound">m</a> <a id="3351" href="/20.07/Isomorphism/#3139" class="Function Operator">+′</a> <a id="3354" href="/20.07/Isomorphism/#3340" class="Bound">n</a> <a id="3356" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3358" href="/20.07/Isomorphism/#3338" class="Bound">m</a> <a id="3360" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">+</a> <a id="3362" href="/20.07/Isomorphism/#3340" class="Bound">n</a>
<a id="3364" href="/20.07/Isomorphism/#3324" class="Function">same-app</a> <a id="3373" href="/20.07/Isomorphism/#3373" class="Bound">m</a> <a id="3375" href="/20.07/Isomorphism/#3375" class="Bound">n</a> <a id="3377" class="Keyword">rewrite</a> <a id="3385" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#11911" class="Function">+-comm</a> <a id="3392" href="/20.07/Isomorphism/#3373" class="Bound">m</a> <a id="3394" href="/20.07/Isomorphism/#3375" class="Bound">n</a> <a id="3396" class="Symbol">=</a> <a id="3398" href="/20.07/Isomorphism/#3419" class="Function">helper</a> <a id="3405" href="/20.07/Isomorphism/#3373" class="Bound">m</a> <a id="3407" href="/20.07/Isomorphism/#3375" class="Bound">n</a>
  <a id="3411" class="Keyword">where</a>
  <a id="3419" href="/20.07/Isomorphism/#3419" class="Function">helper</a> <a id="3426" class="Symbol">:</a> <a id="3428" class="Symbol">∀</a> <a id="3430" class="Symbol">(</a><a id="3431" href="/20.07/Isomorphism/#3431" class="Bound">m</a> <a id="3433" href="/20.07/Isomorphism/#3433" class="Bound">n</a> <a id="3435" class="Symbol">:</a> <a id="3437" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="3438" class="Symbol">)</a> <a id="3440" class="Symbol">→</a> <a id="3442" href="/20.07/Isomorphism/#3431" class="Bound">m</a> <a id="3444" href="/20.07/Isomorphism/#3139" class="Function Operator">+′</a> <a id="3447" href="/20.07/Isomorphism/#3433" class="Bound">n</a> <a id="3449" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3451" href="/20.07/Isomorphism/#3433" class="Bound">n</a> <a id="3453" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">+</a> <a id="3455" href="/20.07/Isomorphism/#3431" class="Bound">m</a>
  <a id="3459" href="/20.07/Isomorphism/#3419" class="Function">helper</a> <a id="3466" href="/20.07/Isomorphism/#3466" class="Bound">m</a> <a id="3468" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a>    <a id="3476" class="Symbol">=</a> <a id="3478" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="3485" href="/20.07/Isomorphism/#3419" class="Function">helper</a> <a id="3492" href="/20.07/Isomorphism/#3492" class="Bound">m</a> <a id="3494" class="Symbol">(</a><a id="3495" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="3499" href="/20.07/Isomorphism/#3499" class="Bound">n</a><a id="3500" class="Symbol">)</a> <a id="3502" class="Symbol">=</a> <a id="3504" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="3509" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="3513" class="Symbol">(</a><a id="3514" href="/20.07/Isomorphism/#3419" class="Function">helper</a> <a id="3521" href="/20.07/Isomorphism/#3492" class="Bound">m</a> <a id="3523" href="/20.07/Isomorphism/#3499" class="Bound">n</a><a id="3524" class="Symbol">)</a>
</pre>
<p>However, it might be convenient to assert that the two operators are
actually indistinguishable. This we can do via two applications of
extensionality:</p>
<pre class="Agda"><a id="same"></a><a id="3686" href="/20.07/Isomorphism/#3686" class="Function">same</a> <a id="3691" class="Symbol">:</a> <a id="3693" href="/20.07/Isomorphism/#3139" class="Function Operator">_+′_</a> <a id="3698" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3700" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a>
<a id="3704" href="/20.07/Isomorphism/#3686" class="Function">same</a> <a id="3709" class="Symbol">=</a> <a id="3711" href="/20.07/Isomorphism/#2684" class="Postulate">extensionality</a> <a id="3726" class="Symbol">(λ</a> <a id="3729" href="/20.07/Isomorphism/#3729" class="Bound">m</a> <a id="3731" class="Symbol">→</a> <a id="3733" href="/20.07/Isomorphism/#2684" class="Postulate">extensionality</a> <a id="3748" class="Symbol">(λ</a> <a id="3751" href="/20.07/Isomorphism/#3751" class="Bound">n</a> <a id="3753" class="Symbol">→</a> <a id="3755" href="/20.07/Isomorphism/#3324" class="Function">same-app</a> <a id="3764" href="/20.07/Isomorphism/#3729" class="Bound">m</a> <a id="3766" href="/20.07/Isomorphism/#3751" class="Bound">n</a><a id="3767" class="Symbol">))</a>
</pre>
<p>We occasionally need to postulate extensionality in what follows.</p>

<p>More generally, we may wish to postulate extensionality for
dependent functions.</p>
<pre class="Agda"><a id="3926" class="Keyword">postulate</a>
  <a id="∀-extensionality"></a><a id="3938" href="/20.07/Isomorphism/#3938" class="Postulate">∀-extensionality</a> <a id="3955" class="Symbol">:</a> <a id="3957" class="Symbol">∀</a> <a id="3959" class="Symbol">{</a><a id="3960" href="/20.07/Isomorphism/#3960" class="Bound">A</a> <a id="3962" class="Symbol">:</a> <a id="3964" class="PrimitiveType">Set</a><a id="3967" class="Symbol">}</a> <a id="3969" class="Symbol">{</a><a id="3970" href="/20.07/Isomorphism/#3970" class="Bound">B</a> <a id="3972" class="Symbol">:</a> <a id="3974" href="/20.07/Isomorphism/#3960" class="Bound">A</a> <a id="3976" class="Symbol">→</a> <a id="3978" class="PrimitiveType">Set</a><a id="3981" class="Symbol">}</a> <a id="3983" class="Symbol">{</a><a id="3984" href="/20.07/Isomorphism/#3984" class="Bound">f</a> <a id="3986" href="/20.07/Isomorphism/#3986" class="Bound">g</a> <a id="3988" class="Symbol">:</a> <a id="3990" class="Symbol">∀(</a><a id="3992" href="/20.07/Isomorphism/#3992" class="Bound">x</a> <a id="3994" class="Symbol">:</a> <a id="3996" href="/20.07/Isomorphism/#3960" class="Bound">A</a><a id="3997" class="Symbol">)</a> <a id="3999" class="Symbol">→</a> <a id="4001" href="/20.07/Isomorphism/#3970" class="Bound">B</a> <a id="4003" href="/20.07/Isomorphism/#3992" class="Bound">x</a><a id="4004" class="Symbol">}</a>
    <a id="4010" class="Symbol">→</a> <a id="4012" class="Symbol">(∀</a> <a id="4015" class="Symbol">(</a><a id="4016" href="/20.07/Isomorphism/#4016" class="Bound">x</a> <a id="4018" class="Symbol">:</a> <a id="4020" href="/20.07/Isomorphism/#3960" class="Bound">A</a><a id="4021" class="Symbol">)</a> <a id="4023" class="Symbol">→</a> <a id="4025" href="/20.07/Isomorphism/#3984" class="Bound">f</a> <a id="4027" href="/20.07/Isomorphism/#4016" class="Bound">x</a> <a id="4029" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4031" href="/20.07/Isomorphism/#3986" class="Bound">g</a> <a id="4033" href="/20.07/Isomorphism/#4016" class="Bound">x</a><a id="4034" class="Symbol">)</a>
      <a id="4042" class="Comment">-----------------------</a>
    <a id="4070" class="Symbol">→</a> <a id="4072" href="/20.07/Isomorphism/#3984" class="Bound">f</a> <a id="4074" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4076" href="/20.07/Isomorphism/#3986" class="Bound">g</a>
</pre>
<p>Here the type of <code class="language-plaintext highlighter-rouge">f</code> and <code class="language-plaintext highlighter-rouge">g</code> has changed from <code class="language-plaintext highlighter-rouge">A → B</code> to
<code class="language-plaintext highlighter-rouge">∀ (x : A) → B x</code>, generalising ordinary functions to
dependent functions.</p>

<h2 id="isomorphism">Isomorphism</h2>

<p>Two sets are isomorphic if they are in one-to-one correspondence.
Here is a formal definition of isomorphism:</p>
<pre class="Agda"><a id="4346" class="Keyword">infix</a> <a id="4352" class="Number">0</a> <a id="4354" href="/20.07/Isomorphism/#4365" class="Record Operator">_≃_</a>
<a id="4358" class="Keyword">record</a> <a id="_≃_"></a><a id="4365" href="/20.07/Isomorphism/#4365" class="Record Operator">_≃_</a> <a id="4369" class="Symbol">(</a><a id="4370" href="/20.07/Isomorphism/#4370" class="Bound">A</a> <a id="4372" href="/20.07/Isomorphism/#4372" class="Bound">B</a> <a id="4374" class="Symbol">:</a> <a id="4376" class="PrimitiveType">Set</a><a id="4379" class="Symbol">)</a> <a id="4381" class="Symbol">:</a> <a id="4383" class="PrimitiveType">Set</a> <a id="4387" class="Keyword">where</a>
  <a id="4395" class="Keyword">field</a>
    <a id="_≃_.to"></a><a id="4405" href="/20.07/Isomorphism/#4405" class="Field">to</a>   <a id="4410" class="Symbol">:</a> <a id="4412" href="/20.07/Isomorphism/#4370" class="Bound">A</a> <a id="4414" class="Symbol">→</a> <a id="4416" href="/20.07/Isomorphism/#4372" class="Bound">B</a>
    <a id="_≃_.from"></a><a id="4422" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="4427" class="Symbol">:</a> <a id="4429" href="/20.07/Isomorphism/#4372" class="Bound">B</a> <a id="4431" class="Symbol">→</a> <a id="4433" href="/20.07/Isomorphism/#4370" class="Bound">A</a>
    <a id="_≃_.from∘to"></a><a id="4439" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="4447" class="Symbol">:</a> <a id="4449" class="Symbol">∀</a> <a id="4451" class="Symbol">(</a><a id="4452" href="/20.07/Isomorphism/#4452" class="Bound">x</a> <a id="4454" class="Symbol">:</a> <a id="4456" href="/20.07/Isomorphism/#4370" class="Bound">A</a><a id="4457" class="Symbol">)</a> <a id="4459" class="Symbol">→</a> <a id="4461" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="4466" class="Symbol">(</a><a id="4467" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="4470" href="/20.07/Isomorphism/#4452" class="Bound">x</a><a id="4471" class="Symbol">)</a> <a id="4473" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4475" href="/20.07/Isomorphism/#4452" class="Bound">x</a>
    <a id="_≃_.to∘from"></a><a id="4481" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="4489" class="Symbol">:</a> <a id="4491" class="Symbol">∀</a> <a id="4493" class="Symbol">(</a><a id="4494" href="/20.07/Isomorphism/#4494" class="Bound">y</a> <a id="4496" class="Symbol">:</a> <a id="4498" href="/20.07/Isomorphism/#4372" class="Bound">B</a><a id="4499" class="Symbol">)</a> <a id="4501" class="Symbol">→</a> <a id="4503" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="4506" class="Symbol">(</a><a id="4507" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="4512" href="/20.07/Isomorphism/#4494" class="Bound">y</a><a id="4513" class="Symbol">)</a> <a id="4515" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4517" href="/20.07/Isomorphism/#4494" class="Bound">y</a>
<a id="4519" class="Keyword">open</a> <a id="4524" href="/20.07/Isomorphism/#4365" class="Module Operator">_≃_</a>
</pre>
<p>Let’s unpack the definition. An isomorphism between sets <code class="language-plaintext highlighter-rouge">A</code> and <code class="language-plaintext highlighter-rouge">B</code> consists
of four things:</p>
<ul>
  <li>A function <code class="language-plaintext highlighter-rouge">to</code> from <code class="language-plaintext highlighter-rouge">A</code> to <code class="language-plaintext highlighter-rouge">B</code>,</li>
  <li>A function <code class="language-plaintext highlighter-rouge">from</code> from <code class="language-plaintext highlighter-rouge">B</code> back to <code class="language-plaintext highlighter-rouge">A</code>,</li>
  <li>Evidence <code class="language-plaintext highlighter-rouge">from∘to</code> asserting that <code class="language-plaintext highlighter-rouge">from</code> is a <em>left-inverse</em> for <code class="language-plaintext highlighter-rouge">to</code>,</li>
  <li>Evidence <code class="language-plaintext highlighter-rouge">to∘from</code> asserting that <code class="language-plaintext highlighter-rouge">from</code> is a <em>right-inverse</em> for <code class="language-plaintext highlighter-rouge">to</code>.</li>
</ul>

<p>In particular, the third asserts that <code class="language-plaintext highlighter-rouge">from ∘ to</code> is the identity, and
the fourth that <code class="language-plaintext highlighter-rouge">to ∘ from</code> is the identity, hence the names.
The declaration <code class="language-plaintext highlighter-rouge">open _≃_</code> makes available the names <code class="language-plaintext highlighter-rouge">to</code>, <code class="language-plaintext highlighter-rouge">from</code>,
<code class="language-plaintext highlighter-rouge">from∘to</code>, and <code class="language-plaintext highlighter-rouge">to∘from</code>, otherwise we would need to write <code class="language-plaintext highlighter-rouge">_≃_.to</code> and so on.</p>

<p>The above is our first use of records. A record declaration behaves similar to a single-constructor data declaration (there are minor differences, which we discuss in <a href="/20.07/Connectives/">Connectives</a>):</p>
<pre class="Agda"><a id="5351" class="Keyword">data</a> <a id="_≃′_"></a><a id="5356" href="/20.07/Isomorphism/#5356" class="Datatype Operator">_≃′_</a> <a id="5361" class="Symbol">(</a><a id="5362" href="/20.07/Isomorphism/#5362" class="Bound">A</a> <a id="5364" href="/20.07/Isomorphism/#5364" class="Bound">B</a> <a id="5366" class="Symbol">:</a> <a id="5368" class="PrimitiveType">Set</a><a id="5371" class="Symbol">):</a> <a id="5374" class="PrimitiveType">Set</a> <a id="5378" class="Keyword">where</a>
  <a id="_≃′_.mk-≃′"></a><a id="5386" href="/20.07/Isomorphism/#5386" class="InductiveConstructor">mk-≃′</a> <a id="5392" class="Symbol">:</a> <a id="5394" class="Symbol">∀</a> <a id="5396" class="Symbol">(</a><a id="5397" href="/20.07/Isomorphism/#5397" class="Bound">to</a> <a id="5400" class="Symbol">:</a> <a id="5402" href="/20.07/Isomorphism/#5362" class="Bound">A</a> <a id="5404" class="Symbol">→</a> <a id="5406" href="/20.07/Isomorphism/#5364" class="Bound">B</a><a id="5407" class="Symbol">)</a> <a id="5409" class="Symbol">→</a>
          <a id="5421" class="Symbol">∀</a> <a id="5423" class="Symbol">(</a><a id="5424" href="/20.07/Isomorphism/#5424" class="Bound">from</a> <a id="5429" class="Symbol">:</a> <a id="5431" href="/20.07/Isomorphism/#5364" class="Bound">B</a> <a id="5433" class="Symbol">→</a> <a id="5435" href="/20.07/Isomorphism/#5362" class="Bound">A</a><a id="5436" class="Symbol">)</a> <a id="5438" class="Symbol">→</a>
          <a id="5450" class="Symbol">∀</a> <a id="5452" class="Symbol">(</a><a id="5453" href="/20.07/Isomorphism/#5453" class="Bound">from∘to</a> <a id="5461" class="Symbol">:</a> <a id="5463" class="Symbol">(∀</a> <a id="5466" class="Symbol">(</a><a id="5467" href="/20.07/Isomorphism/#5467" class="Bound">x</a> <a id="5469" class="Symbol">:</a> <a id="5471" href="/20.07/Isomorphism/#5362" class="Bound">A</a><a id="5472" class="Symbol">)</a> <a id="5474" class="Symbol">→</a> <a id="5476" href="/20.07/Isomorphism/#5424" class="Bound">from</a> <a id="5481" class="Symbol">(</a><a id="5482" href="/20.07/Isomorphism/#5397" class="Bound">to</a> <a id="5485" href="/20.07/Isomorphism/#5467" class="Bound">x</a><a id="5486" class="Symbol">)</a> <a id="5488" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="5490" href="/20.07/Isomorphism/#5467" class="Bound">x</a><a id="5491" class="Symbol">))</a> <a id="5494" class="Symbol">→</a>
          <a id="5506" class="Symbol">∀</a> <a id="5508" class="Symbol">(</a><a id="5509" href="/20.07/Isomorphism/#5509" class="Bound">to∘from</a> <a id="5517" class="Symbol">:</a> <a id="5519" class="Symbol">(∀</a> <a id="5522" class="Symbol">(</a><a id="5523" href="/20.07/Isomorphism/#5523" class="Bound">y</a> <a id="5525" class="Symbol">:</a> <a id="5527" href="/20.07/Isomorphism/#5364" class="Bound">B</a><a id="5528" class="Symbol">)</a> <a id="5530" class="Symbol">→</a> <a id="5532" href="/20.07/Isomorphism/#5397" class="Bound">to</a> <a id="5535" class="Symbol">(</a><a id="5536" href="/20.07/Isomorphism/#5424" class="Bound">from</a> <a id="5541" href="/20.07/Isomorphism/#5523" class="Bound">y</a><a id="5542" class="Symbol">)</a> <a id="5544" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="5546" href="/20.07/Isomorphism/#5523" class="Bound">y</a><a id="5547" class="Symbol">))</a> <a id="5550" class="Symbol">→</a>
          <a id="5562" href="/20.07/Isomorphism/#5362" class="Bound">A</a> <a id="5564" href="/20.07/Isomorphism/#5356" class="Datatype Operator">≃′</a> <a id="5567" href="/20.07/Isomorphism/#5364" class="Bound">B</a>

<a id="to′"></a><a id="5570" href="/20.07/Isomorphism/#5570" class="Function">to′</a> <a id="5574" class="Symbol">:</a> <a id="5576" class="Symbol">∀</a> <a id="5578" class="Symbol">{</a><a id="5579" href="/20.07/Isomorphism/#5579" class="Bound">A</a> <a id="5581" href="/20.07/Isomorphism/#5581" class="Bound">B</a> <a id="5583" class="Symbol">:</a> <a id="5585" class="PrimitiveType">Set</a><a id="5588" class="Symbol">}</a> <a id="5590" class="Symbol">→</a> <a id="5592" class="Symbol">(</a><a id="5593" href="/20.07/Isomorphism/#5579" class="Bound">A</a> <a id="5595" href="/20.07/Isomorphism/#5356" class="Datatype Operator">≃′</a> <a id="5598" href="/20.07/Isomorphism/#5581" class="Bound">B</a><a id="5599" class="Symbol">)</a> <a id="5601" class="Symbol">→</a> <a id="5603" class="Symbol">(</a><a id="5604" href="/20.07/Isomorphism/#5579" class="Bound">A</a> <a id="5606" class="Symbol">→</a> <a id="5608" href="/20.07/Isomorphism/#5581" class="Bound">B</a><a id="5609" class="Symbol">)</a>
<a id="5611" href="/20.07/Isomorphism/#5570" class="Function">to′</a> <a id="5615" class="Symbol">(</a><a id="5616" href="/20.07/Isomorphism/#5386" class="InductiveConstructor">mk-≃′</a> <a id="5622" href="/20.07/Isomorphism/#5622" class="Bound">f</a> <a id="5624" href="/20.07/Isomorphism/#5624" class="Bound">g</a> <a id="5626" href="/20.07/Isomorphism/#5626" class="Bound">g∘f</a> <a id="5630" href="/20.07/Isomorphism/#5630" class="Bound">f∘g</a><a id="5633" class="Symbol">)</a> <a id="5635" class="Symbol">=</a> <a id="5637" href="/20.07/Isomorphism/#5622" class="Bound">f</a>

<a id="from′"></a><a id="5640" href="/20.07/Isomorphism/#5640" class="Function">from′</a> <a id="5646" class="Symbol">:</a> <a id="5648" class="Symbol">∀</a> <a id="5650" class="Symbol">{</a><a id="5651" href="/20.07/Isomorphism/#5651" class="Bound">A</a> <a id="5653" href="/20.07/Isomorphism/#5653" class="Bound">B</a> <a id="5655" class="Symbol">:</a> <a id="5657" class="PrimitiveType">Set</a><a id="5660" class="Symbol">}</a> <a id="5662" class="Symbol">→</a> <a id="5664" class="Symbol">(</a><a id="5665" href="/20.07/Isomorphism/#5651" class="Bound">A</a> <a id="5667" href="/20.07/Isomorphism/#5356" class="Datatype Operator">≃′</a> <a id="5670" href="/20.07/Isomorphism/#5653" class="Bound">B</a><a id="5671" class="Symbol">)</a> <a id="5673" class="Symbol">→</a> <a id="5675" class="Symbol">(</a><a id="5676" href="/20.07/Isomorphism/#5653" class="Bound">B</a> <a id="5678" class="Symbol">→</a> <a id="5680" href="/20.07/Isomorphism/#5651" class="Bound">A</a><a id="5681" class="Symbol">)</a>
<a id="5683" href="/20.07/Isomorphism/#5640" class="Function">from′</a> <a id="5689" class="Symbol">(</a><a id="5690" href="/20.07/Isomorphism/#5386" class="InductiveConstructor">mk-≃′</a> <a id="5696" href="/20.07/Isomorphism/#5696" class="Bound">f</a> <a id="5698" href="/20.07/Isomorphism/#5698" class="Bound">g</a> <a id="5700" href="/20.07/Isomorphism/#5700" class="Bound">g∘f</a> <a id="5704" href="/20.07/Isomorphism/#5704" class="Bound">f∘g</a><a id="5707" class="Symbol">)</a> <a id="5709" class="Symbol">=</a> <a id="5711" href="/20.07/Isomorphism/#5698" class="Bound">g</a>

<a id="from∘to′"></a><a id="5714" href="/20.07/Isomorphism/#5714" class="Function">from∘to′</a> <a id="5723" class="Symbol">:</a> <a id="5725" class="Symbol">∀</a> <a id="5727" class="Symbol">{</a><a id="5728" href="/20.07/Isomorphism/#5728" class="Bound">A</a> <a id="5730" href="/20.07/Isomorphism/#5730" class="Bound">B</a> <a id="5732" class="Symbol">:</a> <a id="5734" class="PrimitiveType">Set</a><a id="5737" class="Symbol">}</a> <a id="5739" class="Symbol">→</a> <a id="5741" class="Symbol">(</a><a id="5742" href="/20.07/Isomorphism/#5742" class="Bound">A≃B</a> <a id="5746" class="Symbol">:</a> <a id="5748" href="/20.07/Isomorphism/#5728" class="Bound">A</a> <a id="5750" href="/20.07/Isomorphism/#5356" class="Datatype Operator">≃′</a> <a id="5753" href="/20.07/Isomorphism/#5730" class="Bound">B</a><a id="5754" class="Symbol">)</a> <a id="5756" class="Symbol">→</a> <a id="5758" class="Symbol">(∀</a> <a id="5761" class="Symbol">(</a><a id="5762" href="/20.07/Isomorphism/#5762" class="Bound">x</a> <a id="5764" class="Symbol">:</a> <a id="5766" href="/20.07/Isomorphism/#5728" class="Bound">A</a><a id="5767" class="Symbol">)</a> <a id="5769" class="Symbol">→</a> <a id="5771" href="/20.07/Isomorphism/#5640" class="Function">from′</a> <a id="5777" href="/20.07/Isomorphism/#5742" class="Bound">A≃B</a> <a id="5781" class="Symbol">(</a><a id="5782" href="/20.07/Isomorphism/#5570" class="Function">to′</a> <a id="5786" href="/20.07/Isomorphism/#5742" class="Bound">A≃B</a> <a id="5790" href="/20.07/Isomorphism/#5762" class="Bound">x</a><a id="5791" class="Symbol">)</a> <a id="5793" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="5795" href="/20.07/Isomorphism/#5762" class="Bound">x</a><a id="5796" class="Symbol">)</a>
<a id="5798" href="/20.07/Isomorphism/#5714" class="Function">from∘to′</a> <a id="5807" class="Symbol">(</a><a id="5808" href="/20.07/Isomorphism/#5386" class="InductiveConstructor">mk-≃′</a> <a id="5814" href="/20.07/Isomorphism/#5814" class="Bound">f</a> <a id="5816" href="/20.07/Isomorphism/#5816" class="Bound">g</a> <a id="5818" href="/20.07/Isomorphism/#5818" class="Bound">g∘f</a> <a id="5822" href="/20.07/Isomorphism/#5822" class="Bound">f∘g</a><a id="5825" class="Symbol">)</a> <a id="5827" class="Symbol">=</a> <a id="5829" href="/20.07/Isomorphism/#5818" class="Bound">g∘f</a>

<a id="to∘from′"></a><a id="5834" href="/20.07/Isomorphism/#5834" class="Function">to∘from′</a> <a id="5843" class="Symbol">:</a> <a id="5845" class="Symbol">∀</a> <a id="5847" class="Symbol">{</a><a id="5848" href="/20.07/Isomorphism/#5848" class="Bound">A</a> <a id="5850" href="/20.07/Isomorphism/#5850" class="Bound">B</a> <a id="5852" class="Symbol">:</a> <a id="5854" class="PrimitiveType">Set</a><a id="5857" class="Symbol">}</a> <a id="5859" class="Symbol">→</a> <a id="5861" class="Symbol">(</a><a id="5862" href="/20.07/Isomorphism/#5862" class="Bound">A≃B</a> <a id="5866" class="Symbol">:</a> <a id="5868" href="/20.07/Isomorphism/#5848" class="Bound">A</a> <a id="5870" href="/20.07/Isomorphism/#5356" class="Datatype Operator">≃′</a> <a id="5873" href="/20.07/Isomorphism/#5850" class="Bound">B</a><a id="5874" class="Symbol">)</a> <a id="5876" class="Symbol">→</a> <a id="5878" class="Symbol">(∀</a> <a id="5881" class="Symbol">(</a><a id="5882" href="/20.07/Isomorphism/#5882" class="Bound">y</a> <a id="5884" class="Symbol">:</a> <a id="5886" href="/20.07/Isomorphism/#5850" class="Bound">B</a><a id="5887" class="Symbol">)</a> <a id="5889" class="Symbol">→</a> <a id="5891" href="/20.07/Isomorphism/#5570" class="Function">to′</a> <a id="5895" href="/20.07/Isomorphism/#5862" class="Bound">A≃B</a> <a id="5899" class="Symbol">(</a><a id="5900" href="/20.07/Isomorphism/#5640" class="Function">from′</a> <a id="5906" href="/20.07/Isomorphism/#5862" class="Bound">A≃B</a> <a id="5910" href="/20.07/Isomorphism/#5882" class="Bound">y</a><a id="5911" class="Symbol">)</a> <a id="5913" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="5915" href="/20.07/Isomorphism/#5882" class="Bound">y</a><a id="5916" class="Symbol">)</a>
<a id="5918" href="/20.07/Isomorphism/#5834" class="Function">to∘from′</a> <a id="5927" class="Symbol">(</a><a id="5928" href="/20.07/Isomorphism/#5386" class="InductiveConstructor">mk-≃′</a> <a id="5934" href="/20.07/Isomorphism/#5934" class="Bound">f</a> <a id="5936" href="/20.07/Isomorphism/#5936" class="Bound">g</a> <a id="5938" href="/20.07/Isomorphism/#5938" class="Bound">g∘f</a> <a id="5942" href="/20.07/Isomorphism/#5942" class="Bound">f∘g</a><a id="5945" class="Symbol">)</a> <a id="5947" class="Symbol">=</a> <a id="5949" href="/20.07/Isomorphism/#5942" class="Bound">f∘g</a>
</pre>
<p>We construct values of the record type with the syntax</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>record
  { to    = f
  ; from  = g
  ; from∘to = g∘f
  ; to∘from = f∘g
  }
</code></pre></div></div>

<p>which corresponds to using the constructor of the corresponding
inductive type</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mk-≃′ f g g∘f f∘g
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">f</code>, <code class="language-plaintext highlighter-rouge">g</code>, <code class="language-plaintext highlighter-rouge">g∘f</code>, and <code class="language-plaintext highlighter-rouge">f∘g</code> are values of suitable types.</p>

<h2 id="isomorphism-is-an-equivalence">Isomorphism is an equivalence</h2>

<p>Isomorphism is an equivalence, meaning that it is reflexive, symmetric,
and transitive.  To show isomorphism is reflexive, we take both <code class="language-plaintext highlighter-rouge">to</code>
and <code class="language-plaintext highlighter-rouge">from</code> to be the identity function:</p>
<pre class="Agda"><a id="≃-refl"></a><a id="6501" href="/20.07/Isomorphism/#6501" class="Function">≃-refl</a> <a id="6508" class="Symbol">:</a> <a id="6510" class="Symbol">∀</a> <a id="6512" class="Symbol">{</a><a id="6513" href="/20.07/Isomorphism/#6513" class="Bound">A</a> <a id="6515" class="Symbol">:</a> <a id="6517" class="PrimitiveType">Set</a><a id="6520" class="Symbol">}</a>
    <a id="6526" class="Comment">-----</a>
  <a id="6534" class="Symbol">→</a> <a id="6536" href="/20.07/Isomorphism/#6513" class="Bound">A</a> <a id="6538" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="6540" href="/20.07/Isomorphism/#6513" class="Bound">A</a>
<a id="6542" href="/20.07/Isomorphism/#6501" class="Function">≃-refl</a> <a id="6549" class="Symbol">=</a>
  <a id="6553" class="Keyword">record</a>
    <a id="6564" class="Symbol">{</a> <a id="6566" href="/20.07/Isomorphism/#4405" class="Field">to</a>      <a id="6574" class="Symbol">=</a> <a id="6576" class="Symbol">λ{</a><a id="6578" href="/20.07/Isomorphism/#6578" class="Bound">x</a> <a id="6580" class="Symbol">→</a> <a id="6582" href="/20.07/Isomorphism/#6578" class="Bound">x</a><a id="6583" class="Symbol">}</a>
    <a id="6589" class="Symbol">;</a> <a id="6591" href="/20.07/Isomorphism/#4422" class="Field">from</a>    <a id="6599" class="Symbol">=</a> <a id="6601" class="Symbol">λ{</a><a id="6603" href="/20.07/Isomorphism/#6603" class="Bound">y</a> <a id="6605" class="Symbol">→</a> <a id="6607" href="/20.07/Isomorphism/#6603" class="Bound">y</a><a id="6608" class="Symbol">}</a>
    <a id="6614" class="Symbol">;</a> <a id="6616" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="6624" class="Symbol">=</a> <a id="6626" class="Symbol">λ{</a><a id="6628" href="/20.07/Isomorphism/#6628" class="Bound">x</a> <a id="6630" class="Symbol">→</a> <a id="6632" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="6636" class="Symbol">}</a>
    <a id="6642" class="Symbol">;</a> <a id="6644" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="6652" class="Symbol">=</a> <a id="6654" class="Symbol">λ{</a><a id="6656" href="/20.07/Isomorphism/#6656" class="Bound">y</a> <a id="6658" class="Symbol">→</a> <a id="6660" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="6664" class="Symbol">}</a>
    <a id="6670" class="Symbol">}</a>
</pre>
<p>In the above, <code class="language-plaintext highlighter-rouge">to</code> and <code class="language-plaintext highlighter-rouge">from</code> are both bound to identity functions,
and <code class="language-plaintext highlighter-rouge">from∘to</code> and <code class="language-plaintext highlighter-rouge">to∘from</code> are both bound to functions that discard
their argument and return <code class="language-plaintext highlighter-rouge">refl</code>.  In this case, <code class="language-plaintext highlighter-rouge">refl</code> alone is an
adequate proof since for the left inverse, <code class="language-plaintext highlighter-rouge">from (to x)</code>
simplifies to <code class="language-plaintext highlighter-rouge">x</code>, and similarly for the right inverse.</p>

<p>To show isomorphism is symmetric, we simply swap the roles of <code class="language-plaintext highlighter-rouge">to</code>
and <code class="language-plaintext highlighter-rouge">from</code>, and <code class="language-plaintext highlighter-rouge">from∘to</code> and <code class="language-plaintext highlighter-rouge">to∘from</code>:</p>
<pre class="Agda"><a id="≃-sym"></a><a id="7107" href="/20.07/Isomorphism/#7107" class="Function">≃-sym</a> <a id="7113" class="Symbol">:</a> <a id="7115" class="Symbol">∀</a> <a id="7117" class="Symbol">{</a><a id="7118" href="/20.07/Isomorphism/#7118" class="Bound">A</a> <a id="7120" href="/20.07/Isomorphism/#7120" class="Bound">B</a> <a id="7122" class="Symbol">:</a> <a id="7124" class="PrimitiveType">Set</a><a id="7127" class="Symbol">}</a>
  <a id="7131" class="Symbol">→</a> <a id="7133" href="/20.07/Isomorphism/#7118" class="Bound">A</a> <a id="7135" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="7137" href="/20.07/Isomorphism/#7120" class="Bound">B</a>
    <a id="7143" class="Comment">-----</a>
  <a id="7151" class="Symbol">→</a> <a id="7153" href="/20.07/Isomorphism/#7120" class="Bound">B</a> <a id="7155" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="7157" href="/20.07/Isomorphism/#7118" class="Bound">A</a>
<a id="7159" href="/20.07/Isomorphism/#7107" class="Function">≃-sym</a> <a id="7165" href="/20.07/Isomorphism/#7165" class="Bound">A≃B</a> <a id="7169" class="Symbol">=</a>
  <a id="7173" class="Keyword">record</a>
    <a id="7184" class="Symbol">{</a> <a id="7186" href="/20.07/Isomorphism/#4405" class="Field">to</a>      <a id="7194" class="Symbol">=</a> <a id="7196" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7201" href="/20.07/Isomorphism/#7165" class="Bound">A≃B</a>
    <a id="7209" class="Symbol">;</a> <a id="7211" href="/20.07/Isomorphism/#4422" class="Field">from</a>    <a id="7219" class="Symbol">=</a> <a id="7221" href="/20.07/Isomorphism/#4405" class="Field">to</a>   <a id="7226" href="/20.07/Isomorphism/#7165" class="Bound">A≃B</a>
    <a id="7234" class="Symbol">;</a> <a id="7236" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="7244" class="Symbol">=</a> <a id="7246" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="7254" href="/20.07/Isomorphism/#7165" class="Bound">A≃B</a>
    <a id="7262" class="Symbol">;</a> <a id="7264" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="7272" class="Symbol">=</a> <a id="7274" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="7282" href="/20.07/Isomorphism/#7165" class="Bound">A≃B</a>
    <a id="7290" class="Symbol">}</a>
</pre>
<p>To show isomorphism is transitive, we compose the <code class="language-plaintext highlighter-rouge">to</code> and <code class="language-plaintext highlighter-rouge">from</code>
functions, and use equational reasoning to combine the inverses:</p>
<pre class="Agda"><a id="≃-trans"></a><a id="7432" href="/20.07/Isomorphism/#7432" class="Function">≃-trans</a> <a id="7440" class="Symbol">:</a> <a id="7442" class="Symbol">∀</a> <a id="7444" class="Symbol">{</a><a id="7445" href="/20.07/Isomorphism/#7445" class="Bound">A</a> <a id="7447" href="/20.07/Isomorphism/#7447" class="Bound">B</a> <a id="7449" href="/20.07/Isomorphism/#7449" class="Bound">C</a> <a id="7451" class="Symbol">:</a> <a id="7453" class="PrimitiveType">Set</a><a id="7456" class="Symbol">}</a>
  <a id="7460" class="Symbol">→</a> <a id="7462" href="/20.07/Isomorphism/#7445" class="Bound">A</a> <a id="7464" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="7466" href="/20.07/Isomorphism/#7447" class="Bound">B</a>
  <a id="7470" class="Symbol">→</a> <a id="7472" href="/20.07/Isomorphism/#7447" class="Bound">B</a> <a id="7474" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="7476" href="/20.07/Isomorphism/#7449" class="Bound">C</a>
    <a id="7482" class="Comment">-----</a>
  <a id="7490" class="Symbol">→</a> <a id="7492" href="/20.07/Isomorphism/#7445" class="Bound">A</a> <a id="7494" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="7496" href="/20.07/Isomorphism/#7449" class="Bound">C</a>
<a id="7498" href="/20.07/Isomorphism/#7432" class="Function">≃-trans</a> <a id="7506" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7510" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7514" class="Symbol">=</a>
  <a id="7518" class="Keyword">record</a>
    <a id="7529" class="Symbol">{</a> <a id="7531" href="/20.07/Isomorphism/#4405" class="Field">to</a>       <a id="7540" class="Symbol">=</a> <a id="7542" href="/20.07/Isomorphism/#4405" class="Field">to</a>   <a id="7547" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7551" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="7553" href="/20.07/Isomorphism/#4405" class="Field">to</a>   <a id="7558" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a>
    <a id="7566" class="Symbol">;</a> <a id="7568" href="/20.07/Isomorphism/#4422" class="Field">from</a>     <a id="7577" class="Symbol">=</a> <a id="7579" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7584" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7588" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="7590" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7595" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a>
    <a id="7603" class="Symbol">;</a> <a id="7605" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a>  <a id="7614" class="Symbol">=</a> <a id="7616" class="Symbol">λ{</a><a id="7618" href="/20.07/Isomorphism/#7618" class="Bound">x</a> <a id="7620" class="Symbol">→</a>
        <a id="7630" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
          <a id="7646" class="Symbol">(</a><a id="7647" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7652" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7656" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="7658" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7663" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a><a id="7666" class="Symbol">)</a> <a id="7668" class="Symbol">((</a><a id="7670" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7673" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7677" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="7679" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7682" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a><a id="7685" class="Symbol">)</a> <a id="7687" href="/20.07/Isomorphism/#7618" class="Bound">x</a><a id="7688" class="Symbol">)</a>
        <a id="7698" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
          <a id="7712" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7717" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7721" class="Symbol">(</a><a id="7722" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7727" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7731" class="Symbol">(</a><a id="7732" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7735" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7739" class="Symbol">(</a><a id="7740" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7743" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7747" href="/20.07/Isomorphism/#7618" class="Bound">x</a><a id="7748" class="Symbol">)))</a>
        <a id="7760" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="7763" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="7768" class="Symbol">(</a><a id="7769" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7774" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a><a id="7777" class="Symbol">)</a> <a id="7779" class="Symbol">(</a><a id="7780" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="7788" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7792" class="Symbol">(</a><a id="7793" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7796" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7800" href="/20.07/Isomorphism/#7618" class="Bound">x</a><a id="7801" class="Symbol">))</a> <a id="7804" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="7816" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7821" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7825" class="Symbol">(</a><a id="7826" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7829" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7833" href="/20.07/Isomorphism/#7618" class="Bound">x</a><a id="7834" class="Symbol">)</a>
        <a id="7844" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="7847" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="7855" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7859" href="/20.07/Isomorphism/#7618" class="Bound">x</a> <a id="7861" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="7873" href="/20.07/Isomorphism/#7618" class="Bound">x</a>
        <a id="7883" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a><a id="7884" class="Symbol">}</a>
    <a id="7890" class="Symbol">;</a> <a id="7892" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="7900" class="Symbol">=</a> <a id="7902" class="Symbol">λ{</a><a id="7904" href="/20.07/Isomorphism/#7904" class="Bound">y</a> <a id="7906" class="Symbol">→</a>
        <a id="7916" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
          <a id="7932" class="Symbol">(</a><a id="7933" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7936" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="7940" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="7942" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="7945" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a><a id="7948" class="Symbol">)</a> <a id="7950" class="Symbol">((</a><a id="7952" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7957" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="7961" href="/20.07/Isomorphism/#1952" class="Function Operator">∘</a> <a id="7963" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="7968" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a><a id="7971" class="Symbol">)</a> <a id="7973" href="/20.07/Isomorphism/#7904" class="Bound">y</a><a id="7974" class="Symbol">)</a>
        <a id="7984" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
          <a id="7998" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="8001" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="8005" class="Symbol">(</a><a id="8006" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="8009" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="8013" class="Symbol">(</a><a id="8014" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="8019" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="8023" class="Symbol">(</a><a id="8024" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="8029" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="8033" href="/20.07/Isomorphism/#7904" class="Bound">y</a><a id="8034" class="Symbol">)))</a>
        <a id="8046" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="8049" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="8054" class="Symbol">(</a><a id="8055" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="8058" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a><a id="8061" class="Symbol">)</a> <a id="8063" class="Symbol">(</a><a id="8064" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="8072" href="/20.07/Isomorphism/#7506" class="Bound">A≃B</a> <a id="8076" class="Symbol">(</a><a id="8077" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="8082" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="8086" href="/20.07/Isomorphism/#7904" class="Bound">y</a><a id="8087" class="Symbol">))</a> <a id="8090" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="8102" href="/20.07/Isomorphism/#4405" class="Field">to</a> <a id="8105" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="8109" class="Symbol">(</a><a id="8110" href="/20.07/Isomorphism/#4422" class="Field">from</a> <a id="8115" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="8119" href="/20.07/Isomorphism/#7904" class="Bound">y</a><a id="8120" class="Symbol">)</a>
        <a id="8130" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="8133" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="8141" href="/20.07/Isomorphism/#7510" class="Bound">B≃C</a> <a id="8145" href="/20.07/Isomorphism/#7904" class="Bound">y</a> <a id="8147" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="8159" href="/20.07/Isomorphism/#7904" class="Bound">y</a>
        <a id="8169" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a><a id="8170" class="Symbol">}</a>
     <a id="8177" class="Symbol">}</a>
</pre>

<h2 id="equational-reasoning-for-isomorphism">Equational reasoning for isomorphism</h2>

<p>It is straightforward to support a variant of equational reasoning for
isomorphism.  We essentially copy the previous definition
of equality for isomorphism.  We omit the form that corresponds to <code class="language-plaintext highlighter-rouge">_≡⟨⟩_</code>, since
trivial isomorphisms arise far less often than trivial equalities:</p>

<pre class="Agda"><a id="8509" class="Keyword">module</a> <a id="≃-Reasoning"></a><a id="8516" href="/20.07/Isomorphism/#8516" class="Module">≃-Reasoning</a> <a id="8528" class="Keyword">where</a>

  <a id="8537" class="Keyword">infix</a>  <a id="8544" class="Number">1</a> <a id="8546" href="/20.07/Isomorphism/#8592" class="Function Operator">≃-begin_</a>
  <a id="8557" class="Keyword">infixr</a> <a id="8564" class="Number">2</a> <a id="8566" href="/20.07/Isomorphism/#8676" class="Function Operator">_≃⟨_⟩_</a>
  <a id="8575" class="Keyword">infix</a>  <a id="8582" class="Number">3</a> <a id="8584" href="/20.07/Isomorphism/#8795" class="Function Operator">_≃-∎</a>

  <a id="≃-Reasoning.≃-begin_"></a><a id="8592" href="/20.07/Isomorphism/#8592" class="Function Operator">≃-begin_</a> <a id="8601" class="Symbol">:</a> <a id="8603" class="Symbol">∀</a> <a id="8605" class="Symbol">{</a><a id="8606" href="/20.07/Isomorphism/#8606" class="Bound">A</a> <a id="8608" href="/20.07/Isomorphism/#8608" class="Bound">B</a> <a id="8610" class="Symbol">:</a> <a id="8612" class="PrimitiveType">Set</a><a id="8615" class="Symbol">}</a>
    <a id="8621" class="Symbol">→</a> <a id="8623" href="/20.07/Isomorphism/#8606" class="Bound">A</a> <a id="8625" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="8627" href="/20.07/Isomorphism/#8608" class="Bound">B</a>
      <a id="8635" class="Comment">-----</a>
    <a id="8645" class="Symbol">→</a> <a id="8647" href="/20.07/Isomorphism/#8606" class="Bound">A</a> <a id="8649" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="8651" href="/20.07/Isomorphism/#8608" class="Bound">B</a>
  <a id="8655" href="/20.07/Isomorphism/#8592" class="Function Operator">≃-begin</a> <a id="8663" href="/20.07/Isomorphism/#8663" class="Bound">A≃B</a> <a id="8667" class="Symbol">=</a> <a id="8669" href="/20.07/Isomorphism/#8663" class="Bound">A≃B</a>

  <a id="≃-Reasoning._≃⟨_⟩_"></a><a id="8676" href="/20.07/Isomorphism/#8676" class="Function Operator">_≃⟨_⟩_</a> <a id="8683" class="Symbol">:</a> <a id="8685" class="Symbol">∀</a> <a id="8687" class="Symbol">(</a><a id="8688" href="/20.07/Isomorphism/#8688" class="Bound">A</a> <a id="8690" class="Symbol">:</a> <a id="8692" class="PrimitiveType">Set</a><a id="8695" class="Symbol">)</a> <a id="8697" class="Symbol">{</a><a id="8698" href="/20.07/Isomorphism/#8698" class="Bound">B</a> <a id="8700" href="/20.07/Isomorphism/#8700" class="Bound">C</a> <a id="8702" class="Symbol">:</a> <a id="8704" class="PrimitiveType">Set</a><a id="8707" class="Symbol">}</a>
    <a id="8713" class="Symbol">→</a> <a id="8715" href="/20.07/Isomorphism/#8688" class="Bound">A</a> <a id="8717" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="8719" href="/20.07/Isomorphism/#8698" class="Bound">B</a>
    <a id="8725" class="Symbol">→</a> <a id="8727" href="/20.07/Isomorphism/#8698" class="Bound">B</a> <a id="8729" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="8731" href="/20.07/Isomorphism/#8700" class="Bound">C</a>
      <a id="8739" class="Comment">-----</a>
    <a id="8749" class="Symbol">→</a> <a id="8751" href="/20.07/Isomorphism/#8688" class="Bound">A</a> <a id="8753" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="8755" href="/20.07/Isomorphism/#8700" class="Bound">C</a>
  <a id="8759" href="/20.07/Isomorphism/#8759" class="Bound">A</a> <a id="8761" href="/20.07/Isomorphism/#8676" class="Function Operator">≃⟨</a> <a id="8764" href="/20.07/Isomorphism/#8764" class="Bound">A≃B</a> <a id="8768" href="/20.07/Isomorphism/#8676" class="Function Operator">⟩</a> <a id="8770" href="/20.07/Isomorphism/#8770" class="Bound">B≃C</a> <a id="8774" class="Symbol">=</a> <a id="8776" href="/20.07/Isomorphism/#7432" class="Function">≃-trans</a> <a id="8784" href="/20.07/Isomorphism/#8764" class="Bound">A≃B</a> <a id="8788" href="/20.07/Isomorphism/#8770" class="Bound">B≃C</a>

  <a id="≃-Reasoning._≃-∎"></a><a id="8795" href="/20.07/Isomorphism/#8795" class="Function Operator">_≃-∎</a> <a id="8800" class="Symbol">:</a> <a id="8802" class="Symbol">∀</a> <a id="8804" class="Symbol">(</a><a id="8805" href="/20.07/Isomorphism/#8805" class="Bound">A</a> <a id="8807" class="Symbol">:</a> <a id="8809" class="PrimitiveType">Set</a><a id="8812" class="Symbol">)</a>
      <a id="8820" class="Comment">-----</a>
    <a id="8830" class="Symbol">→</a> <a id="8832" href="/20.07/Isomorphism/#8805" class="Bound">A</a> <a id="8834" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="8836" href="/20.07/Isomorphism/#8805" class="Bound">A</a>
  <a id="8840" href="/20.07/Isomorphism/#8840" class="Bound">A</a> <a id="8842" href="/20.07/Isomorphism/#8795" class="Function Operator">≃-∎</a> <a id="8846" class="Symbol">=</a> <a id="8848" href="/20.07/Isomorphism/#6501" class="Function">≃-refl</a>

<a id="8856" class="Keyword">open</a> <a id="8861" href="/20.07/Isomorphism/#8516" class="Module">≃-Reasoning</a>
</pre>

<h2 id="embedding">Embedding</h2>

<p>We also need the notion of <em>embedding</em>, which is a weakening of
isomorphism.  While an isomorphism shows that two types are in
one-to-one correspondence, an embedding shows that the first type is
included in the second; or, equivalently, that there is a many-to-one
correspondence between the second type and the first.</p>

<p>Here is the formal definition of embedding:</p>
<pre class="Agda"><a id="9262" class="Keyword">infix</a> <a id="9268" class="Number">0</a> <a id="9270" href="/20.07/Isomorphism/#9281" class="Record Operator">_≲_</a>
<a id="9274" class="Keyword">record</a> <a id="_≲_"></a><a id="9281" href="/20.07/Isomorphism/#9281" class="Record Operator">_≲_</a> <a id="9285" class="Symbol">(</a><a id="9286" href="/20.07/Isomorphism/#9286" class="Bound">A</a> <a id="9288" href="/20.07/Isomorphism/#9288" class="Bound">B</a> <a id="9290" class="Symbol">:</a> <a id="9292" class="PrimitiveType">Set</a><a id="9295" class="Symbol">)</a> <a id="9297" class="Symbol">:</a> <a id="9299" class="PrimitiveType">Set</a> <a id="9303" class="Keyword">where</a>
  <a id="9311" class="Keyword">field</a>
    <a id="_≲_.to"></a><a id="9321" href="/20.07/Isomorphism/#9321" class="Field">to</a>      <a id="9329" class="Symbol">:</a> <a id="9331" href="/20.07/Isomorphism/#9286" class="Bound">A</a> <a id="9333" class="Symbol">→</a> <a id="9335" href="/20.07/Isomorphism/#9288" class="Bound">B</a>
    <a id="_≲_.from"></a><a id="9341" href="/20.07/Isomorphism/#9341" class="Field">from</a>    <a id="9349" class="Symbol">:</a> <a id="9351" href="/20.07/Isomorphism/#9288" class="Bound">B</a> <a id="9353" class="Symbol">→</a> <a id="9355" href="/20.07/Isomorphism/#9286" class="Bound">A</a>
    <a id="_≲_.from∘to"></a><a id="9361" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="9369" class="Symbol">:</a> <a id="9371" class="Symbol">∀</a> <a id="9373" class="Symbol">(</a><a id="9374" href="/20.07/Isomorphism/#9374" class="Bound">x</a> <a id="9376" class="Symbol">:</a> <a id="9378" href="/20.07/Isomorphism/#9286" class="Bound">A</a><a id="9379" class="Symbol">)</a> <a id="9381" class="Symbol">→</a> <a id="9383" class="Field">from</a> <a id="9388" class="Symbol">(</a><a id="9389" class="Field">to</a> <a id="9392" href="/20.07/Isomorphism/#9374" class="Bound">x</a><a id="9393" class="Symbol">)</a> <a id="9395" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="9397" href="/20.07/Isomorphism/#9374" class="Bound">x</a>
<a id="9399" class="Keyword">open</a> <a id="9404" href="/20.07/Isomorphism/#9281" class="Module Operator">_≲_</a>
</pre>
<p>It is the same as an isomorphism, save that it lacks the <code class="language-plaintext highlighter-rouge">to∘from</code> field.
Hence, we know that <code class="language-plaintext highlighter-rouge">from</code> is left-inverse to <code class="language-plaintext highlighter-rouge">to</code>, but not that <code class="language-plaintext highlighter-rouge">from</code>
is right-inverse to <code class="language-plaintext highlighter-rouge">to</code>.</p>

<p>Embedding is reflexive and transitive, but not symmetric.  The proofs
are cut down versions of the similar proofs for isomorphism:</p>
<pre class="Agda"><a id="≲-refl"></a><a id="9720" href="/20.07/Isomorphism/#9720" class="Function">≲-refl</a> <a id="9727" class="Symbol">:</a> <a id="9729" class="Symbol">∀</a> <a id="9731" class="Symbol">{</a><a id="9732" href="/20.07/Isomorphism/#9732" class="Bound">A</a> <a id="9734" class="Symbol">:</a> <a id="9736" class="PrimitiveType">Set</a><a id="9739" class="Symbol">}</a> <a id="9741" class="Symbol">→</a> <a id="9743" href="/20.07/Isomorphism/#9732" class="Bound">A</a> <a id="9745" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="9747" href="/20.07/Isomorphism/#9732" class="Bound">A</a>
<a id="9749" href="/20.07/Isomorphism/#9720" class="Function">≲-refl</a> <a id="9756" class="Symbol">=</a>
  <a id="9760" class="Keyword">record</a>
    <a id="9771" class="Symbol">{</a> <a id="9773" href="/20.07/Isomorphism/#9321" class="Field">to</a>      <a id="9781" class="Symbol">=</a> <a id="9783" class="Symbol">λ{</a><a id="9785" href="/20.07/Isomorphism/#9785" class="Bound">x</a> <a id="9787" class="Symbol">→</a> <a id="9789" href="/20.07/Isomorphism/#9785" class="Bound">x</a><a id="9790" class="Symbol">}</a>
    <a id="9796" class="Symbol">;</a> <a id="9798" href="/20.07/Isomorphism/#9341" class="Field">from</a>    <a id="9806" class="Symbol">=</a> <a id="9808" class="Symbol">λ{</a><a id="9810" href="/20.07/Isomorphism/#9810" class="Bound">y</a> <a id="9812" class="Symbol">→</a> <a id="9814" href="/20.07/Isomorphism/#9810" class="Bound">y</a><a id="9815" class="Symbol">}</a>
    <a id="9821" class="Symbol">;</a> <a id="9823" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="9831" class="Symbol">=</a> <a id="9833" class="Symbol">λ{</a><a id="9835" href="/20.07/Isomorphism/#9835" class="Bound">x</a> <a id="9837" class="Symbol">→</a> <a id="9839" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="9843" class="Symbol">}</a>
    <a id="9849" class="Symbol">}</a>

<a id="≲-trans"></a><a id="9852" href="/20.07/Isomorphism/#9852" class="Function">≲-trans</a> <a id="9860" class="Symbol">:</a> <a id="9862" class="Symbol">∀</a> <a id="9864" class="Symbol">{</a><a id="9865" href="/20.07/Isomorphism/#9865" class="Bound">A</a> <a id="9867" href="/20.07/Isomorphism/#9867" class="Bound">B</a> <a id="9869" href="/20.07/Isomorphism/#9869" class="Bound">C</a> <a id="9871" class="Symbol">:</a> <a id="9873" class="PrimitiveType">Set</a><a id="9876" class="Symbol">}</a> <a id="9878" class="Symbol">→</a> <a id="9880" href="/20.07/Isomorphism/#9865" class="Bound">A</a> <a id="9882" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="9884" href="/20.07/Isomorphism/#9867" class="Bound">B</a> <a id="9886" class="Symbol">→</a> <a id="9888" href="/20.07/Isomorphism/#9867" class="Bound">B</a> <a id="9890" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="9892" href="/20.07/Isomorphism/#9869" class="Bound">C</a> <a id="9894" class="Symbol">→</a> <a id="9896" href="/20.07/Isomorphism/#9865" class="Bound">A</a> <a id="9898" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="9900" href="/20.07/Isomorphism/#9869" class="Bound">C</a>
<a id="9902" href="/20.07/Isomorphism/#9852" class="Function">≲-trans</a> <a id="9910" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="9914" href="/20.07/Isomorphism/#9914" class="Bound">B≲C</a> <a id="9918" class="Symbol">=</a>
  <a id="9922" class="Keyword">record</a>
    <a id="9933" class="Symbol">{</a> <a id="9935" href="/20.07/Isomorphism/#9321" class="Field">to</a>      <a id="9943" class="Symbol">=</a> <a id="9945" class="Symbol">λ{</a><a id="9947" href="/20.07/Isomorphism/#9947" class="Bound">x</a> <a id="9949" class="Symbol">→</a> <a id="9951" href="/20.07/Isomorphism/#9321" class="Field">to</a>   <a id="9956" href="/20.07/Isomorphism/#9914" class="Bound">B≲C</a> <a id="9960" class="Symbol">(</a><a id="9961" href="/20.07/Isomorphism/#9321" class="Field">to</a>   <a id="9966" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="9970" href="/20.07/Isomorphism/#9947" class="Bound">x</a><a id="9971" class="Symbol">)}</a>
    <a id="9978" class="Symbol">;</a> <a id="9980" href="/20.07/Isomorphism/#9341" class="Field">from</a>    <a id="9988" class="Symbol">=</a> <a id="9990" class="Symbol">λ{</a><a id="9992" href="/20.07/Isomorphism/#9992" class="Bound">y</a> <a id="9994" class="Symbol">→</a> <a id="9996" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10001" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10005" class="Symbol">(</a><a id="10006" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10011" href="/20.07/Isomorphism/#9914" class="Bound">B≲C</a> <a id="10015" href="/20.07/Isomorphism/#9992" class="Bound">y</a><a id="10016" class="Symbol">)}</a>
    <a id="10023" class="Symbol">;</a> <a id="10025" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="10033" class="Symbol">=</a> <a id="10035" class="Symbol">λ{</a><a id="10037" href="/20.07/Isomorphism/#10037" class="Bound">x</a> <a id="10039" class="Symbol">→</a>
        <a id="10049" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
          <a id="10065" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10070" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10074" class="Symbol">(</a><a id="10075" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10080" href="/20.07/Isomorphism/#9914" class="Bound">B≲C</a> <a id="10084" class="Symbol">(</a><a id="10085" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10088" href="/20.07/Isomorphism/#9914" class="Bound">B≲C</a> <a id="10092" class="Symbol">(</a><a id="10093" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10096" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10100" href="/20.07/Isomorphism/#10037" class="Bound">x</a><a id="10101" class="Symbol">)))</a>
        <a id="10113" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="10116" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="10121" class="Symbol">(</a><a id="10122" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10127" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a><a id="10130" class="Symbol">)</a> <a id="10132" class="Symbol">(</a><a id="10133" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="10141" href="/20.07/Isomorphism/#9914" class="Bound">B≲C</a> <a id="10145" class="Symbol">(</a><a id="10146" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10149" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10153" href="/20.07/Isomorphism/#10037" class="Bound">x</a><a id="10154" class="Symbol">))</a> <a id="10157" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="10169" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10174" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10178" class="Symbol">(</a><a id="10179" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10182" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10186" href="/20.07/Isomorphism/#10037" class="Bound">x</a><a id="10187" class="Symbol">)</a>
        <a id="10197" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="10200" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="10208" href="/20.07/Isomorphism/#9910" class="Bound">A≲B</a> <a id="10212" href="/20.07/Isomorphism/#10037" class="Bound">x</a> <a id="10214" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="10226" href="/20.07/Isomorphism/#10037" class="Bound">x</a>
        <a id="10236" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a><a id="10237" class="Symbol">}</a>
     <a id="10244" class="Symbol">}</a>
</pre>
<p>It is also easy to see that if two types embed in each other, and the
embedding functions correspond, then they are isomorphic.  This is a
weak form of anti-symmetry:</p>
<pre class="Agda"><a id="≲-antisym"></a><a id="10422" href="/20.07/Isomorphism/#10422" class="Function">≲-antisym</a> <a id="10432" class="Symbol">:</a> <a id="10434" class="Symbol">∀</a> <a id="10436" class="Symbol">{</a><a id="10437" href="/20.07/Isomorphism/#10437" class="Bound">A</a> <a id="10439" href="/20.07/Isomorphism/#10439" class="Bound">B</a> <a id="10441" class="Symbol">:</a> <a id="10443" class="PrimitiveType">Set</a><a id="10446" class="Symbol">}</a>
  <a id="10450" class="Symbol">→</a> <a id="10452" class="Symbol">(</a><a id="10453" href="/20.07/Isomorphism/#10453" class="Bound">A≲B</a> <a id="10457" class="Symbol">:</a> <a id="10459" href="/20.07/Isomorphism/#10437" class="Bound">A</a> <a id="10461" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="10463" href="/20.07/Isomorphism/#10439" class="Bound">B</a><a id="10464" class="Symbol">)</a>
  <a id="10468" class="Symbol">→</a> <a id="10470" class="Symbol">(</a><a id="10471" href="/20.07/Isomorphism/#10471" class="Bound">B≲A</a> <a id="10475" class="Symbol">:</a> <a id="10477" href="/20.07/Isomorphism/#10439" class="Bound">B</a> <a id="10479" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="10481" href="/20.07/Isomorphism/#10437" class="Bound">A</a><a id="10482" class="Symbol">)</a>
  <a id="10486" class="Symbol">→</a> <a id="10488" class="Symbol">(</a><a id="10489" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10492" href="/20.07/Isomorphism/#10453" class="Bound">A≲B</a> <a id="10496" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10498" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10503" href="/20.07/Isomorphism/#10471" class="Bound">B≲A</a><a id="10506" class="Symbol">)</a>
  <a id="10510" class="Symbol">→</a> <a id="10512" class="Symbol">(</a><a id="10513" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10518" href="/20.07/Isomorphism/#10453" class="Bound">A≲B</a> <a id="10522" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10524" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10527" href="/20.07/Isomorphism/#10471" class="Bound">B≲A</a><a id="10530" class="Symbol">)</a>
    <a id="10536" class="Comment">-------------------</a>
  <a id="10558" class="Symbol">→</a> <a id="10560" href="/20.07/Isomorphism/#10437" class="Bound">A</a> <a id="10562" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="10564" href="/20.07/Isomorphism/#10439" class="Bound">B</a>
<a id="10566" href="/20.07/Isomorphism/#10422" class="Function">≲-antisym</a> <a id="10576" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a> <a id="10580" href="/20.07/Isomorphism/#10580" class="Bound">B≲A</a> <a id="10584" href="/20.07/Isomorphism/#10584" class="Bound">to≡from</a> <a id="10592" href="/20.07/Isomorphism/#10592" class="Bound">from≡to</a> <a id="10600" class="Symbol">=</a>
  <a id="10604" class="Keyword">record</a>
    <a id="10615" class="Symbol">{</a> <a id="10617" href="/20.07/Isomorphism/#4405" class="Field">to</a>      <a id="10625" class="Symbol">=</a> <a id="10627" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10630" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a>
    <a id="10638" class="Symbol">;</a> <a id="10640" href="/20.07/Isomorphism/#4422" class="Field">from</a>    <a id="10648" class="Symbol">=</a> <a id="10650" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10655" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a>
    <a id="10663" class="Symbol">;</a> <a id="10665" href="/20.07/Isomorphism/#4439" class="Field">from∘to</a> <a id="10673" class="Symbol">=</a> <a id="10675" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="10683" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a>
    <a id="10691" class="Symbol">;</a> <a id="10693" href="/20.07/Isomorphism/#4481" class="Field">to∘from</a> <a id="10701" class="Symbol">=</a> <a id="10703" class="Symbol">λ{</a><a id="10705" href="/20.07/Isomorphism/#10705" class="Bound">y</a> <a id="10707" class="Symbol">→</a>
        <a id="10717" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
          <a id="10733" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10736" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a> <a id="10740" class="Symbol">(</a><a id="10741" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10746" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a> <a id="10750" href="/20.07/Isomorphism/#10705" class="Bound">y</a><a id="10751" class="Symbol">)</a>
        <a id="10761" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="10764" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="10769" class="Symbol">(</a><a id="10770" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10773" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a><a id="10776" class="Symbol">)</a> <a id="10778" class="Symbol">(</a><a id="10779" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="10788" href="/20.07/Isomorphism/#10592" class="Bound">from≡to</a> <a id="10796" href="/20.07/Isomorphism/#10705" class="Bound">y</a><a id="10797" class="Symbol">)</a> <a id="10799" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="10811" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10814" href="/20.07/Isomorphism/#10576" class="Bound">A≲B</a> <a id="10818" class="Symbol">(</a><a id="10819" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10822" href="/20.07/Isomorphism/#10580" class="Bound">B≲A</a> <a id="10826" href="/20.07/Isomorphism/#10705" class="Bound">y</a><a id="10827" class="Symbol">)</a>
        <a id="10837" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="10840" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="10849" href="/20.07/Isomorphism/#10584" class="Bound">to≡from</a> <a id="10857" class="Symbol">(</a><a id="10858" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10861" href="/20.07/Isomorphism/#10580" class="Bound">B≲A</a> <a id="10865" href="/20.07/Isomorphism/#10705" class="Bound">y</a><a id="10866" class="Symbol">)</a> <a id="10868" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="10880" href="/20.07/Isomorphism/#9341" class="Field">from</a> <a id="10885" href="/20.07/Isomorphism/#10580" class="Bound">B≲A</a> <a id="10889" class="Symbol">(</a><a id="10890" href="/20.07/Isomorphism/#9321" class="Field">to</a> <a id="10893" href="/20.07/Isomorphism/#10580" class="Bound">B≲A</a> <a id="10897" href="/20.07/Isomorphism/#10705" class="Bound">y</a><a id="10898" class="Symbol">)</a>
        <a id="10908" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="10911" href="/20.07/Isomorphism/#9361" class="Field">from∘to</a> <a id="10919" href="/20.07/Isomorphism/#10580" class="Bound">B≲A</a> <a id="10923" href="/20.07/Isomorphism/#10705" class="Bound">y</a> <a id="10925" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
          <a id="10937" href="/20.07/Isomorphism/#10705" class="Bound">y</a>
        <a id="10947" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a><a id="10948" class="Symbol">}</a>
    <a id="10954" class="Symbol">}</a>
</pre>
<p>The first three components are copied from the embedding, while the
last combines the left inverse of <code class="language-plaintext highlighter-rouge">B ≲ A</code> with the equivalences of
the <code class="language-plaintext highlighter-rouge">to</code> and <code class="language-plaintext highlighter-rouge">from</code> components from the two embeddings to obtain
the right inverse of the isomorphism.</p>

<h2 id="equational-reasoning-for-embedding">Equational reasoning for embedding</h2>

<p>We can also support tabular reasoning for embedding,
analogous to that used for isomorphism:</p>

<pre class="Agda"><a id="11336" class="Keyword">module</a> <a id="≲-Reasoning"></a><a id="11343" href="/20.07/Isomorphism/#11343" class="Module">≲-Reasoning</a> <a id="11355" class="Keyword">where</a>

  <a id="11364" class="Keyword">infix</a>  <a id="11371" class="Number">1</a> <a id="11373" href="/20.07/Isomorphism/#11419" class="Function Operator">≲-begin_</a>
  <a id="11384" class="Keyword">infixr</a> <a id="11391" class="Number">2</a> <a id="11393" href="/20.07/Isomorphism/#11503" class="Function Operator">_≲⟨_⟩_</a>
  <a id="11402" class="Keyword">infix</a>  <a id="11409" class="Number">3</a> <a id="11411" href="/20.07/Isomorphism/#11622" class="Function Operator">_≲-∎</a>

  <a id="≲-Reasoning.≲-begin_"></a><a id="11419" href="/20.07/Isomorphism/#11419" class="Function Operator">≲-begin_</a> <a id="11428" class="Symbol">:</a> <a id="11430" class="Symbol">∀</a> <a id="11432" class="Symbol">{</a><a id="11433" href="/20.07/Isomorphism/#11433" class="Bound">A</a> <a id="11435" href="/20.07/Isomorphism/#11435" class="Bound">B</a> <a id="11437" class="Symbol">:</a> <a id="11439" class="PrimitiveType">Set</a><a id="11442" class="Symbol">}</a>
    <a id="11448" class="Symbol">→</a> <a id="11450" href="/20.07/Isomorphism/#11433" class="Bound">A</a> <a id="11452" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11454" href="/20.07/Isomorphism/#11435" class="Bound">B</a>
      <a id="11462" class="Comment">-----</a>
    <a id="11472" class="Symbol">→</a> <a id="11474" href="/20.07/Isomorphism/#11433" class="Bound">A</a> <a id="11476" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11478" href="/20.07/Isomorphism/#11435" class="Bound">B</a>
  <a id="11482" href="/20.07/Isomorphism/#11419" class="Function Operator">≲-begin</a> <a id="11490" href="/20.07/Isomorphism/#11490" class="Bound">A≲B</a> <a id="11494" class="Symbol">=</a> <a id="11496" href="/20.07/Isomorphism/#11490" class="Bound">A≲B</a>

  <a id="≲-Reasoning._≲⟨_⟩_"></a><a id="11503" href="/20.07/Isomorphism/#11503" class="Function Operator">_≲⟨_⟩_</a> <a id="11510" class="Symbol">:</a> <a id="11512" class="Symbol">∀</a> <a id="11514" class="Symbol">(</a><a id="11515" href="/20.07/Isomorphism/#11515" class="Bound">A</a> <a id="11517" class="Symbol">:</a> <a id="11519" class="PrimitiveType">Set</a><a id="11522" class="Symbol">)</a> <a id="11524" class="Symbol">{</a><a id="11525" href="/20.07/Isomorphism/#11525" class="Bound">B</a> <a id="11527" href="/20.07/Isomorphism/#11527" class="Bound">C</a> <a id="11529" class="Symbol">:</a> <a id="11531" class="PrimitiveType">Set</a><a id="11534" class="Symbol">}</a>
    <a id="11540" class="Symbol">→</a> <a id="11542" href="/20.07/Isomorphism/#11515" class="Bound">A</a> <a id="11544" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11546" href="/20.07/Isomorphism/#11525" class="Bound">B</a>
    <a id="11552" class="Symbol">→</a> <a id="11554" href="/20.07/Isomorphism/#11525" class="Bound">B</a> <a id="11556" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11558" href="/20.07/Isomorphism/#11527" class="Bound">C</a>
      <a id="11566" class="Comment">-----</a>
    <a id="11576" class="Symbol">→</a> <a id="11578" href="/20.07/Isomorphism/#11515" class="Bound">A</a> <a id="11580" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11582" href="/20.07/Isomorphism/#11527" class="Bound">C</a>
  <a id="11586" href="/20.07/Isomorphism/#11586" class="Bound">A</a> <a id="11588" href="/20.07/Isomorphism/#11503" class="Function Operator">≲⟨</a> <a id="11591" href="/20.07/Isomorphism/#11591" class="Bound">A≲B</a> <a id="11595" href="/20.07/Isomorphism/#11503" class="Function Operator">⟩</a> <a id="11597" href="/20.07/Isomorphism/#11597" class="Bound">B≲C</a> <a id="11601" class="Symbol">=</a> <a id="11603" href="/20.07/Isomorphism/#9852" class="Function">≲-trans</a> <a id="11611" href="/20.07/Isomorphism/#11591" class="Bound">A≲B</a> <a id="11615" href="/20.07/Isomorphism/#11597" class="Bound">B≲C</a>

  <a id="≲-Reasoning._≲-∎"></a><a id="11622" href="/20.07/Isomorphism/#11622" class="Function Operator">_≲-∎</a> <a id="11627" class="Symbol">:</a> <a id="11629" class="Symbol">∀</a> <a id="11631" class="Symbol">(</a><a id="11632" href="/20.07/Isomorphism/#11632" class="Bound">A</a> <a id="11634" class="Symbol">:</a> <a id="11636" class="PrimitiveType">Set</a><a id="11639" class="Symbol">)</a>
      <a id="11647" class="Comment">-----</a>
    <a id="11657" class="Symbol">→</a> <a id="11659" href="/20.07/Isomorphism/#11632" class="Bound">A</a> <a id="11661" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11663" href="/20.07/Isomorphism/#11632" class="Bound">A</a>
  <a id="11667" href="/20.07/Isomorphism/#11667" class="Bound">A</a> <a id="11669" href="/20.07/Isomorphism/#11622" class="Function Operator">≲-∎</a> <a id="11673" class="Symbol">=</a> <a id="11675" href="/20.07/Isomorphism/#9720" class="Function">≲-refl</a>

<a id="11683" class="Keyword">open</a> <a id="11688" href="/20.07/Isomorphism/#11343" class="Module">≲-Reasoning</a>
</pre>
<h4 id="exercise--implies--practice">Exercise <code class="language-plaintext highlighter-rouge">≃-implies-≲</code> (practice)</h4>

<p>Show that every isomorphism implies an embedding.</p>
<pre class="Agda"><a id="11799" class="Keyword">postulate</a>
  <a id="≃-implies-≲"></a><a id="11811" href="/20.07/Isomorphism/#11811" class="Postulate">≃-implies-≲</a> <a id="11823" class="Symbol">:</a> <a id="11825" class="Symbol">∀</a> <a id="11827" class="Symbol">{</a><a id="11828" href="/20.07/Isomorphism/#11828" class="Bound">A</a> <a id="11830" href="/20.07/Isomorphism/#11830" class="Bound">B</a> <a id="11832" class="Symbol">:</a> <a id="11834" class="PrimitiveType">Set</a><a id="11837" class="Symbol">}</a>
    <a id="11843" class="Symbol">→</a> <a id="11845" href="/20.07/Isomorphism/#11828" class="Bound">A</a> <a id="11847" href="/20.07/Isomorphism/#4365" class="Record Operator">≃</a> <a id="11849" href="/20.07/Isomorphism/#11830" class="Bound">B</a>
      <a id="11857" class="Comment">-----</a>
    <a id="11867" class="Symbol">→</a> <a id="11869" href="/20.07/Isomorphism/#11828" class="Bound">A</a> <a id="11871" href="/20.07/Isomorphism/#9281" class="Record Operator">≲</a> <a id="11873" href="/20.07/Isomorphism/#11830" class="Bound">B</a>
</pre>
<pre class="Agda"><a id="11884" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="iff">Exercise <code class="language-plaintext highlighter-rouge">_⇔_</code> (practice)</h4>

<p>Define equivalence of propositions (also known as “if and only if”) as follows:</p>
<pre class="Agda"><a id="12035" class="Keyword">record</a> <a id="_⇔_"></a><a id="12042" href="/20.07/Isomorphism/#12042" class="Record Operator">_⇔_</a> <a id="12046" class="Symbol">(</a><a id="12047" href="/20.07/Isomorphism/#12047" class="Bound">A</a> <a id="12049" href="/20.07/Isomorphism/#12049" class="Bound">B</a> <a id="12051" class="Symbol">:</a> <a id="12053" class="PrimitiveType">Set</a><a id="12056" class="Symbol">)</a> <a id="12058" class="Symbol">:</a> <a id="12060" class="PrimitiveType">Set</a> <a id="12064" class="Keyword">where</a>
  <a id="12072" class="Keyword">field</a>
    <a id="_⇔_.to"></a><a id="12082" href="/20.07/Isomorphism/#12082" class="Field">to</a>   <a id="12087" class="Symbol">:</a> <a id="12089" href="/20.07/Isomorphism/#12047" class="Bound">A</a> <a id="12091" class="Symbol">→</a> <a id="12093" href="/20.07/Isomorphism/#12049" class="Bound">B</a>
    <a id="_⇔_.from"></a><a id="12099" href="/20.07/Isomorphism/#12099" class="Field">from</a> <a id="12104" class="Symbol">:</a> <a id="12106" href="/20.07/Isomorphism/#12049" class="Bound">B</a> <a id="12108" class="Symbol">→</a> <a id="12110" href="/20.07/Isomorphism/#12047" class="Bound">A</a>
</pre>
<p>Show that equivalence is reflexive, symmetric, and transitive.</p>

<pre class="Agda"><a id="12184" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="Bin-embedding">Exercise <code class="language-plaintext highlighter-rouge">Bin-embedding</code> (stretch)</h4>

<p>Recall that Exercises
<a href="/20.07/Naturals/#Bin">Bin</a> and
<a href="/20.07/Induction/#Bin-laws">Bin-laws</a>
define a datatype <code class="language-plaintext highlighter-rouge">Bin</code> of bitstrings representing natural numbers,
and asks you to define the following functions and predicates:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>to : ℕ → Bin
from : Bin → ℕ
</code></pre></div></div>

<p>which satisfy the following property:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from (to n) ≡ n
</code></pre></div></div>

<p>Using the above, establish that there is an embedding of <code class="language-plaintext highlighter-rouge">ℕ</code> into <code class="language-plaintext highlighter-rouge">Bin</code>.</p>
<pre class="Agda"><a id="12693" class="Comment">-- Your code goes here</a>
</pre>
<p>Why do <code class="language-plaintext highlighter-rouge">to</code> and <code class="language-plaintext highlighter-rouge">from</code> not form an isomorphism?</p>

<h2 id="standard-library">Standard library</h2>

<p>Definitions similar to those in this chapter can be found in the standard library:</p>
<pre class="Agda"><a id="12878" class="Keyword">import</a> <a id="12885" href="https://agda.github.io/agda-stdlib/v1.1/Function.html" class="Module">Function</a> <a id="12894" class="Keyword">using</a> <a id="12900" class="Symbol">(</a><a id="12901" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">_∘_</a><a id="12904" class="Symbol">)</a>
<a id="12906" class="Keyword">import</a> <a id="12913" href="https://agda.github.io/agda-stdlib/v1.1/Function.Inverse.html" class="Module">Function.Inverse</a> <a id="12930" class="Keyword">using</a> <a id="12936" class="Symbol">(</a><a id="12937" href="https://agda.github.io/agda-stdlib/v1.1/Function.Inverse.html#2229" class="Function Operator">_↔_</a><a id="12940" class="Symbol">)</a>
<a id="12942" class="Keyword">import</a> <a id="12949" href="https://agda.github.io/agda-stdlib/v1.1/Function.LeftInverse.html" class="Module">Function.LeftInverse</a> <a id="12970" class="Keyword">using</a> <a id="12976" class="Symbol">(</a><a id="12977" href="https://agda.github.io/agda-stdlib/v1.1/Function.LeftInverse.html#2682" class="Function Operator">_↞_</a><a id="12980" class="Symbol">)</a>
</pre>
<p>The standard library <code class="language-plaintext highlighter-rouge">_↔_</code> and <code class="language-plaintext highlighter-rouge">_↞_</code> correspond to our <code class="language-plaintext highlighter-rouge">_≃_</code> and
<code class="language-plaintext highlighter-rouge">_≲_</code>, respectively, but those in the standard library are less
convenient, since they depend on a nested record structure and are
parameterised with regard to an arbitrary notion of equivalence.</p>

<h2 id="unicode">Unicode</h2>

<p>This chapter uses the following unicode:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>∘  U+2218  RING OPERATOR (\o, \circ, \comp)
λ  U+03BB  GREEK SMALL LETTER LAMBDA (\lambda, \Gl)
≃  U+2243  ASYMPTOTICALLY EQUAL TO (\~-)
≲  U+2272  LESS-THAN OR EQUIVALENT TO (\&lt;~)
⇔  U+21D4  LEFT RIGHT DOUBLE ARROW (\&lt;=&gt;)
</code></pre></div></div>

  </div>

  <p style="text-align:center;">

    <a alt="Previous chapter" href="/20.07/Equality/">Prev</a>


    &bullet;


    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev-20.07/src/plfa/part1/Isomorphism.lagda.md">Source</a>


    &bullet;


    <a alt="Next chapter" href="/20.07/Connectives/">Next</a>

</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/20.07/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/20.07/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/20.07/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/20.07/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jeremy G. Siek</li>
          <li><a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jsiek"><svg class="svg-icon"><use xlink:href="/20.07/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jsiek</span></a></li><li><a href="https://www.twitter.com/jeremysiek"><svg class="svg-icon"><use xlink:href="/20.07/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jeremysiek</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/20.07/assets/jquery.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha256-E4RlfxwyJVmkkk0szw7LYJxuPlp6evtPSBDlWHsYYL8=" crossorigin="anonymous"></script>
<script type="text/javascript">
  anchors.add();
</script>

<script type="text/javascript">

 // Makes sandwhich menu works
 $('.menu-icon').click(function(){
   $('.trigger').toggle();
 });

 // Script which allows for foldable code blocks
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/20.07/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
