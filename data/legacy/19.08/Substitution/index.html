<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Substitution: Substitution in the untyped lambda calculus | Programming Language Foundations in Agda</title><meta name="generator" content="Jekyll v3.9.0"><meta property="og:title" content="Substitution: Substitution in the untyped lambda calculus"><meta property="og:locale" content="en_US"><meta name="description" content="Programming Language Foundations in Agda"><meta property="og:description" content="Programming Language Foundations in Agda"><link rel="canonical" href="https://plfa.github.io/19.08/Substitution/"><meta property="og:url" content="https://plfa.github.io/19.08/Substitution/"><meta property="og:site_name" content="Programming Language Foundations in Agda"><script type="application/ld+json">{"url":"https://plfa.github.io/19.08/Substitution/","headline":"Substitution: Substitution in the untyped lambda calculus","description":"Programming Language Foundations in Agda","@type":"WebPage","@context":"https://schema.org"}</script><link rel="stylesheet" href="/19.08/assets/main.css"></head><body><header class="site-header" role="banner"><div class="wrapper"><a class="site-title" href="/19.08/">Programming Language Foundations in Agda</a><nav class="site-nav"><span class="menu-icon"><svg viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/></svg></span><div class="trigger"><a class="page-link" href="/19.08/">The Book</a> <a class="page-link" href="/19.08/Announcements/">Announcements</a> <a class="page-link" href="/19.08/GettingStarted/">Getting Started</a> <a class="page-link" href="/19.08/Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><header class="post-header"><h1 class="post-title">Substitution: Substitution in the untyped lambda calculus</h1></header><p style="text-align:center"><a alt="Previous chapter" href="/19.08/ContextualEquivalence/">Prev</a> &bullet; <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev-19.08/src/plfa/part2/Substitution.lagda.md">Source</a> &bullet; <a alt="Next chapter" href="/19.08/Acknowledgements/">Next</a></p><div class="post-content"><pre class="Agda"><a id="198" class="Keyword">module</a> <a id="205" href="/19.08/Substitution/" class="Module">plfa.part2.Substitution</a> <a id="229" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>The primary purpose of this chapter is to prove that substitution commutes with itself. Barendgredt (1984) refers to this as the substitution lemma:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M [x:=N] [y:=L] = M [y:=L] [x:= N[y:=L] ]
</code></pre></div></div><p>In our setting, with de Bruijn indices for variables, the statement of the lemma becomes:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M [ N ] [ L ] ≡  M〔 L 〕[ N [ L ] ]                     (substitution)
</code></pre></div></div><p>where the notation <code class="language-plaintext highlighter-rouge">M 〔 L 〕</code> is for substituting L for index 1 inside M. In addition, because we define substitution in terms of parallel substitution, we have the following generalization, replacing the substitution of L with an arbitrary parallel substitution σ.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subst σ (M [ N ]) ≡ (subst (exts σ) M) [ subst σ N ]    (subst-commute)
</code></pre></div></div><p>The special case for renamings is also useful.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ (M [ N ]) ≡ (rename (ext ρ) M) [ rename ρ N ]
                                                 (rename-subst-commute)
</code></pre></div></div><p>The secondary purpose of this chapter is to define the σ algebra of parallel substitution due to Abadi, Cardelli, Curien, and Levy (1991). The equations of this algebra not only help us prove the substitution lemma, but they are generally useful. Furthermore, when the equations are applied from left to right, they form a rewrite system that <em>decides</em> whether any two substitutions are equal.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="1559" class="Keyword">import</a> <a id="1566" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1604" class="Symbol">as</a> <a id="1607" class="Module">Eq</a>
<a id="1610" class="Keyword">open</a> <a id="1615" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="1618" class="Keyword">using</a> <a id="1624" class="Symbol">(</a><a id="1625" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="1628" class="Symbol">;</a> <a id="1630" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="1634" class="Symbol">;</a> <a id="1636" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a><a id="1639" class="Symbol">;</a> <a id="1641" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="1645" class="Symbol">;</a> <a id="1647" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a><a id="1652" class="Symbol">;</a> <a id="1654" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a><a id="1662" class="Symbol">)</a>
<a id="1664" class="Keyword">open</a> <a id="1669" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2499" class="Module">Eq.≡-Reasoning</a> <a id="1684" class="Keyword">using</a> <a id="1690" class="Symbol">(</a><a id="1691" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin_</a><a id="1697" class="Symbol">;</a> <a id="1699" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">_≡⟨⟩_</a><a id="1704" class="Symbol">;</a> <a id="1706" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">_≡⟨_⟩_</a><a id="1712" class="Symbol">;</a> <a id="1714" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">_∎</a><a id="1716" class="Symbol">)</a>
<a id="1718" class="Keyword">open</a> <a id="1723" class="Keyword">import</a> <a id="1730" href="https://agda.github.io/agda-stdlib/v1.1/Function.html" class="Module">Function</a> <a id="1739" class="Keyword">using</a> <a id="1745" class="Symbol">(</a><a id="1746" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">_∘_</a><a id="1749" class="Symbol">)</a>
<a id="1751" class="Keyword">open</a> <a id="1756" class="Keyword">import</a> <a id="1763" href="/19.08/Untyped/" class="Module">plfa.part2.Untyped</a>
     <a id="1787" class="Keyword">using</a> <a id="1793" class="Symbol">(</a><a id="1794" href="/19.08/Untyped/#2869" class="Datatype">Type</a><a id="1798" class="Symbol">;</a> <a id="1800" href="plfa.part2.Untyped.html#3153" class="Datatype">Context</a><a id="1807" class="Symbol">;</a> <a id="1809" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">_⊢_</a><a id="1812" class="Symbol">;</a> <a id="1814" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="1815" class="Symbol">;</a> <a id="1817" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">_∋_</a><a id="1820" class="Symbol">;</a> <a id="1822" href="plfa.part2.Untyped.html#3175" class="InductiveConstructor">∅</a><a id="1823" class="Symbol">;</a> <a id="1825" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">_,_</a><a id="1828" class="Symbol">;</a> <a id="1830" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="1831" class="Symbol">;</a> <a id="1833" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="1835" class="Symbol">;</a> <a id="1837" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`_</a><a id="1839" class="Symbol">;</a> <a id="1841" href="plfa.part2.Untyped.html#4382" class="InductiveConstructor Operator">ƛ_</a><a id="1843" class="Symbol">;</a> <a id="1845" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">_·_</a><a id="1848" class="Symbol">;</a>
            <a id="1862" href="/19.08/Untyped/#6235" class="Function">rename</a><a id="1868" class="Symbol">;</a> <a id="1870" href="plfa.part2.Untyped.html#6963" class="Function">subst</a><a id="1875" class="Symbol">;</a> <a id="1877" href="plfa.part2.Untyped.html#5925" class="Function">ext</a><a id="1880" class="Symbol">;</a> <a id="1882" href="plfa.part2.Untyped.html#6671" class="Function">exts</a><a id="1886" class="Symbol">;</a> <a id="1888" href="plfa.part2.Untyped.html#7491" class="Function Operator">_[_]</a><a id="1892" class="Symbol">;</a> <a id="1894" href="plfa.part2.Untyped.html#7375" class="Function">subst-zero</a><a id="1904" class="Symbol">)</a>
</pre><pre class="Agda"><a id="1915" class="Keyword">postulate</a>
  <a id="extensionality"></a><a id="1927" href="/19.08/Substitution/#1927" class="Postulate">extensionality</a> <a id="1942" class="Symbol">:</a> <a id="1944" class="Symbol">∀</a> <a id="1946" class="Symbol">{</a><a id="1947" href="plfa.part2.Substitution.html#1947" class="Bound">A</a> <a id="1949" href="plfa.part2.Substitution.html#1949" class="Bound">B</a> <a id="1951" class="Symbol">:</a> <a id="1953" class="PrimitiveType">Set</a><a id="1956" class="Symbol">}</a> <a id="1958" class="Symbol">{</a><a id="1959" href="plfa.part2.Substitution.html#1959" class="Bound">f</a> <a id="1961" href="plfa.part2.Substitution.html#1961" class="Bound">g</a> <a id="1963" class="Symbol">:</a> <a id="1965" href="plfa.part2.Substitution.html#1947" class="Bound">A</a> <a id="1967" class="Symbol">→</a> <a id="1969" href="plfa.part2.Substitution.html#1949" class="Bound">B</a><a id="1970" class="Symbol">}</a>
    <a id="1976" class="Symbol">→</a> <a id="1978" class="Symbol">(∀</a> <a id="1981" class="Symbol">(</a><a id="1982" href="/19.08/Substitution/#1982" class="Bound">x</a> <a id="1984" class="Symbol">:</a> <a id="1986" href="plfa.part2.Substitution.html#1947" class="Bound">A</a><a id="1987" class="Symbol">)</a> <a id="1989" class="Symbol">→</a> <a id="1991" href="plfa.part2.Substitution.html#1959" class="Bound">f</a> <a id="1993" href="plfa.part2.Substitution.html#1982" class="Bound">x</a> <a id="1995" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="1997" href="plfa.part2.Substitution.html#1961" class="Bound">g</a> <a id="1999" href="plfa.part2.Substitution.html#1982" class="Bound">x</a><a id="2000" class="Symbol">)</a>
      <a id="2008" class="Comment">-----------------------</a>
    <a id="2036" class="Symbol">→</a> <a id="2038" href="/19.08/Substitution/#1959" class="Bound">f</a> <a id="2040" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2042" href="plfa.part2.Substitution.html#1961" class="Bound">g</a>
</pre><h2 id="notation">Notation</h2><p>We introduce the following shorthand for the type of a <em>renaming</em> from variables in context <code class="language-plaintext highlighter-rouge">Γ</code> to variables in context <code class="language-plaintext highlighter-rouge">Δ</code>.</p><pre class="Agda"><a id="Rename"></a><a id="2192" href="/19.08/Substitution/#2192" class="Function">Rename</a> <a id="2199" class="Symbol">:</a> <a id="2201" href="/19.08/Untyped/#3153" class="Datatype">Context</a> <a id="2209" class="Symbol">→</a> <a id="2211" href="plfa.part2.Untyped.html#3153" class="Datatype">Context</a> <a id="2219" class="Symbol">→</a> <a id="2221" class="PrimitiveType">Set</a>
<a id="2225" href="/19.08/Substitution/#2192" class="Function">Rename</a> <a id="2232" href="plfa.part2.Substitution.html#2232" class="Bound">Γ</a> <a id="2234" href="plfa.part2.Substitution.html#2234" class="Bound">Δ</a> <a id="2236" class="Symbol">=</a> <a id="2238" class="Symbol">∀{</a><a id="2240" href="plfa.part2.Substitution.html#2240" class="Bound">A</a><a id="2241" class="Symbol">}</a> <a id="2243" class="Symbol">→</a> <a id="2245" href="plfa.part2.Substitution.html#2232" class="Bound">Γ</a> <a id="2247" href="/19.08/Untyped/#3521" class="Datatype Operator">∋</a> <a id="2249" href="plfa.part2.Substitution.html#2240" class="Bound">A</a> <a id="2251" class="Symbol">→</a> <a id="2253" href="plfa.part2.Substitution.html#2234" class="Bound">Δ</a> <a id="2255" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="2257" href="plfa.part2.Substitution.html#2240" class="Bound">A</a>
</pre><p>Similarly, we introduce the following shorthand for the type of a <em>substitution</em> from variables in context <code class="language-plaintext highlighter-rouge">Γ</code> to terms in context <code class="language-plaintext highlighter-rouge">Δ</code>.</p><pre class="Agda"><a id="Subst"></a><a id="2405" href="/19.08/Substitution/#2405" class="Function">Subst</a> <a id="2411" class="Symbol">:</a> <a id="2413" href="/19.08/Untyped/#3153" class="Datatype">Context</a> <a id="2421" class="Symbol">→</a> <a id="2423" href="plfa.part2.Untyped.html#3153" class="Datatype">Context</a> <a id="2431" class="Symbol">→</a> <a id="2433" class="PrimitiveType">Set</a>
<a id="2437" href="/19.08/Substitution/#2405" class="Function">Subst</a> <a id="2443" href="plfa.part2.Substitution.html#2443" class="Bound">Γ</a> <a id="2445" href="plfa.part2.Substitution.html#2445" class="Bound">Δ</a> <a id="2447" class="Symbol">=</a> <a id="2449" class="Symbol">∀{</a><a id="2451" href="plfa.part2.Substitution.html#2451" class="Bound">A</a><a id="2452" class="Symbol">}</a> <a id="2454" class="Symbol">→</a> <a id="2456" href="plfa.part2.Substitution.html#2443" class="Bound">Γ</a> <a id="2458" href="/19.08/Untyped/#3521" class="Datatype Operator">∋</a> <a id="2460" href="plfa.part2.Substitution.html#2451" class="Bound">A</a> <a id="2462" class="Symbol">→</a> <a id="2464" href="plfa.part2.Substitution.html#2445" class="Bound">Δ</a> <a id="2466" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="2468" href="plfa.part2.Substitution.html#2451" class="Bound">A</a>
</pre><p>We use the following more succinct notation the <code class="language-plaintext highlighter-rouge">subst</code> function.</p><pre class="Agda"><a id="⟪_⟫"></a><a id="2546" href="/19.08/Substitution/#2546" class="Function Operator">⟪_⟫</a> <a id="2550" class="Symbol">:</a> <a id="2552" class="Symbol">∀{</a><a id="2554" href="plfa.part2.Substitution.html#2554" class="Bound">Γ</a> <a id="2556" href="plfa.part2.Substitution.html#2556" class="Bound">Δ</a> <a id="2558" href="plfa.part2.Substitution.html#2558" class="Bound">A</a><a id="2559" class="Symbol">}</a> <a id="2561" class="Symbol">→</a> <a id="2563" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="2569" href="plfa.part2.Substitution.html#2554" class="Bound">Γ</a> <a id="2571" href="plfa.part2.Substitution.html#2556" class="Bound">Δ</a> <a id="2573" class="Symbol">→</a> <a id="2575" href="plfa.part2.Substitution.html#2554" class="Bound">Γ</a> <a id="2577" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="2579" href="plfa.part2.Substitution.html#2558" class="Bound">A</a> <a id="2581" class="Symbol">→</a> <a id="2583" href="plfa.part2.Substitution.html#2556" class="Bound">Δ</a> <a id="2585" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="2587" href="plfa.part2.Substitution.html#2558" class="Bound">A</a>
<a id="2589" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="2591" href="plfa.part2.Substitution.html#2591" class="Bound">σ</a> <a id="2593" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="2595" class="Symbol">=</a> <a id="2597" class="Symbol">λ</a> <a id="2599" href="plfa.part2.Substitution.html#2599" class="Bound">M</a> <a id="2601" class="Symbol">→</a> <a id="2603" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="2609" href="plfa.part2.Substitution.html#2591" class="Bound">σ</a> <a id="2611" href="plfa.part2.Substitution.html#2599" class="Bound">M</a>
</pre><h2 id="the-σ-algebra-of-substitution">The σ algebra of substitution</h2><p>Substitutions map de Bruijn indices (natural numbers) to terms, so we can view a substitution simply as a sequence of terms, or more precisely, as an infinite sequence of terms. The σ algebra consists of four operations for building such sequences: identity <code class="language-plaintext highlighter-rouge">ids</code>, shift <code class="language-plaintext highlighter-rouge">↑</code>, cons <code class="language-plaintext highlighter-rouge">M • σ</code>, and sequencing <code class="language-plaintext highlighter-rouge">σ ⨟ τ</code>. The sequence <code class="language-plaintext highlighter-rouge">0, 1, 2, ...</code> is constructed by the identity substitution.</p><pre class="Agda"><a id="ids"></a><a id="3046" href="/19.08/Substitution/#3046" class="Function">ids</a> <a id="3050" class="Symbol">:</a> <a id="3052" class="Symbol">∀{</a><a id="3054" href="plfa.part2.Substitution.html#3054" class="Bound">Γ</a><a id="3055" class="Symbol">}</a> <a id="3057" class="Symbol">→</a> <a id="3059" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3065" href="plfa.part2.Substitution.html#3054" class="Bound">Γ</a> <a id="3067" href="plfa.part2.Substitution.html#3054" class="Bound">Γ</a>
<a id="3069" href="/19.08/Substitution/#3046" class="Function">ids</a> <a id="3073" href="plfa.part2.Substitution.html#3073" class="Bound">x</a> <a id="3075" class="Symbol">=</a> <a id="3077" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="3079" href="plfa.part2.Substitution.html#3073" class="Bound">x</a>
</pre><p>The shift operation <code class="language-plaintext highlighter-rouge">↑</code> constructs the sequence</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1, 2, 3, ...
</code></pre></div></div><p>and is defined as follows.</p><pre class="Agda"><a id="↑"></a><a id="3185" href="/19.08/Substitution/#3185" class="Function">↑</a> <a id="3187" class="Symbol">:</a> <a id="3189" class="Symbol">∀{</a><a id="3191" href="plfa.part2.Substitution.html#3191" class="Bound">Γ</a> <a id="3193" href="plfa.part2.Substitution.html#3193" class="Bound">A</a><a id="3194" class="Symbol">}</a> <a id="3196" class="Symbol">→</a> <a id="3198" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3204" href="plfa.part2.Substitution.html#3191" class="Bound">Γ</a> <a id="3206" class="Symbol">(</a><a id="3207" href="plfa.part2.Substitution.html#3191" class="Bound">Γ</a> <a id="3209" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="3211" href="plfa.part2.Substitution.html#3193" class="Bound">A</a><a id="3212" class="Symbol">)</a>
<a id="3214" href="/19.08/Substitution/#3185" class="Function">↑</a> <a id="3216" href="plfa.part2.Substitution.html#3216" class="Bound">x</a> <a id="3218" class="Symbol">=</a> <a id="3220" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="3222" class="Symbol">(</a><a id="3223" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S</a> <a id="3225" href="plfa.part2.Substitution.html#3216" class="Bound">x</a><a id="3226" class="Symbol">)</a>
</pre><p>Given a term <code class="language-plaintext highlighter-rouge">M</code> and substitution <code class="language-plaintext highlighter-rouge">σ</code>, the operation <code class="language-plaintext highlighter-rouge">M • σ</code> constructs the sequence</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M , σ 0, σ 1, σ 2, ...
</code></pre></div></div><p>This operation is analogous to the <code class="language-plaintext highlighter-rouge">cons</code> operation of Lisp.</p><pre class="Agda"><a id="3413" class="Keyword">infixr</a> <a id="3420" class="Number">6</a> <a id="3422" href="/19.08/Substitution/#3427" class="Function Operator">_•_</a>

<a id="_•_"></a><a id="3427" href="/19.08/Substitution/#3427" class="Function Operator">_•_</a> <a id="3431" class="Symbol">:</a> <a id="3433" class="Symbol">∀{</a><a id="3435" href="plfa.part2.Substitution.html#3435" class="Bound">Γ</a> <a id="3437" href="plfa.part2.Substitution.html#3437" class="Bound">Δ</a> <a id="3439" href="plfa.part2.Substitution.html#3439" class="Bound">A</a><a id="3440" class="Symbol">}</a> <a id="3442" class="Symbol">→</a> <a id="3444" class="Symbol">(</a><a id="3445" href="plfa.part2.Substitution.html#3437" class="Bound">Δ</a> <a id="3447" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="3449" href="plfa.part2.Substitution.html#3439" class="Bound">A</a><a id="3450" class="Symbol">)</a> <a id="3452" class="Symbol">→</a> <a id="3454" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3460" href="plfa.part2.Substitution.html#3435" class="Bound">Γ</a> <a id="3462" href="plfa.part2.Substitution.html#3437" class="Bound">Δ</a> <a id="3464" class="Symbol">→</a> <a id="3466" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3472" class="Symbol">(</a><a id="3473" href="plfa.part2.Substitution.html#3435" class="Bound">Γ</a> <a id="3475" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="3477" href="plfa.part2.Substitution.html#3439" class="Bound">A</a><a id="3478" class="Symbol">)</a> <a id="3480" href="plfa.part2.Substitution.html#3437" class="Bound">Δ</a>
<a id="3482" class="Symbol">(</a><a id="3483" href="/19.08/Substitution/#3483" class="Bound">M</a> <a id="3485" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="3487" href="plfa.part2.Substitution.html#3487" class="Bound">σ</a><a id="3488" class="Symbol">)</a> <a id="3490" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="3492" class="Symbol">=</a> <a id="3494" href="plfa.part2.Substitution.html#3483" class="Bound">M</a>
<a id="3496" class="Symbol">(</a><a id="3497" href="/19.08/Substitution/#3497" class="Bound">M</a> <a id="3499" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="3501" href="plfa.part2.Substitution.html#3501" class="Bound">σ</a><a id="3502" class="Symbol">)</a> <a id="3504" class="Symbol">(</a><a id="3505" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="3507" href="plfa.part2.Substitution.html#3507" class="Bound">x</a><a id="3508" class="Symbol">)</a> <a id="3510" class="Symbol">=</a> <a id="3512" href="plfa.part2.Substitution.html#3501" class="Bound">σ</a> <a id="3514" href="plfa.part2.Substitution.html#3507" class="Bound">x</a>
</pre><p>Given two substitutions <code class="language-plaintext highlighter-rouge">σ</code> and <code class="language-plaintext highlighter-rouge">τ</code>, the sequencing operation <code class="language-plaintext highlighter-rouge">σ ⨟ τ</code> produces the sequence</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⟪τ⟫(σ 0), ⟪τ⟫(σ 1), ⟪τ⟫(σ 2), ...
</code></pre></div></div><p>That is, it composes the two substitutions by first applying <code class="language-plaintext highlighter-rouge">σ</code> and then applying <code class="language-plaintext highlighter-rouge">τ</code>.</p><pre class="Agda"><a id="3746" class="Keyword">infixr</a> <a id="3753" class="Number">5</a> <a id="3755" href="/19.08/Substitution/#3760" class="Function Operator">_⨟_</a>

<a id="_⨟_"></a><a id="3760" href="/19.08/Substitution/#3760" class="Function Operator">_⨟_</a> <a id="3764" class="Symbol">:</a> <a id="3766" class="Symbol">∀{</a><a id="3768" href="plfa.part2.Substitution.html#3768" class="Bound">Γ</a> <a id="3770" href="plfa.part2.Substitution.html#3770" class="Bound">Δ</a> <a id="3772" href="plfa.part2.Substitution.html#3772" class="Bound">Σ</a><a id="3773" class="Symbol">}</a> <a id="3775" class="Symbol">→</a> <a id="3777" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3783" href="plfa.part2.Substitution.html#3768" class="Bound">Γ</a> <a id="3785" href="plfa.part2.Substitution.html#3770" class="Bound">Δ</a> <a id="3787" class="Symbol">→</a> <a id="3789" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3795" href="plfa.part2.Substitution.html#3770" class="Bound">Δ</a> <a id="3797" href="plfa.part2.Substitution.html#3772" class="Bound">Σ</a> <a id="3799" class="Symbol">→</a> <a id="3801" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="3807" href="plfa.part2.Substitution.html#3768" class="Bound">Γ</a> <a id="3809" href="plfa.part2.Substitution.html#3772" class="Bound">Σ</a>
<a id="3811" href="/19.08/Substitution/#3811" class="Bound">σ</a> <a id="3813" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="3815" href="plfa.part2.Substitution.html#3815" class="Bound">τ</a> <a id="3817" class="Symbol">=</a> <a id="3819" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="3821" href="plfa.part2.Substitution.html#3815" class="Bound">τ</a> <a id="3823" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="3825" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="3827" href="plfa.part2.Substitution.html#3811" class="Bound">σ</a>
</pre><p>For the sequencing operation, Abadi et al. use the notation of function composition, writing <code class="language-plaintext highlighter-rouge">σ ∘ τ</code>, but still with <code class="language-plaintext highlighter-rouge">σ</code> applied before <code class="language-plaintext highlighter-rouge">τ</code>, which is the opposite of standard mathematical practice. We instead write <code class="language-plaintext highlighter-rouge">σ ⨟ τ</code>, because semicolon is the standard notation for forward function composition.</p><h2 id="the-σ-algebra-equations">The σ algebra equations</h2><p>The σ algebra includes the following equations.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(sub-head)  ⟪ M • σ ⟫ (` Z) ≡ M
(sub-tail)  ↑ ⨟ (M • σ)    ≡ σ
(sub-η)     (⟪ σ ⟫ (` Z)) • (↑ ⨟ σ) ≡ σ
(Z-shift)   (` Z) • ↑      ≡ ids

(sub-id)    ⟪ ids ⟫ M      ≡ M
(sub-app)   ⟪ σ ⟫ (L · M)  ≡ (⟪ σ ⟫ L) · (⟪ σ ⟫ M)
(sub-abs)   ⟪ σ ⟫ (ƛ N)    ≡ ƛ ⟪ σ ⟫ N
(sub-sub)   ⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M

(sub-idL)   ids ⨟ σ        ≡ σ
(sub-idR)   σ ⨟ ids        ≡ σ
(sub-assoc) (σ ⨟ τ) ⨟ θ    ≡ σ ⨟ (τ ⨟ θ)
(sub-dist)  (M • σ) ⨟ τ    ≡ (⟪ τ ⟫ M) • (σ ⨟ τ)
</code></pre></div></div><p>The first group of equations describe how the <code class="language-plaintext highlighter-rouge">•</code> operator acts like cons. The equation <code class="language-plaintext highlighter-rouge">sub-head</code> says that the variable zero <code class="language-plaintext highlighter-rouge">Z</code> returns the head of the sequence (it acts like the <code class="language-plaintext highlighter-rouge">car</code> of Lisp). Similarly, <code class="language-plaintext highlighter-rouge">sub-tail</code> says that sequencing with shift <code class="language-plaintext highlighter-rouge">↑</code> returns the tail of the sequence (it acts like <code class="language-plaintext highlighter-rouge">cdr</code> of Lisp). The <code class="language-plaintext highlighter-rouge">sub-η</code> equation is the η-expansion rule for sequences, saying that taking the head and tail of a sequence, and then cons’ing them together yields the original sequence. The <code class="language-plaintext highlighter-rouge">Z-shift</code> equation says that cons’ing zero onto the shifted sequence produces the identity sequence.</p><p>The next four equations involve applying substitutions to terms. The equation <code class="language-plaintext highlighter-rouge">sub-id</code> says that the identity substitution returns the term unchanged. The equations <code class="language-plaintext highlighter-rouge">sub-app</code> and <code class="language-plaintext highlighter-rouge">sub-abs</code> says that substitution is a congruence for the lambda calculus. The <code class="language-plaintext highlighter-rouge">sub-sub</code> equation says that the sequence operator <code class="language-plaintext highlighter-rouge">⨟</code> behaves as intended.</p><p>The last four equations concern the sequencing of substitutions. The first two equations, <code class="language-plaintext highlighter-rouge">sub-idL</code> and <code class="language-plaintext highlighter-rouge">sub-idR</code>, say that <code class="language-plaintext highlighter-rouge">ids</code> is the left and right unit of the sequencing operator. The <code class="language-plaintext highlighter-rouge">sub-assoc</code> equation says that sequencing is associative. Finally, <code class="language-plaintext highlighter-rouge">sub-dist</code> says that post-sequencing distributes through cons.</p><h2 id="relating-the-σ-algebra-and-substitution-functions">Relating the σ algebra and substitution functions</h2><p>The definitions of substitution <code class="language-plaintext highlighter-rouge">N [ M ]</code> and parallel substitution <code class="language-plaintext highlighter-rouge">subst σ N</code> depend on several auxiliary functions: <code class="language-plaintext highlighter-rouge">rename</code>, <code class="language-plaintext highlighter-rouge">exts</code>, <code class="language-plaintext highlighter-rouge">ext</code>, and <code class="language-plaintext highlighter-rouge">subst-zero</code>. We shall relate those functions to terms in the σ algebra.</p><p>To begin with, renaming can be expressed in terms of substitution. We have</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ M ≡ ⟪ ren ρ ⟫ M               (rename-subst-ren)
</code></pre></div></div><p>where <code class="language-plaintext highlighter-rouge">ren</code> turns a renaming <code class="language-plaintext highlighter-rouge">ρ</code> into a substitution by post-composing <code class="language-plaintext highlighter-rouge">ρ</code> with the identity substitution.</p><pre class="Agda"><a id="ren"></a><a id="6498" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="6502" class="Symbol">:</a> <a id="6504" class="Symbol">∀{</a><a id="6506" href="plfa.part2.Substitution.html#6506" class="Bound">Γ</a> <a id="6508" href="plfa.part2.Substitution.html#6508" class="Bound">Δ</a><a id="6509" class="Symbol">}</a> <a id="6511" class="Symbol">→</a> <a id="6513" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="6520" href="plfa.part2.Substitution.html#6506" class="Bound">Γ</a> <a id="6522" href="plfa.part2.Substitution.html#6508" class="Bound">Δ</a> <a id="6524" class="Symbol">→</a> <a id="6526" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="6532" href="plfa.part2.Substitution.html#6506" class="Bound">Γ</a> <a id="6534" href="plfa.part2.Substitution.html#6508" class="Bound">Δ</a>
<a id="6536" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="6540" href="plfa.part2.Substitution.html#6540" class="Bound">ρ</a> <a id="6542" class="Symbol">=</a> <a id="6544" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="6548" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="6550" href="plfa.part2.Substitution.html#6540" class="Bound">ρ</a>
</pre><p>When the renaming is the increment function, then it is equivalent to shift.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ren S_ ≡ ↑                             (ren-shift)

rename S_ M ≡ ⟪ ↑ ⟫ M                  (rename-shift)
</code></pre></div></div><p>Renaming with the identity renaming leaves the term unchanged.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename (λ {A} x → x) M ≡ M             (rename-id)
</code></pre></div></div><p>Next we relate the <code class="language-plaintext highlighter-rouge">exts</code> function to the σ algebra. Recall that the <code class="language-plaintext highlighter-rouge">exts</code> function extends a substitution as follows:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts σ = ` Z, rename S_ (σ 0), rename S_ (σ 1), rename S_ (σ 2), ...
</code></pre></div></div><p>So <code class="language-plaintext highlighter-rouge">exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code class="language-plaintext highlighter-rouge">σ</code> and then shifting.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts σ ≡ ` Z • (σ ⨟ ↑)                (exts-cons-shift)
</code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">ext</code> function does the same job as <code class="language-plaintext highlighter-rouge">exts</code> but for renamings instead of substitutions. So composing <code class="language-plaintext highlighter-rouge">ext</code> with <code class="language-plaintext highlighter-rouge">ren</code> is the same as composing <code class="language-plaintext highlighter-rouge">ren</code> with <code class="language-plaintext highlighter-rouge">exts</code>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ren (ext ρ) ≡ exts (ren ρ)            (ren-ext)
</code></pre></div></div><p>Thus, we can recast the <code class="language-plaintext highlighter-rouge">exts-cons-shift</code> equation in terms of renamings.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ren (ext ρ) ≡ ` Z • (ren ρ ⨟ ↑)       (ext-cons-Z-shift)
</code></pre></div></div><p>It is also useful to specialize the <code class="language-plaintext highlighter-rouge">sub-sub</code> equation of the σ algebra to the situation where the first substitution is a renaming.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⟪ σ ⟫ (rename ρ M) ≡ ⟪ σ ∘ ρ ⟫ M       (rename-subst)
</code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">subst-zero M</code> substitution is equivalent to cons’ing <code class="language-plaintext highlighter-rouge">M</code> onto the identity substitution.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subst-zero M ≡ M • ids                (subst-Z-cons-ids)
</code></pre></div></div><p>Finally, sequencing <code class="language-plaintext highlighter-rouge">exts σ</code> with <code class="language-plaintext highlighter-rouge">subst-zero M</code> is equivalent to cons’ing <code class="language-plaintext highlighter-rouge">M</code> onto <code class="language-plaintext highlighter-rouge">σ</code>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts σ ⨟ subst-zero M ≡ (M • σ)       (subst-zero-exts-cons)
</code></pre></div></div><h2 id="proofs-of-sub-head-sub-tail-sub-η-z-shift-sub-idl-sub-dist-and-sub-app">Proofs of sub-head, sub-tail, sub-η, Z-shift, sub-idL, sub-dist, and sub-app</h2><p>We start with the proofs that are immediate from the definitions of the operators.</p><pre class="Agda"><a id="sub-head"></a><a id="8259" href="/19.08/Substitution/#8259" class="Function">sub-head</a> <a id="8268" class="Symbol">:</a> <a id="8270" class="Symbol">∀</a> <a id="8272" class="Symbol">{</a><a id="8273" href="plfa.part2.Substitution.html#8273" class="Bound">Γ</a> <a id="8275" href="plfa.part2.Substitution.html#8275" class="Bound">Δ</a><a id="8276" class="Symbol">}</a> <a id="8278" class="Symbol">{</a><a id="8279" href="plfa.part2.Substitution.html#8279" class="Bound">A</a><a id="8280" class="Symbol">}</a> <a id="8282" class="Symbol">{</a><a id="8283" href="plfa.part2.Substitution.html#8283" class="Bound">M</a> <a id="8285" class="Symbol">:</a> <a id="8287" href="plfa.part2.Substitution.html#8275" class="Bound">Δ</a> <a id="8289" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="8291" href="plfa.part2.Substitution.html#8279" class="Bound">A</a><a id="8292" class="Symbol">}{</a><a id="8294" href="plfa.part2.Substitution.html#8294" class="Bound">σ</a> <a id="8296" class="Symbol">:</a> <a id="8298" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="8304" href="plfa.part2.Substitution.html#8273" class="Bound">Γ</a> <a id="8306" href="plfa.part2.Substitution.html#8275" class="Bound">Δ</a><a id="8307" class="Symbol">}</a>
         <a id="8318" class="Symbol">→</a> <a id="8320" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="8322" href="plfa.part2.Substitution.html#8283" class="Bound">M</a> <a id="8324" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="8326" href="plfa.part2.Substitution.html#8294" class="Bound">σ</a> <a id="8328" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="8330" class="Symbol">(</a><a id="8331" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="8333" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="8334" class="Symbol">)</a> <a id="8336" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8338" href="plfa.part2.Substitution.html#8283" class="Bound">M</a>
<a id="8340" href="/19.08/Substitution/#8259" class="Function">sub-head</a> <a id="8349" class="Symbol">=</a> <a id="8351" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="sub-tail"></a><a id="8365" href="/19.08/Substitution/#8365" class="Function">sub-tail</a> <a id="8374" class="Symbol">:</a> <a id="8376" class="Symbol">∀{</a><a id="8378" href="plfa.part2.Substitution.html#8378" class="Bound">Γ</a> <a id="8380" href="plfa.part2.Substitution.html#8380" class="Bound">Δ</a><a id="8381" class="Symbol">}</a> <a id="8383" class="Symbol">{</a><a id="8384" href="plfa.part2.Substitution.html#8384" class="Bound">A</a> <a id="8386" href="plfa.part2.Substitution.html#8386" class="Bound">B</a><a id="8387" class="Symbol">}</a> <a id="8389" class="Symbol">{</a><a id="8390" href="plfa.part2.Substitution.html#8390" class="Bound">M</a> <a id="8392" class="Symbol">:</a> <a id="8394" href="plfa.part2.Substitution.html#8380" class="Bound">Δ</a> <a id="8396" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="8398" href="plfa.part2.Substitution.html#8384" class="Bound">A</a><a id="8399" class="Symbol">}</a> <a id="8401" class="Symbol">{</a><a id="8402" href="plfa.part2.Substitution.html#8402" class="Bound">σ</a> <a id="8404" class="Symbol">:</a> <a id="8406" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="8412" href="plfa.part2.Substitution.html#8378" class="Bound">Γ</a> <a id="8414" href="plfa.part2.Substitution.html#8380" class="Bound">Δ</a><a id="8415" class="Symbol">}</a>
         <a id="8426" class="Symbol">→</a> <a id="8428" class="Symbol">(</a><a id="8429" href="/19.08/Substitution/#3185" class="Function">↑</a> <a id="8431" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="8433" href="plfa.part2.Substitution.html#8390" class="Bound">M</a> <a id="8435" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="8437" href="plfa.part2.Substitution.html#8402" class="Bound">σ</a><a id="8438" class="Symbol">)</a> <a id="8440" class="Symbol">{</a><a id="8441" class="Argument">A</a> <a id="8443" class="Symbol">=</a> <a id="8445" href="plfa.part2.Substitution.html#8386" class="Bound">B</a><a id="8446" class="Symbol">}</a> <a id="8448" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8450" href="plfa.part2.Substitution.html#8402" class="Bound">σ</a>
<a id="8452" href="/19.08/Substitution/#8365" class="Function">sub-tail</a> <a id="8461" class="Symbol">=</a> <a id="8463" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="8478" class="Symbol">λ</a> <a id="8480" href="plfa.part2.Substitution.html#8480" class="Bound">x</a> <a id="8482" class="Symbol">→</a> <a id="8484" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="sub-η"></a><a id="8498" href="/19.08/Substitution/#8498" class="Function">sub-η</a> <a id="8504" class="Symbol">:</a> <a id="8506" class="Symbol">∀{</a><a id="8508" href="plfa.part2.Substitution.html#8508" class="Bound">Γ</a> <a id="8510" href="plfa.part2.Substitution.html#8510" class="Bound">Δ</a><a id="8511" class="Symbol">}</a> <a id="8513" class="Symbol">{</a><a id="8514" href="plfa.part2.Substitution.html#8514" class="Bound">A</a> <a id="8516" href="plfa.part2.Substitution.html#8516" class="Bound">B</a><a id="8517" class="Symbol">}</a> <a id="8519" class="Symbol">{</a><a id="8520" href="plfa.part2.Substitution.html#8520" class="Bound">σ</a> <a id="8522" class="Symbol">:</a> <a id="8524" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="8530" class="Symbol">(</a><a id="8531" href="plfa.part2.Substitution.html#8508" class="Bound">Γ</a> <a id="8533" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="8535" href="plfa.part2.Substitution.html#8514" class="Bound">A</a><a id="8536" class="Symbol">)</a> <a id="8538" href="plfa.part2.Substitution.html#8510" class="Bound">Δ</a><a id="8539" class="Symbol">}</a>
      <a id="8547" class="Symbol">→</a> <a id="8549" class="Symbol">(</a><a id="8550" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="8552" href="plfa.part2.Substitution.html#8520" class="Bound">σ</a> <a id="8554" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="8556" class="Symbol">(</a><a id="8557" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="8559" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="8560" class="Symbol">)</a> <a id="8562" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="8564" class="Symbol">(</a><a id="8565" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="8567" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="8569" href="plfa.part2.Substitution.html#8520" class="Bound">σ</a><a id="8570" class="Symbol">))</a> <a id="8573" class="Symbol">{</a><a id="8574" class="Argument">A</a> <a id="8576" class="Symbol">=</a> <a id="8578" href="plfa.part2.Substitution.html#8516" class="Bound">B</a><a id="8579" class="Symbol">}</a> <a id="8581" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8583" href="plfa.part2.Substitution.html#8520" class="Bound">σ</a>
<a id="8585" href="/19.08/Substitution/#8498" class="Function">sub-η</a> <a id="8591" class="Symbol">{</a><a id="8592" href="plfa.part2.Substitution.html#8592" class="Bound">Γ</a><a id="8593" class="Symbol">}{</a><a id="8595" href="plfa.part2.Substitution.html#8595" class="Bound">Δ</a><a id="8596" class="Symbol">}{</a><a id="8598" href="plfa.part2.Substitution.html#8598" class="Bound">A</a><a id="8599" class="Symbol">}{</a><a id="8601" href="plfa.part2.Substitution.html#8601" class="Bound">B</a><a id="8602" class="Symbol">}{</a><a id="8604" href="plfa.part2.Substitution.html#8604" class="Bound">σ</a><a id="8605" class="Symbol">}</a> <a id="8607" class="Symbol">=</a> <a id="8609" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="8624" class="Symbol">λ</a> <a id="8626" href="plfa.part2.Substitution.html#8626" class="Bound">x</a> <a id="8628" class="Symbol">→</a> <a id="8630" href="plfa.part2.Substitution.html#8648" class="Function">lemma</a>
   <a id="8639" class="Keyword">where</a>
   <a id="8648" href="/19.08/Substitution/#8648" class="Function">lemma</a> <a id="8654" class="Symbol">:</a> <a id="8656" class="Symbol">∀</a> <a id="8658" class="Symbol">{</a><a id="8659" href="plfa.part2.Substitution.html#8659" class="Bound">x</a><a id="8660" class="Symbol">}</a> <a id="8662" class="Symbol">→</a> <a id="8664" class="Symbol">((</a><a id="8666" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="8668" href="plfa.part2.Substitution.html#8604" class="Bound">σ</a> <a id="8670" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="8672" class="Symbol">(</a><a id="8673" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="8675" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="8676" class="Symbol">))</a> <a id="8679" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="8681" class="Symbol">(</a><a id="8682" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="8684" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="8686" href="plfa.part2.Substitution.html#8604" class="Bound">σ</a><a id="8687" class="Symbol">))</a> <a id="8690" href="plfa.part2.Substitution.html#8659" class="Bound">x</a> <a id="8692" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8694" href="plfa.part2.Substitution.html#8604" class="Bound">σ</a> <a id="8696" href="plfa.part2.Substitution.html#8659" class="Bound">x</a>
   <a id="8701" href="/19.08/Substitution/#8648" class="Function">lemma</a> <a id="8707" class="Symbol">{</a><a id="8708" class="Argument">x</a> <a id="8710" class="Symbol">=</a> <a id="8712" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="8713" class="Symbol">}</a> <a id="8715" class="Symbol">=</a> <a id="8717" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
   <a id="8725" href="/19.08/Substitution/#8648" class="Function">lemma</a> <a id="8731" class="Symbol">{</a><a id="8732" class="Argument">x</a> <a id="8734" class="Symbol">=</a> <a id="8736" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="8738" href="plfa.part2.Substitution.html#8738" class="Bound">x</a><a id="8739" class="Symbol">}</a> <a id="8741" class="Symbol">=</a> <a id="8743" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="Z-shift"></a><a id="8757" href="/19.08/Substitution/#8757" class="Function">Z-shift</a> <a id="8765" class="Symbol">:</a> <a id="8767" class="Symbol">∀{</a><a id="8769" href="plfa.part2.Substitution.html#8769" class="Bound">Γ</a><a id="8770" class="Symbol">}{</a><a id="8772" href="plfa.part2.Substitution.html#8772" class="Bound">A</a> <a id="8774" href="plfa.part2.Substitution.html#8774" class="Bound">B</a><a id="8775" class="Symbol">}</a>
        <a id="8785" class="Symbol">→</a> <a id="8787" class="Symbol">((</a><a id="8789" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="8791" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="8792" class="Symbol">)</a> <a id="8794" href="/19.08/Substitution/#3427" class="Function Operator">•</a> <a id="8796" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="8797" class="Symbol">)</a> <a id="8799" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8801" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="8805" class="Symbol">{</a><a id="8806" href="plfa.part2.Substitution.html#8769" class="Bound">Γ</a> <a id="8808" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="8810" href="plfa.part2.Substitution.html#8772" class="Bound">A</a><a id="8811" class="Symbol">}</a> <a id="8813" class="Symbol">{</a><a id="8814" href="plfa.part2.Substitution.html#8774" class="Bound">B</a><a id="8815" class="Symbol">}</a>
<a id="8817" href="/19.08/Substitution/#8757" class="Function">Z-shift</a> <a id="8825" class="Symbol">{</a><a id="8826" href="plfa.part2.Substitution.html#8826" class="Bound">Γ</a><a id="8827" class="Symbol">}{</a><a id="8829" href="plfa.part2.Substitution.html#8829" class="Bound">A</a><a id="8830" class="Symbol">}{</a><a id="8832" href="plfa.part2.Substitution.html#8832" class="Bound">B</a><a id="8833" class="Symbol">}</a> <a id="8835" class="Symbol">=</a> <a id="8837" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="8852" href="plfa.part2.Substitution.html#8870" class="Function">lemma</a>
   <a id="8861" class="Keyword">where</a>
   <a id="8870" href="/19.08/Substitution/#8870" class="Function">lemma</a> <a id="8876" class="Symbol">:</a> <a id="8878" class="Symbol">(</a><a id="8879" href="plfa.part2.Substitution.html#8879" class="Bound">x</a> <a id="8881" class="Symbol">:</a> <a id="8883" href="plfa.part2.Substitution.html#8826" class="Bound">Γ</a> <a id="8885" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="8887" href="plfa.part2.Substitution.html#8829" class="Bound">A</a> <a id="8889" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="8891" href="plfa.part2.Substitution.html#8832" class="Bound">B</a><a id="8892" class="Symbol">)</a> <a id="8894" class="Symbol">→</a> <a id="8896" class="Symbol">((</a><a id="8898" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`</a> <a id="8900" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="8901" class="Symbol">)</a> <a id="8903" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="8905" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="8906" class="Symbol">)</a> <a id="8908" href="plfa.part2.Substitution.html#8879" class="Bound">x</a> <a id="8910" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8912" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="8916" href="plfa.part2.Substitution.html#8879" class="Bound">x</a>
   <a id="8921" href="/19.08/Substitution/#8870" class="Function">lemma</a> <a id="8927" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="8929" class="Symbol">=</a> <a id="8931" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
   <a id="8939" href="/19.08/Substitution/#8870" class="Function">lemma</a> <a id="8945" class="Symbol">(</a><a id="8946" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="8948" href="plfa.part2.Substitution.html#8948" class="Bound">y</a><a id="8949" class="Symbol">)</a> <a id="8951" class="Symbol">=</a> <a id="8953" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="sub-idL"></a><a id="8967" href="/19.08/Substitution/#8967" class="Function">sub-idL</a> <a id="8975" class="Symbol">:</a> <a id="8977" class="Symbol">∀{</a><a id="8979" href="plfa.part2.Substitution.html#8979" class="Bound">Γ</a> <a id="8981" href="plfa.part2.Substitution.html#8981" class="Bound">Δ</a><a id="8982" class="Symbol">}</a> <a id="8984" class="Symbol">{</a><a id="8985" href="plfa.part2.Substitution.html#8985" class="Bound">σ</a> <a id="8987" class="Symbol">:</a> <a id="8989" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="8995" href="plfa.part2.Substitution.html#8979" class="Bound">Γ</a> <a id="8997" href="plfa.part2.Substitution.html#8981" class="Bound">Δ</a><a id="8998" class="Symbol">}</a> <a id="9000" class="Symbol">{</a><a id="9001" href="plfa.part2.Substitution.html#9001" class="Bound">A</a><a id="9002" class="Symbol">}</a>
       <a id="9011" class="Symbol">→</a> <a id="9013" href="/19.08/Substitution/#3046" class="Function">ids</a> <a id="9017" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="9019" href="plfa.part2.Substitution.html#8985" class="Bound">σ</a> <a id="9021" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="9023" href="plfa.part2.Substitution.html#8985" class="Bound">σ</a> <a id="9025" class="Symbol">{</a><a id="9026" href="plfa.part2.Substitution.html#9001" class="Bound">A</a><a id="9027" class="Symbol">}</a>
<a id="9029" href="/19.08/Substitution/#8967" class="Function">sub-idL</a> <a id="9037" class="Symbol">=</a> <a id="9039" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="9054" class="Symbol">λ</a> <a id="9056" href="plfa.part2.Substitution.html#9056" class="Bound">x</a> <a id="9058" class="Symbol">→</a> <a id="9060" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="sub-dist"></a><a id="9074" href="/19.08/Substitution/#9074" class="Function">sub-dist</a> <a id="9083" class="Symbol">:</a>  <a id="9086" class="Symbol">∀{</a><a id="9088" href="plfa.part2.Substitution.html#9088" class="Bound">Γ</a> <a id="9090" href="plfa.part2.Substitution.html#9090" class="Bound">Δ</a> <a id="9092" href="plfa.part2.Substitution.html#9092" class="Bound">Σ</a> <a id="9094" class="Symbol">:</a> <a id="9096" href="/19.08/Untyped/#3153" class="Datatype">Context</a><a id="9103" class="Symbol">}</a> <a id="9105" class="Symbol">{</a><a id="9106" href="plfa.part2.Substitution.html#9106" class="Bound">A</a> <a id="9108" href="plfa.part2.Substitution.html#9108" class="Bound">B</a><a id="9109" class="Symbol">}</a> <a id="9111" class="Symbol">{</a><a id="9112" href="plfa.part2.Substitution.html#9112" class="Bound">σ</a> <a id="9114" class="Symbol">:</a> <a id="9116" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="9122" href="plfa.part2.Substitution.html#9088" class="Bound">Γ</a> <a id="9124" href="plfa.part2.Substitution.html#9090" class="Bound">Δ</a><a id="9125" class="Symbol">}</a> <a id="9127" class="Symbol">{</a><a id="9128" href="plfa.part2.Substitution.html#9128" class="Bound">τ</a> <a id="9130" class="Symbol">:</a> <a id="9132" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="9138" href="plfa.part2.Substitution.html#9090" class="Bound">Δ</a> <a id="9140" href="plfa.part2.Substitution.html#9092" class="Bound">Σ</a><a id="9141" class="Symbol">}</a>
              <a id="9157" class="Symbol">{</a><a id="9158" href="/19.08/Substitution/#9158" class="Bound">M</a> <a id="9160" class="Symbol">:</a> <a id="9162" href="plfa.part2.Substitution.html#9090" class="Bound">Δ</a> <a id="9164" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="9166" href="plfa.part2.Substitution.html#9106" class="Bound">A</a><a id="9167" class="Symbol">}</a>
         <a id="9178" class="Symbol">→</a> <a id="9180" class="Symbol">((</a><a id="9182" href="/19.08/Substitution/#9158" class="Bound">M</a> <a id="9184" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="9186" href="plfa.part2.Substitution.html#9112" class="Bound">σ</a><a id="9187" class="Symbol">)</a> <a id="9189" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="9191" href="plfa.part2.Substitution.html#9128" class="Bound">τ</a><a id="9192" class="Symbol">)</a> <a id="9194" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="9196" class="Symbol">((</a><a id="9198" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="9204" href="plfa.part2.Substitution.html#9128" class="Bound">τ</a> <a id="9206" href="plfa.part2.Substitution.html#9158" class="Bound">M</a><a id="9207" class="Symbol">)</a> <a id="9209" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="9211" class="Symbol">(</a><a id="9212" href="plfa.part2.Substitution.html#9112" class="Bound">σ</a> <a id="9214" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="9216" href="plfa.part2.Substitution.html#9128" class="Bound">τ</a><a id="9217" class="Symbol">))</a> <a id="9220" class="Symbol">{</a><a id="9221" href="plfa.part2.Substitution.html#9108" class="Bound">B</a><a id="9222" class="Symbol">}</a>
<a id="9224" href="/19.08/Substitution/#9074" class="Function">sub-dist</a> <a id="9233" class="Symbol">{</a><a id="9234" href="plfa.part2.Substitution.html#9234" class="Bound">Γ</a><a id="9235" class="Symbol">}{</a><a id="9237" href="plfa.part2.Substitution.html#9237" class="Bound">Δ</a><a id="9238" class="Symbol">}{</a><a id="9240" href="plfa.part2.Substitution.html#9240" class="Bound">Σ</a><a id="9241" class="Symbol">}{</a><a id="9243" href="plfa.part2.Substitution.html#9243" class="Bound">A</a><a id="9244" class="Symbol">}{</a><a id="9246" href="plfa.part2.Substitution.html#9246" class="Bound">B</a><a id="9247" class="Symbol">}{</a><a id="9249" href="plfa.part2.Substitution.html#9249" class="Bound">σ</a><a id="9250" class="Symbol">}{</a><a id="9252" href="plfa.part2.Substitution.html#9252" class="Bound">τ</a><a id="9253" class="Symbol">}{</a><a id="9255" href="plfa.part2.Substitution.html#9255" class="Bound">M</a><a id="9256" class="Symbol">}</a> <a id="9258" class="Symbol">=</a> <a id="9260" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="9275" class="Symbol">λ</a> <a id="9277" href="plfa.part2.Substitution.html#9277" class="Bound">x</a> <a id="9279" class="Symbol">→</a> <a id="9281" href="plfa.part2.Substitution.html#9305" class="Function">lemma</a> <a id="9287" class="Symbol">{</a><a id="9288" class="Argument">x</a> <a id="9290" class="Symbol">=</a> <a id="9292" href="plfa.part2.Substitution.html#9277" class="Bound">x</a><a id="9293" class="Symbol">}</a>
  <a id="9297" class="Keyword">where</a>
  <a id="9305" href="/19.08/Substitution/#9305" class="Function">lemma</a> <a id="9311" class="Symbol">:</a> <a id="9313" class="Symbol">∀</a> <a id="9315" class="Symbol">{</a><a id="9316" href="plfa.part2.Substitution.html#9316" class="Bound">x</a> <a id="9318" class="Symbol">:</a> <a id="9320" href="plfa.part2.Substitution.html#9234" class="Bound">Γ</a> <a id="9322" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="9324" href="plfa.part2.Substitution.html#9243" class="Bound">A</a> <a id="9326" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="9328" href="plfa.part2.Substitution.html#9246" class="Bound">B</a><a id="9329" class="Symbol">}</a> <a id="9331" class="Symbol">→</a> <a id="9333" class="Symbol">((</a><a id="9335" href="plfa.part2.Substitution.html#9255" class="Bound">M</a> <a id="9337" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="9339" href="plfa.part2.Substitution.html#9249" class="Bound">σ</a><a id="9340" class="Symbol">)</a> <a id="9342" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="9344" href="plfa.part2.Substitution.html#9252" class="Bound">τ</a><a id="9345" class="Symbol">)</a> <a id="9347" href="plfa.part2.Substitution.html#9316" class="Bound">x</a> <a id="9349" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="9351" class="Symbol">((</a><a id="9353" href="plfa.part2.Untyped.html#6963" class="Function">subst</a> <a id="9359" href="plfa.part2.Substitution.html#9252" class="Bound">τ</a> <a id="9361" href="plfa.part2.Substitution.html#9255" class="Bound">M</a><a id="9362" class="Symbol">)</a> <a id="9364" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="9366" class="Symbol">(</a><a id="9367" href="plfa.part2.Substitution.html#9249" class="Bound">σ</a> <a id="9369" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="9371" href="plfa.part2.Substitution.html#9252" class="Bound">τ</a><a id="9372" class="Symbol">))</a> <a id="9375" href="plfa.part2.Substitution.html#9316" class="Bound">x</a>
  <a id="9379" href="/19.08/Substitution/#9305" class="Function">lemma</a> <a id="9385" class="Symbol">{</a><a id="9386" class="Argument">x</a> <a id="9388" class="Symbol">=</a> <a id="9390" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="9391" class="Symbol">}</a> <a id="9393" class="Symbol">=</a> <a id="9395" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="9402" href="/19.08/Substitution/#9305" class="Function">lemma</a> <a id="9408" class="Symbol">{</a><a id="9409" class="Argument">x</a> <a id="9411" class="Symbol">=</a> <a id="9413" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="9415" href="plfa.part2.Substitution.html#9415" class="Bound">x</a><a id="9416" class="Symbol">}</a> <a id="9418" class="Symbol">=</a> <a id="9420" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="sub-app"></a><a id="9434" href="/19.08/Substitution/#9434" class="Function">sub-app</a> <a id="9442" class="Symbol">:</a> <a id="9444" class="Symbol">∀{</a><a id="9446" href="plfa.part2.Substitution.html#9446" class="Bound">Γ</a> <a id="9448" href="plfa.part2.Substitution.html#9448" class="Bound">Δ</a><a id="9449" class="Symbol">}</a> <a id="9451" class="Symbol">{</a><a id="9452" href="plfa.part2.Substitution.html#9452" class="Bound">σ</a> <a id="9454" class="Symbol">:</a> <a id="9456" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="9462" href="plfa.part2.Substitution.html#9446" class="Bound">Γ</a> <a id="9464" href="plfa.part2.Substitution.html#9448" class="Bound">Δ</a><a id="9465" class="Symbol">}</a> <a id="9467" class="Symbol">{</a><a id="9468" href="plfa.part2.Substitution.html#9468" class="Bound">L</a> <a id="9470" class="Symbol">:</a> <a id="9472" href="plfa.part2.Substitution.html#9446" class="Bound">Γ</a> <a id="9474" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="9476" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="9477" class="Symbol">}{</a><a id="9479" href="plfa.part2.Substitution.html#9479" class="Bound">M</a> <a id="9481" class="Symbol">:</a> <a id="9483" href="plfa.part2.Substitution.html#9446" class="Bound">Γ</a> <a id="9485" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="9487" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="9488" class="Symbol">}</a>
        <a id="9498" class="Symbol">→</a> <a id="9500" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="9502" href="plfa.part2.Substitution.html#9452" class="Bound">σ</a> <a id="9504" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="9506" class="Symbol">(</a><a id="9507" href="plfa.part2.Substitution.html#9468" class="Bound">L</a> <a id="9509" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="9511" href="plfa.part2.Substitution.html#9479" class="Bound">M</a><a id="9512" class="Symbol">)</a>  <a id="9515" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="9517" class="Symbol">(</a><a id="9518" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="9520" href="plfa.part2.Substitution.html#9452" class="Bound">σ</a> <a id="9522" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="9524" href="plfa.part2.Substitution.html#9468" class="Bound">L</a><a id="9525" class="Symbol">)</a> <a id="9527" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">·</a> <a id="9529" class="Symbol">(</a><a id="9530" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="9532" href="plfa.part2.Substitution.html#9452" class="Bound">σ</a> <a id="9534" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="9536" href="plfa.part2.Substitution.html#9479" class="Bound">M</a><a id="9537" class="Symbol">)</a>
<a id="9539" href="/19.08/Substitution/#9434" class="Function">sub-app</a> <a id="9547" class="Symbol">=</a> <a id="9549" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><h2 id="interlude-congruences">Interlude: congruences</h2><p>In this section we establish congruence rules for the σ algebra operators <code class="language-plaintext highlighter-rouge">•</code> and <code class="language-plaintext highlighter-rouge">⨟</code> and for <code class="language-plaintext highlighter-rouge">subst</code> and its helper functions <code class="language-plaintext highlighter-rouge">ext</code>, <code class="language-plaintext highlighter-rouge">rename</code>, <code class="language-plaintext highlighter-rouge">exts</code>, and <code class="language-plaintext highlighter-rouge">subst-zero</code>. These congruence rules help with the equational reasoning in the later sections of this chapter.</p><p>[JGS: I would have liked to prove all of these via cong and cong₂, but I have not yet found a way to make that work. It seems that various implicit parameters get in the way.]</p><pre class="Agda"><a id="cong-ext"></a><a id="10038" href="/19.08/Substitution/#10038" class="Function">cong-ext</a> <a id="10047" class="Symbol">:</a> <a id="10049" class="Symbol">∀{</a><a id="10051" href="plfa.part2.Substitution.html#10051" class="Bound">Γ</a> <a id="10053" href="plfa.part2.Substitution.html#10053" class="Bound">Δ</a><a id="10054" class="Symbol">}{</a><a id="10056" href="plfa.part2.Substitution.html#10056" class="Bound">ρ</a> <a id="10058" href="plfa.part2.Substitution.html#10058" class="Bound">ρ′</a> <a id="10061" class="Symbol">:</a> <a id="10063" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="10070" href="plfa.part2.Substitution.html#10051" class="Bound">Γ</a> <a id="10072" href="plfa.part2.Substitution.html#10053" class="Bound">Δ</a><a id="10073" class="Symbol">}{</a><a id="10075" href="plfa.part2.Substitution.html#10075" class="Bound">B</a><a id="10076" class="Symbol">}</a>
   <a id="10081" class="Symbol">→</a> <a id="10083" class="Symbol">(∀{</a><a id="10086" href="/19.08/Substitution/#10086" class="Bound">A</a><a id="10087" class="Symbol">}</a> <a id="10089" class="Symbol">→</a> <a id="10091" href="plfa.part2.Substitution.html#10056" class="Bound">ρ</a> <a id="10093" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10095" href="plfa.part2.Substitution.html#10058" class="Bound">ρ′</a> <a id="10098" class="Symbol">{</a><a id="10099" href="plfa.part2.Substitution.html#10086" class="Bound">A</a><a id="10100" class="Symbol">})</a>
     <a id="10108" class="Comment">---------------------------------</a>
   <a id="10145" class="Symbol">→</a> <a id="10147" class="Symbol">∀{</a><a id="10149" href="/19.08/Substitution/#10149" class="Bound">A</a><a id="10150" class="Symbol">}</a> <a id="10152" class="Symbol">→</a> <a id="10154" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="10158" href="plfa.part2.Substitution.html#10056" class="Bound">ρ</a> <a id="10160" class="Symbol">{</a><a id="10161" class="Argument">B</a> <a id="10163" class="Symbol">=</a> <a id="10165" href="plfa.part2.Substitution.html#10075" class="Bound">B</a><a id="10166" class="Symbol">}</a> <a id="10168" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10170" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="10174" href="plfa.part2.Substitution.html#10058" class="Bound">ρ′</a> <a id="10177" class="Symbol">{</a><a id="10178" href="plfa.part2.Substitution.html#10149" class="Bound">A</a><a id="10179" class="Symbol">}</a>
<a id="10181" href="/19.08/Substitution/#10038" class="Function">cong-ext</a><a id="10189" class="Symbol">{</a><a id="10190" href="plfa.part2.Substitution.html#10190" class="Bound">Γ</a><a id="10191" class="Symbol">}{</a><a id="10193" href="plfa.part2.Substitution.html#10193" class="Bound">Δ</a><a id="10194" class="Symbol">}{</a><a id="10196" href="plfa.part2.Substitution.html#10196" class="Bound">ρ</a><a id="10197" class="Symbol">}{</a><a id="10199" href="plfa.part2.Substitution.html#10199" class="Bound">ρ′</a><a id="10201" class="Symbol">}{</a><a id="10203" href="plfa.part2.Substitution.html#10203" class="Bound">B</a><a id="10204" class="Symbol">}</a> <a id="10206" href="plfa.part2.Substitution.html#10206" class="Bound">rr</a> <a id="10209" class="Symbol">{</a><a id="10210" href="plfa.part2.Substitution.html#10210" class="Bound">A</a><a id="10211" class="Symbol">}</a> <a id="10213" class="Symbol">=</a> <a id="10215" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="10230" class="Symbol">λ</a> <a id="10232" href="plfa.part2.Substitution.html#10232" class="Bound">x</a> <a id="10234" class="Symbol">→</a> <a id="10236" href="plfa.part2.Substitution.html#10256" class="Function">lemma</a> <a id="10242" class="Symbol">{</a><a id="10243" href="plfa.part2.Substitution.html#10232" class="Bound">x</a><a id="10244" class="Symbol">}</a>
  <a id="10248" class="Keyword">where</a>
  <a id="10256" href="/19.08/Substitution/#10256" class="Function">lemma</a> <a id="10262" class="Symbol">:</a> <a id="10264" class="Symbol">∀{</a><a id="10266" href="plfa.part2.Substitution.html#10266" class="Bound">x</a> <a id="10268" class="Symbol">:</a> <a id="10270" href="plfa.part2.Substitution.html#10190" class="Bound">Γ</a> <a id="10272" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="10274" href="plfa.part2.Substitution.html#10203" class="Bound">B</a> <a id="10276" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="10278" href="plfa.part2.Substitution.html#10210" class="Bound">A</a><a id="10279" class="Symbol">}</a> <a id="10281" class="Symbol">→</a> <a id="10283" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="10287" href="plfa.part2.Substitution.html#10196" class="Bound">ρ</a> <a id="10289" href="plfa.part2.Substitution.html#10266" class="Bound">x</a> <a id="10291" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10293" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="10297" href="plfa.part2.Substitution.html#10199" class="Bound">ρ′</a> <a id="10300" href="plfa.part2.Substitution.html#10266" class="Bound">x</a>
  <a id="10304" href="/19.08/Substitution/#10256" class="Function">lemma</a> <a id="10310" class="Symbol">{</a><a id="10311" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="10312" class="Symbol">}</a> <a id="10314" class="Symbol">=</a> <a id="10316" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="10323" href="/19.08/Substitution/#10256" class="Function">lemma</a> <a id="10329" class="Symbol">{</a><a id="10330" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="10332" href="plfa.part2.Substitution.html#10332" class="Bound">y</a><a id="10333" class="Symbol">}</a> <a id="10335" class="Symbol">=</a> <a id="10337" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="10342" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="10345" class="Symbol">(</a><a id="10346" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="10355" href="plfa.part2.Substitution.html#10206" class="Bound">rr</a> <a id="10358" href="plfa.part2.Substitution.html#10332" class="Bound">y</a><a id="10359" class="Symbol">)</a>
</pre><pre class="Agda"><a id="cong-rename"></a><a id="10370" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="10382" class="Symbol">:</a> <a id="10384" class="Symbol">∀{</a><a id="10386" href="plfa.part2.Substitution.html#10386" class="Bound">Γ</a> <a id="10388" href="plfa.part2.Substitution.html#10388" class="Bound">Δ</a><a id="10389" class="Symbol">}{</a><a id="10391" href="plfa.part2.Substitution.html#10391" class="Bound">ρ</a> <a id="10393" href="plfa.part2.Substitution.html#10393" class="Bound">ρ′</a> <a id="10396" class="Symbol">:</a> <a id="10398" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="10405" href="plfa.part2.Substitution.html#10386" class="Bound">Γ</a> <a id="10407" href="plfa.part2.Substitution.html#10388" class="Bound">Δ</a><a id="10408" class="Symbol">}{</a><a id="10410" href="plfa.part2.Substitution.html#10410" class="Bound">B</a><a id="10411" class="Symbol">}{</a><a id="10413" href="plfa.part2.Substitution.html#10413" class="Bound">M</a> <a id="10415" href="plfa.part2.Substitution.html#10415" class="Bound">M′</a> <a id="10418" class="Symbol">:</a> <a id="10420" href="plfa.part2.Substitution.html#10386" class="Bound">Γ</a> <a id="10422" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="10424" href="plfa.part2.Substitution.html#10410" class="Bound">B</a><a id="10425" class="Symbol">}</a>
        <a id="10435" class="Symbol">→</a> <a id="10437" class="Symbol">(∀{</a><a id="10440" href="/19.08/Substitution/#10440" class="Bound">A</a><a id="10441" class="Symbol">}</a> <a id="10443" class="Symbol">→</a> <a id="10445" href="plfa.part2.Substitution.html#10391" class="Bound">ρ</a> <a id="10447" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10449" href="plfa.part2.Substitution.html#10393" class="Bound">ρ′</a> <a id="10452" class="Symbol">{</a><a id="10453" href="plfa.part2.Substitution.html#10440" class="Bound">A</a><a id="10454" class="Symbol">})</a>  <a id="10458" class="Symbol">→</a>  <a id="10461" href="plfa.part2.Substitution.html#10413" class="Bound">M</a> <a id="10463" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10465" href="plfa.part2.Substitution.html#10415" class="Bound">M′</a>
          <a id="10478" class="Comment">------------------------------</a>
        <a id="10517" class="Symbol">→</a> <a id="10519" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="10526" href="/19.08/Substitution/#10391" class="Bound">ρ</a> <a id="10528" href="plfa.part2.Substitution.html#10413" class="Bound">M</a> <a id="10530" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10532" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="10539" href="plfa.part2.Substitution.html#10393" class="Bound">ρ′</a> <a id="10542" href="plfa.part2.Substitution.html#10413" class="Bound">M</a>
<a id="10544" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="10556" class="Symbol">{</a><a id="10557" class="Argument">M</a> <a id="10559" class="Symbol">=</a> <a id="10561" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="10563" href="plfa.part2.Substitution.html#10563" class="Bound">x</a><a id="10564" class="Symbol">}</a> <a id="10566" href="plfa.part2.Substitution.html#10566" class="Bound">rr</a> <a id="10569" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="10574" class="Symbol">=</a> <a id="10576" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="10581" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`_</a> <a id="10584" class="Symbol">(</a><a id="10585" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="10594" href="plfa.part2.Substitution.html#10566" class="Bound">rr</a> <a id="10597" href="plfa.part2.Substitution.html#10563" class="Bound">x</a><a id="10598" class="Symbol">)</a>
<a id="10600" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="10612" class="Symbol">{</a><a id="10613" class="Argument">ρ</a> <a id="10615" class="Symbol">=</a> <a id="10617" href="plfa.part2.Substitution.html#10617" class="Bound">ρ</a><a id="10618" class="Symbol">}</a> <a id="10620" class="Symbol">{</a><a id="10621" class="Argument">ρ′</a> <a id="10624" class="Symbol">=</a> <a id="10626" href="plfa.part2.Substitution.html#10626" class="Bound">ρ′</a><a id="10628" class="Symbol">}</a> <a id="10630" class="Symbol">{</a><a id="10631" class="Argument">M</a> <a id="10633" class="Symbol">=</a> <a id="10635" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="10637" href="plfa.part2.Substitution.html#10637" class="Bound">N</a><a id="10638" class="Symbol">}</a> <a id="10640" href="plfa.part2.Substitution.html#10640" class="Bound">rr</a> <a id="10643" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="10648" class="Symbol">=</a>
   <a id="10653" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="10658" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="10661" class="Symbol">(</a><a id="10662" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="10674" class="Symbol">{</a><a id="10675" class="Argument">ρ</a> <a id="10677" class="Symbol">=</a> <a id="10679" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="10683" href="plfa.part2.Substitution.html#10617" class="Bound">ρ</a><a id="10684" class="Symbol">}{</a><a id="10686" class="Argument">ρ′</a> <a id="10689" class="Symbol">=</a> <a id="10691" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="10695" href="plfa.part2.Substitution.html#10626" class="Bound">ρ′</a><a id="10697" class="Symbol">}{</a><a id="10699" class="Argument">M</a> <a id="10701" class="Symbol">=</a> <a id="10703" href="plfa.part2.Substitution.html#10637" class="Bound">N</a><a id="10704" class="Symbol">}</a> <a id="10706" class="Symbol">(</a><a id="10707" href="plfa.part2.Substitution.html#10038" class="Function">cong-ext</a> <a id="10716" href="plfa.part2.Substitution.html#10640" class="Bound">rr</a><a id="10718" class="Symbol">)</a> <a id="10720" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="10724" class="Symbol">)</a>
<a id="10726" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="10738" class="Symbol">{</a><a id="10739" class="Argument">M</a> <a id="10741" class="Symbol">=</a> <a id="10743" href="plfa.part2.Substitution.html#10743" class="Bound">L</a> <a id="10745" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="10747" href="plfa.part2.Substitution.html#10747" class="Bound">M</a><a id="10748" class="Symbol">}</a> <a id="10750" href="plfa.part2.Substitution.html#10750" class="Bound">rr</a> <a id="10753" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="10758" class="Symbol">=</a>
   <a id="10763" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="10769" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">_·_</a> <a id="10773" class="Symbol">(</a><a id="10774" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="10786" href="plfa.part2.Substitution.html#10750" class="Bound">rr</a> <a id="10789" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="10793" class="Symbol">)</a> <a id="10795" class="Symbol">(</a><a id="10796" href="plfa.part2.Substitution.html#10370" class="Function">cong-rename</a> <a id="10808" href="plfa.part2.Substitution.html#10750" class="Bound">rr</a> <a id="10811" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="10815" class="Symbol">)</a>
</pre><pre class="Agda"><a id="cong-exts"></a><a id="10826" href="/19.08/Substitution/#10826" class="Function">cong-exts</a> <a id="10836" class="Symbol">:</a> <a id="10838" class="Symbol">∀{</a><a id="10840" href="plfa.part2.Substitution.html#10840" class="Bound">Γ</a> <a id="10842" href="plfa.part2.Substitution.html#10842" class="Bound">Δ</a><a id="10843" class="Symbol">}{</a><a id="10845" href="plfa.part2.Substitution.html#10845" class="Bound">σ</a> <a id="10847" href="plfa.part2.Substitution.html#10847" class="Bound">σ′</a> <a id="10850" class="Symbol">:</a> <a id="10852" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="10858" href="plfa.part2.Substitution.html#10840" class="Bound">Γ</a> <a id="10860" href="plfa.part2.Substitution.html#10842" class="Bound">Δ</a><a id="10861" class="Symbol">}{</a><a id="10863" href="plfa.part2.Substitution.html#10863" class="Bound">B</a><a id="10864" class="Symbol">}</a>
   <a id="10869" class="Symbol">→</a> <a id="10871" class="Symbol">(∀{</a><a id="10874" href="/19.08/Substitution/#10874" class="Bound">A</a><a id="10875" class="Symbol">}</a> <a id="10877" class="Symbol">→</a> <a id="10879" href="plfa.part2.Substitution.html#10845" class="Bound">σ</a> <a id="10881" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10883" href="plfa.part2.Substitution.html#10847" class="Bound">σ′</a> <a id="10886" class="Symbol">{</a><a id="10887" href="plfa.part2.Substitution.html#10874" class="Bound">A</a><a id="10888" class="Symbol">})</a>
     <a id="10896" class="Comment">-----------------------------------</a>
   <a id="10935" class="Symbol">→</a> <a id="10937" class="Symbol">∀{</a><a id="10939" href="/19.08/Substitution/#10939" class="Bound">A</a><a id="10940" class="Symbol">}</a> <a id="10942" class="Symbol">→</a> <a id="10944" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="10949" href="plfa.part2.Substitution.html#10845" class="Bound">σ</a> <a id="10951" class="Symbol">{</a><a id="10952" class="Argument">B</a> <a id="10954" class="Symbol">=</a> <a id="10956" href="plfa.part2.Substitution.html#10863" class="Bound">B</a><a id="10957" class="Symbol">}</a> <a id="10959" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="10961" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="10966" href="plfa.part2.Substitution.html#10847" class="Bound">σ′</a> <a id="10969" class="Symbol">{</a><a id="10970" href="plfa.part2.Substitution.html#10939" class="Bound">A</a><a id="10971" class="Symbol">}</a>
<a id="10973" href="/19.08/Substitution/#10826" class="Function">cong-exts</a><a id="10982" class="Symbol">{</a><a id="10983" href="plfa.part2.Substitution.html#10983" class="Bound">Γ</a><a id="10984" class="Symbol">}{</a><a id="10986" href="plfa.part2.Substitution.html#10986" class="Bound">Δ</a><a id="10987" class="Symbol">}{</a><a id="10989" href="plfa.part2.Substitution.html#10989" class="Bound">σ</a><a id="10990" class="Symbol">}{</a><a id="10992" href="plfa.part2.Substitution.html#10992" class="Bound">σ′</a><a id="10994" class="Symbol">}{</a><a id="10996" href="plfa.part2.Substitution.html#10996" class="Bound">B</a><a id="10997" class="Symbol">}</a> <a id="10999" href="plfa.part2.Substitution.html#10999" class="Bound">ss</a> <a id="11002" class="Symbol">{</a><a id="11003" href="plfa.part2.Substitution.html#11003" class="Bound">A</a><a id="11004" class="Symbol">}</a> <a id="11006" class="Symbol">=</a> <a id="11008" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="11023" class="Symbol">λ</a> <a id="11025" href="plfa.part2.Substitution.html#11025" class="Bound">x</a> <a id="11027" class="Symbol">→</a> <a id="11029" href="plfa.part2.Substitution.html#11051" class="Function">lemma</a> <a id="11035" class="Symbol">{</a><a id="11036" href="plfa.part2.Substitution.html#11025" class="Bound">x</a><a id="11037" class="Symbol">}</a>
   <a id="11042" class="Keyword">where</a>
   <a id="11051" href="/19.08/Substitution/#11051" class="Function">lemma</a> <a id="11057" class="Symbol">:</a> <a id="11059" class="Symbol">∀{</a><a id="11061" href="plfa.part2.Substitution.html#11061" class="Bound">x</a><a id="11062" class="Symbol">}</a> <a id="11064" class="Symbol">→</a> <a id="11066" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="11071" href="plfa.part2.Substitution.html#10989" class="Bound">σ</a> <a id="11073" href="plfa.part2.Substitution.html#11061" class="Bound">x</a> <a id="11075" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11077" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="11082" href="plfa.part2.Substitution.html#10992" class="Bound">σ′</a> <a id="11085" href="plfa.part2.Substitution.html#11061" class="Bound">x</a>
   <a id="11090" href="/19.08/Substitution/#11051" class="Function">lemma</a> <a id="11096" class="Symbol">{</a><a id="11097" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="11098" class="Symbol">}</a> <a id="11100" class="Symbol">=</a> <a id="11102" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
   <a id="11110" href="/19.08/Substitution/#11051" class="Function">lemma</a> <a id="11116" class="Symbol">{</a><a id="11117" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="11119" href="plfa.part2.Substitution.html#11119" class="Bound">x</a><a id="11120" class="Symbol">}</a> <a id="11122" class="Symbol">=</a> <a id="11124" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="11129" class="Symbol">(</a><a id="11130" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="11137" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="11139" class="Symbol">)</a> <a id="11141" class="Symbol">(</a><a id="11142" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="11151" class="Symbol">(</a><a id="11152" href="plfa.part2.Substitution.html#10999" class="Bound">ss</a> <a id="11155" class="Symbol">{</a><a id="11156" href="plfa.part2.Substitution.html#11003" class="Bound">A</a><a id="11157" class="Symbol">})</a> <a id="11160" href="plfa.part2.Substitution.html#11119" class="Bound">x</a><a id="11161" class="Symbol">)</a>
</pre><pre class="Agda"><a id="cong-sub"></a><a id="11172" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="11181" class="Symbol">:</a> <a id="11183" class="Symbol">∀{</a><a id="11185" href="plfa.part2.Substitution.html#11185" class="Bound">Γ</a> <a id="11187" href="plfa.part2.Substitution.html#11187" class="Bound">Δ</a><a id="11188" class="Symbol">}{</a><a id="11190" href="plfa.part2.Substitution.html#11190" class="Bound">σ</a> <a id="11192" href="plfa.part2.Substitution.html#11192" class="Bound">σ′</a> <a id="11195" class="Symbol">:</a> <a id="11197" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="11203" href="plfa.part2.Substitution.html#11185" class="Bound">Γ</a> <a id="11205" href="plfa.part2.Substitution.html#11187" class="Bound">Δ</a><a id="11206" class="Symbol">}{</a><a id="11208" href="plfa.part2.Substitution.html#11208" class="Bound">A</a><a id="11209" class="Symbol">}{</a><a id="11211" href="plfa.part2.Substitution.html#11211" class="Bound">M</a> <a id="11213" href="plfa.part2.Substitution.html#11213" class="Bound">M′</a> <a id="11216" class="Symbol">:</a> <a id="11218" href="plfa.part2.Substitution.html#11185" class="Bound">Γ</a> <a id="11220" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="11222" href="plfa.part2.Substitution.html#11208" class="Bound">A</a><a id="11223" class="Symbol">}</a>
            <a id="11237" class="Symbol">→</a> <a id="11239" class="Symbol">(∀{</a><a id="11242" href="/19.08/Substitution/#11242" class="Bound">A</a><a id="11243" class="Symbol">}</a> <a id="11245" class="Symbol">→</a> <a id="11247" href="plfa.part2.Substitution.html#11190" class="Bound">σ</a> <a id="11249" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11251" href="plfa.part2.Substitution.html#11192" class="Bound">σ′</a> <a id="11254" class="Symbol">{</a><a id="11255" href="plfa.part2.Substitution.html#11242" class="Bound">A</a><a id="11256" class="Symbol">})</a>  <a id="11260" class="Symbol">→</a>  <a id="11263" href="plfa.part2.Substitution.html#11211" class="Bound">M</a> <a id="11265" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11267" href="plfa.part2.Substitution.html#11213" class="Bound">M′</a>
              <a id="11284" class="Comment">------------------------------</a>
            <a id="11327" class="Symbol">→</a> <a id="11329" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="11335" href="/19.08/Substitution/#11190" class="Bound">σ</a> <a id="11337" href="plfa.part2.Substitution.html#11211" class="Bound">M</a> <a id="11339" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11341" href="plfa.part2.Untyped.html#6963" class="Function">subst</a> <a id="11347" href="plfa.part2.Substitution.html#11192" class="Bound">σ′</a> <a id="11350" href="plfa.part2.Substitution.html#11213" class="Bound">M′</a>
<a id="11353" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="11362" class="Symbol">{</a><a id="11363" href="plfa.part2.Substitution.html#11363" class="Bound">Γ</a><a id="11364" class="Symbol">}</a> <a id="11366" class="Symbol">{</a><a id="11367" href="plfa.part2.Substitution.html#11367" class="Bound">Δ</a><a id="11368" class="Symbol">}</a> <a id="11370" class="Symbol">{</a><a id="11371" href="plfa.part2.Substitution.html#11371" class="Bound">σ</a><a id="11372" class="Symbol">}</a> <a id="11374" class="Symbol">{</a><a id="11375" href="plfa.part2.Substitution.html#11375" class="Bound">σ′</a><a id="11377" class="Symbol">}</a> <a id="11379" class="Symbol">{</a><a id="11380" href="plfa.part2.Substitution.html#11380" class="Bound">A</a><a id="11381" class="Symbol">}</a> <a id="11383" class="Symbol">{</a><a id="11384" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="11386" href="plfa.part2.Substitution.html#11386" class="Bound">x</a><a id="11387" class="Symbol">}</a> <a id="11389" href="plfa.part2.Substitution.html#11389" class="Bound">ss</a> <a id="11392" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="11397" class="Symbol">=</a> <a id="11399" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="11408" href="plfa.part2.Substitution.html#11389" class="Bound">ss</a> <a id="11411" href="plfa.part2.Substitution.html#11386" class="Bound">x</a>
<a id="11413" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="11422" class="Symbol">{</a><a id="11423" href="plfa.part2.Substitution.html#11423" class="Bound">Γ</a><a id="11424" class="Symbol">}</a> <a id="11426" class="Symbol">{</a><a id="11427" href="plfa.part2.Substitution.html#11427" class="Bound">Δ</a><a id="11428" class="Symbol">}</a> <a id="11430" class="Symbol">{</a><a id="11431" href="plfa.part2.Substitution.html#11431" class="Bound">σ</a><a id="11432" class="Symbol">}</a> <a id="11434" class="Symbol">{</a><a id="11435" href="plfa.part2.Substitution.html#11435" class="Bound">σ′</a><a id="11437" class="Symbol">}</a> <a id="11439" class="Symbol">{</a><a id="11440" href="plfa.part2.Substitution.html#11440" class="Bound">A</a><a id="11441" class="Symbol">}</a> <a id="11443" class="Symbol">{</a><a id="11444" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="11446" href="plfa.part2.Substitution.html#11446" class="Bound">M</a><a id="11447" class="Symbol">}</a> <a id="11449" href="plfa.part2.Substitution.html#11449" class="Bound">ss</a> <a id="11452" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="11457" class="Symbol">=</a>
   <a id="11462" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="11467" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="11470" class="Symbol">(</a><a id="11471" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="11480" class="Symbol">{</a><a id="11481" class="Argument">σ</a> <a id="11483" class="Symbol">=</a> <a id="11485" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="11490" href="plfa.part2.Substitution.html#11431" class="Bound">σ</a><a id="11491" class="Symbol">}{</a><a id="11493" class="Argument">σ′</a> <a id="11496" class="Symbol">=</a> <a id="11498" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="11503" href="plfa.part2.Substitution.html#11435" class="Bound">σ′</a><a id="11505" class="Symbol">}</a> <a id="11507" class="Symbol">{</a><a id="11508" class="Argument">M</a> <a id="11510" class="Symbol">=</a> <a id="11512" href="plfa.part2.Substitution.html#11446" class="Bound">M</a><a id="11513" class="Symbol">}</a> <a id="11515" class="Symbol">(</a><a id="11516" href="plfa.part2.Substitution.html#10826" class="Function">cong-exts</a> <a id="11526" href="plfa.part2.Substitution.html#11449" class="Bound">ss</a><a id="11528" class="Symbol">)</a> <a id="11530" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="11534" class="Symbol">)</a>
<a id="11536" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="11545" class="Symbol">{</a><a id="11546" href="plfa.part2.Substitution.html#11546" class="Bound">Γ</a><a id="11547" class="Symbol">}</a> <a id="11549" class="Symbol">{</a><a id="11550" href="plfa.part2.Substitution.html#11550" class="Bound">Δ</a><a id="11551" class="Symbol">}</a> <a id="11553" class="Symbol">{</a><a id="11554" href="plfa.part2.Substitution.html#11554" class="Bound">σ</a><a id="11555" class="Symbol">}</a> <a id="11557" class="Symbol">{</a><a id="11558" href="plfa.part2.Substitution.html#11558" class="Bound">σ′</a><a id="11560" class="Symbol">}</a> <a id="11562" class="Symbol">{</a><a id="11563" href="plfa.part2.Substitution.html#11563" class="Bound">A</a><a id="11564" class="Symbol">}</a> <a id="11566" class="Symbol">{</a><a id="11567" href="plfa.part2.Substitution.html#11567" class="Bound">L</a> <a id="11569" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="11571" href="plfa.part2.Substitution.html#11571" class="Bound">M</a><a id="11572" class="Symbol">}</a> <a id="11574" href="plfa.part2.Substitution.html#11574" class="Bound">ss</a> <a id="11577" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="11582" class="Symbol">=</a>
   <a id="11587" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="11593" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">_·_</a> <a id="11597" class="Symbol">(</a><a id="11598" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="11607" class="Symbol">{</a><a id="11608" class="Argument">M</a> <a id="11610" class="Symbol">=</a> <a id="11612" href="plfa.part2.Substitution.html#11567" class="Bound">L</a><a id="11613" class="Symbol">}</a> <a id="11615" href="plfa.part2.Substitution.html#11574" class="Bound">ss</a> <a id="11618" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="11622" class="Symbol">)</a> <a id="11624" class="Symbol">(</a><a id="11625" href="plfa.part2.Substitution.html#11172" class="Function">cong-sub</a> <a id="11634" class="Symbol">{</a><a id="11635" class="Argument">M</a> <a id="11637" class="Symbol">=</a> <a id="11639" href="plfa.part2.Substitution.html#11571" class="Bound">M</a><a id="11640" class="Symbol">}</a> <a id="11642" href="plfa.part2.Substitution.html#11574" class="Bound">ss</a> <a id="11645" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="11649" class="Symbol">)</a>
</pre><pre class="Agda"><a id="cong-sub-zero"></a><a id="11660" href="/19.08/Substitution/#11660" class="Function">cong-sub-zero</a> <a id="11674" class="Symbol">:</a> <a id="11676" class="Symbol">∀{</a><a id="11678" href="plfa.part2.Substitution.html#11678" class="Bound">Γ</a><a id="11679" class="Symbol">}{</a><a id="11681" href="plfa.part2.Substitution.html#11681" class="Bound">B</a> <a id="11683" class="Symbol">:</a> <a id="11685" href="/19.08/Untyped/#2869" class="Datatype">Type</a><a id="11689" class="Symbol">}{</a><a id="11691" href="plfa.part2.Substitution.html#11691" class="Bound">M</a> <a id="11693" href="plfa.part2.Substitution.html#11693" class="Bound">M′</a> <a id="11696" class="Symbol">:</a> <a id="11698" href="plfa.part2.Substitution.html#11678" class="Bound">Γ</a> <a id="11700" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="11702" href="plfa.part2.Substitution.html#11681" class="Bound">B</a><a id="11703" class="Symbol">}</a>
  <a id="11707" class="Symbol">→</a> <a id="11709" href="/19.08/Substitution/#11691" class="Bound">M</a> <a id="11711" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11713" href="plfa.part2.Substitution.html#11693" class="Bound">M′</a>
    <a id="11720" class="Comment">-----------------------------------------</a>
  <a id="11764" class="Symbol">→</a> <a id="11766" class="Symbol">∀{</a><a id="11768" href="/19.08/Substitution/#11768" class="Bound">A</a><a id="11769" class="Symbol">}</a> <a id="11771" class="Symbol">→</a> <a id="11773" href="/19.08/Untyped/#7375" class="Function">subst-zero</a> <a id="11784" href="plfa.part2.Substitution.html#11691" class="Bound">M</a> <a id="11786" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11788" class="Symbol">(</a><a id="11789" href="plfa.part2.Untyped.html#7375" class="Function">subst-zero</a> <a id="11800" href="plfa.part2.Substitution.html#11693" class="Bound">M′</a><a id="11802" class="Symbol">)</a> <a id="11804" class="Symbol">{</a><a id="11805" href="plfa.part2.Substitution.html#11768" class="Bound">A</a><a id="11806" class="Symbol">}</a>
<a id="11808" href="/19.08/Substitution/#11660" class="Function">cong-sub-zero</a> <a id="11822" class="Symbol">{</a><a id="11823" href="plfa.part2.Substitution.html#11823" class="Bound">Γ</a><a id="11824" class="Symbol">}{</a><a id="11826" href="plfa.part2.Substitution.html#11826" class="Bound">B</a><a id="11827" class="Symbol">}{</a><a id="11829" href="plfa.part2.Substitution.html#11829" class="Bound">M</a><a id="11830" class="Symbol">}{</a><a id="11832" href="plfa.part2.Substitution.html#11832" class="Bound">M′</a><a id="11834" class="Symbol">}</a> <a id="11836" href="plfa.part2.Substitution.html#11836" class="Bound">mm&#39;</a> <a id="11840" class="Symbol">{</a><a id="11841" href="plfa.part2.Substitution.html#11841" class="Bound">A</a><a id="11842" class="Symbol">}</a> <a id="11844" class="Symbol">=</a>
   <a id="11849" href="/19.08/Substitution/#1927" class="Postulate">extensionality</a> <a id="11864" class="Symbol">λ</a> <a id="11866" href="plfa.part2.Substitution.html#11866" class="Bound">x</a> <a id="11868" class="Symbol">→</a> <a id="11870" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="11875" class="Symbol">(λ</a> <a id="11878" href="plfa.part2.Substitution.html#11878" class="Bound">z</a> <a id="11880" class="Symbol">→</a> <a id="11882" href="/19.08/Untyped/#7375" class="Function">subst-zero</a> <a id="11893" href="plfa.part2.Substitution.html#11878" class="Bound">z</a> <a id="11895" href="plfa.part2.Substitution.html#11866" class="Bound">x</a><a id="11896" class="Symbol">)</a> <a id="11898" href="plfa.part2.Substitution.html#11836" class="Bound">mm&#39;</a>
</pre><pre class="Agda"><a id="cong-cons"></a><a id="11911" href="/19.08/Substitution/#11911" class="Function">cong-cons</a> <a id="11921" class="Symbol">:</a> <a id="11923" class="Symbol">∀{</a><a id="11925" href="plfa.part2.Substitution.html#11925" class="Bound">Γ</a> <a id="11927" href="plfa.part2.Substitution.html#11927" class="Bound">Δ</a><a id="11928" class="Symbol">}{</a><a id="11930" href="plfa.part2.Substitution.html#11930" class="Bound">A</a><a id="11931" class="Symbol">}{</a><a id="11933" href="plfa.part2.Substitution.html#11933" class="Bound">M</a> <a id="11935" href="plfa.part2.Substitution.html#11935" class="Bound">N</a> <a id="11937" class="Symbol">:</a> <a id="11939" href="plfa.part2.Substitution.html#11927" class="Bound">Δ</a> <a id="11941" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="11943" href="plfa.part2.Substitution.html#11930" class="Bound">A</a><a id="11944" class="Symbol">}{</a><a id="11946" href="plfa.part2.Substitution.html#11946" class="Bound">σ</a> <a id="11948" href="plfa.part2.Substitution.html#11948" class="Bound">τ</a> <a id="11950" class="Symbol">:</a> <a id="11952" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="11958" href="plfa.part2.Substitution.html#11925" class="Bound">Γ</a> <a id="11960" href="plfa.part2.Substitution.html#11927" class="Bound">Δ</a><a id="11961" class="Symbol">}</a>
  <a id="11965" class="Symbol">→</a> <a id="11967" href="/19.08/Substitution/#11933" class="Bound">M</a> <a id="11969" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11971" href="plfa.part2.Substitution.html#11935" class="Bound">N</a>  <a id="11974" class="Symbol">→</a>  <a id="11977" class="Symbol">(∀{</a><a id="11980" href="plfa.part2.Substitution.html#11980" class="Bound">A</a><a id="11981" class="Symbol">}</a> <a id="11983" class="Symbol">→</a> <a id="11985" href="plfa.part2.Substitution.html#11946" class="Bound">σ</a> <a id="11987" class="Symbol">{</a><a id="11988" href="plfa.part2.Substitution.html#11980" class="Bound">A</a><a id="11989" class="Symbol">}</a> <a id="11991" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11993" href="plfa.part2.Substitution.html#11948" class="Bound">τ</a> <a id="11995" class="Symbol">{</a><a id="11996" href="plfa.part2.Substitution.html#11980" class="Bound">A</a><a id="11997" class="Symbol">})</a>
    <a id="12004" class="Comment">--------------------------------</a>
  <a id="12039" class="Symbol">→</a> <a id="12041" class="Symbol">∀{</a><a id="12043" href="/19.08/Substitution/#12043" class="Bound">A</a><a id="12044" class="Symbol">}</a> <a id="12046" class="Symbol">→</a> <a id="12048" class="Symbol">(</a><a id="12049" href="plfa.part2.Substitution.html#11933" class="Bound">M</a> <a id="12051" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="12053" href="plfa.part2.Substitution.html#11946" class="Bound">σ</a><a id="12054" class="Symbol">)</a> <a id="12056" class="Symbol">{</a><a id="12057" href="plfa.part2.Substitution.html#12043" class="Bound">A</a><a id="12058" class="Symbol">}</a> <a id="12060" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="12062" class="Symbol">(</a><a id="12063" href="plfa.part2.Substitution.html#11935" class="Bound">N</a> <a id="12065" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="12067" href="plfa.part2.Substitution.html#11948" class="Bound">τ</a><a id="12068" class="Symbol">)</a> <a id="12070" class="Symbol">{</a><a id="12071" href="plfa.part2.Substitution.html#12043" class="Bound">A</a><a id="12072" class="Symbol">}</a>
<a id="12074" href="/19.08/Substitution/#11911" class="Function">cong-cons</a><a id="12083" class="Symbol">{</a><a id="12084" href="plfa.part2.Substitution.html#12084" class="Bound">Γ</a><a id="12085" class="Symbol">}{</a><a id="12087" href="plfa.part2.Substitution.html#12087" class="Bound">Δ</a><a id="12088" class="Symbol">}{</a><a id="12090" href="plfa.part2.Substitution.html#12090" class="Bound">A</a><a id="12091" class="Symbol">}{</a><a id="12093" href="plfa.part2.Substitution.html#12093" class="Bound">M</a><a id="12094" class="Symbol">}{</a><a id="12096" href="plfa.part2.Substitution.html#12096" class="Bound">N</a><a id="12097" class="Symbol">}{</a><a id="12099" href="plfa.part2.Substitution.html#12099" class="Bound">σ</a><a id="12100" class="Symbol">}{</a><a id="12102" href="plfa.part2.Substitution.html#12102" class="Bound">τ</a><a id="12103" class="Symbol">}</a> <a id="12105" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="12110" href="plfa.part2.Substitution.html#12110" class="Bound">st</a> <a id="12113" class="Symbol">{</a><a id="12114" href="plfa.part2.Substitution.html#12114" class="Bound">A′</a><a id="12116" class="Symbol">}</a> <a id="12118" class="Symbol">=</a> <a id="12120" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="12135" href="plfa.part2.Substitution.html#12151" class="Function">lemma</a>
  <a id="12143" class="Keyword">where</a>
  <a id="12151" href="/19.08/Substitution/#12151" class="Function">lemma</a> <a id="12157" class="Symbol">:</a> <a id="12159" class="Symbol">(</a><a id="12160" href="plfa.part2.Substitution.html#12160" class="Bound">x</a> <a id="12162" class="Symbol">:</a> <a id="12164" href="plfa.part2.Substitution.html#12084" class="Bound">Γ</a> <a id="12166" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="12168" href="plfa.part2.Substitution.html#12090" class="Bound">A</a> <a id="12170" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="12172" href="plfa.part2.Substitution.html#12114" class="Bound">A′</a><a id="12174" class="Symbol">)</a> <a id="12176" class="Symbol">→</a> <a id="12178" class="Symbol">(</a><a id="12179" href="plfa.part2.Substitution.html#12093" class="Bound">M</a> <a id="12181" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="12183" href="plfa.part2.Substitution.html#12099" class="Bound">σ</a><a id="12184" class="Symbol">)</a> <a id="12186" href="plfa.part2.Substitution.html#12160" class="Bound">x</a> <a id="12188" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="12190" class="Symbol">(</a><a id="12191" href="plfa.part2.Substitution.html#12093" class="Bound">M</a> <a id="12193" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="12195" href="plfa.part2.Substitution.html#12102" class="Bound">τ</a><a id="12196" class="Symbol">)</a> <a id="12198" href="plfa.part2.Substitution.html#12160" class="Bound">x</a>
  <a id="12202" href="/19.08/Substitution/#12151" class="Function">lemma</a> <a id="12208" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="12210" class="Symbol">=</a> <a id="12212" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="12219" href="/19.08/Substitution/#12151" class="Function">lemma</a> <a id="12225" class="Symbol">(</a><a id="12226" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="12228" href="plfa.part2.Substitution.html#12228" class="Bound">x</a><a id="12229" class="Symbol">)</a> <a id="12231" class="Symbol">=</a> <a id="12233" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="12242" href="plfa.part2.Substitution.html#12110" class="Bound">st</a> <a id="12245" href="plfa.part2.Substitution.html#12228" class="Bound">x</a>
</pre><pre class="Agda"><a id="cong-seq"></a><a id="12256" href="/19.08/Substitution/#12256" class="Function">cong-seq</a> <a id="12265" class="Symbol">:</a> <a id="12267" class="Symbol">∀{</a><a id="12269" href="plfa.part2.Substitution.html#12269" class="Bound">Γ</a> <a id="12271" href="plfa.part2.Substitution.html#12271" class="Bound">Δ</a> <a id="12273" href="plfa.part2.Substitution.html#12273" class="Bound">Σ</a><a id="12274" class="Symbol">}{</a><a id="12276" href="plfa.part2.Substitution.html#12276" class="Bound">σ</a> <a id="12278" href="plfa.part2.Substitution.html#12278" class="Bound">σ′</a> <a id="12281" class="Symbol">:</a> <a id="12283" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="12289" href="plfa.part2.Substitution.html#12269" class="Bound">Γ</a> <a id="12291" href="plfa.part2.Substitution.html#12271" class="Bound">Δ</a><a id="12292" class="Symbol">}{</a><a id="12294" href="plfa.part2.Substitution.html#12294" class="Bound">τ</a> <a id="12296" href="plfa.part2.Substitution.html#12296" class="Bound">τ′</a> <a id="12299" class="Symbol">:</a> <a id="12301" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="12307" href="plfa.part2.Substitution.html#12271" class="Bound">Δ</a> <a id="12309" href="plfa.part2.Substitution.html#12273" class="Bound">Σ</a><a id="12310" class="Symbol">}</a>
  <a id="12314" class="Symbol">→</a> <a id="12316" class="Symbol">(∀{</a><a id="12319" href="/19.08/Substitution/#12319" class="Bound">A</a><a id="12320" class="Symbol">}</a> <a id="12322" class="Symbol">→</a> <a id="12324" href="plfa.part2.Substitution.html#12276" class="Bound">σ</a> <a id="12326" class="Symbol">{</a><a id="12327" href="plfa.part2.Substitution.html#12319" class="Bound">A</a><a id="12328" class="Symbol">}</a> <a id="12330" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="12332" href="plfa.part2.Substitution.html#12278" class="Bound">σ′</a> <a id="12335" class="Symbol">{</a><a id="12336" href="plfa.part2.Substitution.html#12319" class="Bound">A</a><a id="12337" class="Symbol">})</a> <a id="12340" class="Symbol">→</a> <a id="12342" class="Symbol">(∀{</a><a id="12345" href="plfa.part2.Substitution.html#12345" class="Bound">A</a><a id="12346" class="Symbol">}</a> <a id="12348" class="Symbol">→</a> <a id="12350" href="plfa.part2.Substitution.html#12294" class="Bound">τ</a> <a id="12352" class="Symbol">{</a><a id="12353" href="plfa.part2.Substitution.html#12345" class="Bound">A</a><a id="12354" class="Symbol">}</a> <a id="12356" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="12358" href="plfa.part2.Substitution.html#12296" class="Bound">τ′</a> <a id="12361" class="Symbol">{</a><a id="12362" href="plfa.part2.Substitution.html#12345" class="Bound">A</a><a id="12363" class="Symbol">})</a>
  <a id="12368" class="Symbol">→</a> <a id="12370" class="Symbol">∀{</a><a id="12372" href="/19.08/Substitution/#12372" class="Bound">A</a><a id="12373" class="Symbol">}</a> <a id="12375" class="Symbol">→</a> <a id="12377" class="Symbol">(</a><a id="12378" href="plfa.part2.Substitution.html#12276" class="Bound">σ</a> <a id="12380" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="12382" href="plfa.part2.Substitution.html#12294" class="Bound">τ</a><a id="12383" class="Symbol">)</a> <a id="12385" class="Symbol">{</a><a id="12386" href="plfa.part2.Substitution.html#12372" class="Bound">A</a><a id="12387" class="Symbol">}</a> <a id="12389" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="12391" class="Symbol">(</a><a id="12392" href="plfa.part2.Substitution.html#12278" class="Bound">σ′</a> <a id="12395" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="12397" href="plfa.part2.Substitution.html#12296" class="Bound">τ′</a><a id="12399" class="Symbol">)</a> <a id="12401" class="Symbol">{</a><a id="12402" href="plfa.part2.Substitution.html#12372" class="Bound">A</a><a id="12403" class="Symbol">}</a>
<a id="12405" href="/19.08/Substitution/#12256" class="Function">cong-seq</a> <a id="12414" class="Symbol">{</a><a id="12415" href="plfa.part2.Substitution.html#12415" class="Bound">Γ</a><a id="12416" class="Symbol">}{</a><a id="12418" href="plfa.part2.Substitution.html#12418" class="Bound">Δ</a><a id="12419" class="Symbol">}{</a><a id="12421" href="plfa.part2.Substitution.html#12421" class="Bound">Σ</a><a id="12422" class="Symbol">}{</a><a id="12424" href="plfa.part2.Substitution.html#12424" class="Bound">σ</a><a id="12425" class="Symbol">}{</a><a id="12427" href="plfa.part2.Substitution.html#12427" class="Bound">σ′</a><a id="12429" class="Symbol">}{</a><a id="12431" href="plfa.part2.Substitution.html#12431" class="Bound">τ</a><a id="12432" class="Symbol">}{</a><a id="12434" href="plfa.part2.Substitution.html#12434" class="Bound">τ′</a><a id="12436" class="Symbol">}</a> <a id="12438" href="plfa.part2.Substitution.html#12438" class="Bound">ss&#39;</a> <a id="12442" href="plfa.part2.Substitution.html#12442" class="Bound">tt&#39;</a> <a id="12446" class="Symbol">{</a><a id="12447" href="plfa.part2.Substitution.html#12447" class="Bound">A</a><a id="12448" class="Symbol">}</a> <a id="12450" class="Symbol">=</a> <a id="12452" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="12467" href="plfa.part2.Substitution.html#12483" class="Function">lemma</a>
  <a id="12475" class="Keyword">where</a>
  <a id="12483" href="/19.08/Substitution/#12483" class="Function">lemma</a> <a id="12489" class="Symbol">:</a> <a id="12491" class="Symbol">(</a><a id="12492" href="plfa.part2.Substitution.html#12492" class="Bound">x</a> <a id="12494" class="Symbol">:</a> <a id="12496" href="plfa.part2.Substitution.html#12415" class="Bound">Γ</a> <a id="12498" href="/19.08/Untyped/#3521" class="Datatype Operator">∋</a> <a id="12500" href="plfa.part2.Substitution.html#12447" class="Bound">A</a><a id="12501" class="Symbol">)</a> <a id="12503" class="Symbol">→</a> <a id="12505" class="Symbol">(</a><a id="12506" href="plfa.part2.Substitution.html#12424" class="Bound">σ</a> <a id="12508" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="12510" href="plfa.part2.Substitution.html#12431" class="Bound">τ</a><a id="12511" class="Symbol">)</a> <a id="12513" href="plfa.part2.Substitution.html#12492" class="Bound">x</a> <a id="12515" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="12517" class="Symbol">(</a><a id="12518" href="plfa.part2.Substitution.html#12427" class="Bound">σ′</a> <a id="12521" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="12523" href="plfa.part2.Substitution.html#12434" class="Bound">τ′</a><a id="12525" class="Symbol">)</a> <a id="12527" href="plfa.part2.Substitution.html#12492" class="Bound">x</a>
  <a id="12531" href="/19.08/Substitution/#12483" class="Function">lemma</a> <a id="12537" href="plfa.part2.Substitution.html#12537" class="Bound">x</a> <a id="12539" class="Symbol">=</a>
     <a id="12546" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
       <a id="12559" class="Symbol">(</a><a id="12560" href="/19.08/Substitution/#12424" class="Bound">σ</a> <a id="12562" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="12564" href="plfa.part2.Substitution.html#12431" class="Bound">τ</a><a id="12565" class="Symbol">)</a> <a id="12567" href="plfa.part2.Substitution.html#12537" class="Bound">x</a>
     <a id="12574" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="12585" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="12591" href="/19.08/Substitution/#12431" class="Bound">τ</a> <a id="12593" class="Symbol">(</a><a id="12594" href="plfa.part2.Substitution.html#12424" class="Bound">σ</a> <a id="12596" href="plfa.part2.Substitution.html#12537" class="Bound">x</a><a id="12597" class="Symbol">)</a>
     <a id="12604" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="12607" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="12612" class="Symbol">(</a><a id="12613" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="12619" href="/19.08/Substitution/#12431" class="Bound">τ</a><a id="12620" class="Symbol">)</a> <a id="12622" class="Symbol">(</a><a id="12623" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a> <a id="12632" href="plfa.part2.Substitution.html#12438" class="Bound">ss&#39;</a> <a id="12636" href="plfa.part2.Substitution.html#12537" class="Bound">x</a><a id="12637" class="Symbol">)</a> <a id="12639" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="12648" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="12654" href="/19.08/Substitution/#12431" class="Bound">τ</a> <a id="12656" class="Symbol">(</a><a id="12657" href="plfa.part2.Substitution.html#12427" class="Bound">σ′</a> <a id="12660" href="plfa.part2.Substitution.html#12537" class="Bound">x</a><a id="12661" class="Symbol">)</a>
     <a id="12668" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="12671" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="12679" class="Symbol">{</a><a id="12680" class="Argument">M</a> <a id="12682" class="Symbol">=</a> <a id="12684" href="plfa.part2.Substitution.html#12427" class="Bound">σ′</a> <a id="12687" href="plfa.part2.Substitution.html#12537" class="Bound">x</a><a id="12688" class="Symbol">}</a> <a id="12690" href="plfa.part2.Substitution.html#12442" class="Bound">tt&#39;</a> <a id="12694" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="12699" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="12708" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="12714" href="/19.08/Substitution/#12434" class="Bound">τ′</a> <a id="12717" class="Symbol">(</a><a id="12718" href="plfa.part2.Substitution.html#12427" class="Bound">σ′</a> <a id="12721" href="plfa.part2.Substitution.html#12537" class="Bound">x</a><a id="12722" class="Symbol">)</a>
     <a id="12729" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="12740" class="Symbol">(</a><a id="12741" href="/19.08/Substitution/#12427" class="Bound">σ′</a> <a id="12744" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="12746" href="plfa.part2.Substitution.html#12434" class="Bound">τ′</a><a id="12748" class="Symbol">)</a> <a id="12750" href="plfa.part2.Substitution.html#12537" class="Bound">x</a>
     <a id="12757" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><h2 id="relating-rename-exts-ext-and-subst-zero-to-the-σ-algebra">Relating <code class="language-plaintext highlighter-rouge">rename</code>, <code class="language-plaintext highlighter-rouge">exts</code>, <code class="language-plaintext highlighter-rouge">ext</code>, and <code class="language-plaintext highlighter-rouge">subst-zero</code> to the σ algebra</h2><p>In this section we establish equations that relate <code class="language-plaintext highlighter-rouge">subst</code> and its helper functions (<code class="language-plaintext highlighter-rouge">rename</code>, <code class="language-plaintext highlighter-rouge">exts</code>, <code class="language-plaintext highlighter-rouge">ext</code>, and <code class="language-plaintext highlighter-rouge">subst-zero</code>) to terms in the σ algebra.</p><p>The first equation we prove is</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ M ≡ ⟪ ren ρ ⟫ M              (rename-subst-ren)
</code></pre></div></div><p>Because <code class="language-plaintext highlighter-rouge">subst</code> uses the <code class="language-plaintext highlighter-rouge">exts</code> function, we need the following lemma which says that <code class="language-plaintext highlighter-rouge">exts</code> and <code class="language-plaintext highlighter-rouge">ext</code> do the same thing except that <code class="language-plaintext highlighter-rouge">ext</code> works on renamings and <code class="language-plaintext highlighter-rouge">exts</code> works on substitutions.</p><pre class="Agda"><a id="ren-ext"></a><a id="13285" href="/19.08/Substitution/#13285" class="Function">ren-ext</a> <a id="13293" class="Symbol">:</a> <a id="13295" class="Symbol">∀</a> <a id="13297" class="Symbol">{</a><a id="13298" href="plfa.part2.Substitution.html#13298" class="Bound">Γ</a> <a id="13300" href="plfa.part2.Substitution.html#13300" class="Bound">Δ</a><a id="13301" class="Symbol">}{</a><a id="13303" href="plfa.part2.Substitution.html#13303" class="Bound">B</a> <a id="13305" href="plfa.part2.Substitution.html#13305" class="Bound">C</a> <a id="13307" class="Symbol">:</a> <a id="13309" href="/19.08/Untyped/#2869" class="Datatype">Type</a><a id="13313" class="Symbol">}</a> <a id="13315" class="Symbol">{</a><a id="13316" href="plfa.part2.Substitution.html#13316" class="Bound">ρ</a> <a id="13318" class="Symbol">:</a> <a id="13320" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="13327" href="plfa.part2.Substitution.html#13298" class="Bound">Γ</a> <a id="13329" href="plfa.part2.Substitution.html#13300" class="Bound">Δ</a><a id="13330" class="Symbol">}</a>
        <a id="13340" class="Symbol">→</a> <a id="13342" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="13346" class="Symbol">(</a><a id="13347" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="13351" href="plfa.part2.Substitution.html#13316" class="Bound">ρ</a> <a id="13353" class="Symbol">{</a><a id="13354" class="Argument">B</a> <a id="13356" class="Symbol">=</a> <a id="13358" href="plfa.part2.Substitution.html#13303" class="Bound">B</a><a id="13359" class="Symbol">})</a> <a id="13362" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="13364" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="13369" class="Symbol">(</a><a id="13370" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="13374" href="plfa.part2.Substitution.html#13316" class="Bound">ρ</a><a id="13375" class="Symbol">)</a> <a id="13377" class="Symbol">{</a><a id="13378" href="plfa.part2.Substitution.html#13305" class="Bound">C</a><a id="13379" class="Symbol">}</a>
<a id="13381" href="/19.08/Substitution/#13285" class="Function">ren-ext</a> <a id="13389" class="Symbol">{</a><a id="13390" href="plfa.part2.Substitution.html#13390" class="Bound">Γ</a><a id="13391" class="Symbol">}{</a><a id="13393" href="plfa.part2.Substitution.html#13393" class="Bound">Δ</a><a id="13394" class="Symbol">}{</a><a id="13396" href="plfa.part2.Substitution.html#13396" class="Bound">B</a><a id="13397" class="Symbol">}{</a><a id="13399" href="plfa.part2.Substitution.html#13399" class="Bound">C</a><a id="13400" class="Symbol">}{</a><a id="13402" href="plfa.part2.Substitution.html#13402" class="Bound">ρ</a><a id="13403" class="Symbol">}</a> <a id="13405" class="Symbol">=</a> <a id="13407" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="13422" class="Symbol">λ</a> <a id="13424" href="plfa.part2.Substitution.html#13424" class="Bound">x</a> <a id="13426" class="Symbol">→</a> <a id="13428" href="plfa.part2.Substitution.html#13452" class="Function">lemma</a> <a id="13434" class="Symbol">{</a><a id="13435" class="Argument">x</a> <a id="13437" class="Symbol">=</a> <a id="13439" href="plfa.part2.Substitution.html#13424" class="Bound">x</a><a id="13440" class="Symbol">}</a>
  <a id="13444" class="Keyword">where</a>
  <a id="13452" href="/19.08/Substitution/#13452" class="Function">lemma</a> <a id="13458" class="Symbol">:</a> <a id="13460" class="Symbol">∀</a> <a id="13462" class="Symbol">{</a><a id="13463" href="plfa.part2.Substitution.html#13463" class="Bound">x</a> <a id="13465" class="Symbol">:</a> <a id="13467" href="plfa.part2.Substitution.html#13390" class="Bound">Γ</a> <a id="13469" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="13471" href="plfa.part2.Substitution.html#13396" class="Bound">B</a> <a id="13473" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="13475" href="plfa.part2.Substitution.html#13399" class="Bound">C</a><a id="13476" class="Symbol">}</a> <a id="13478" class="Symbol">→</a> <a id="13480" class="Symbol">(</a><a id="13481" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="13485" class="Symbol">(</a><a id="13486" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="13490" href="plfa.part2.Substitution.html#13402" class="Bound">ρ</a><a id="13491" class="Symbol">))</a> <a id="13494" href="plfa.part2.Substitution.html#13463" class="Bound">x</a> <a id="13496" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="13498" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="13503" class="Symbol">(</a><a id="13504" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="13508" href="plfa.part2.Substitution.html#13402" class="Bound">ρ</a><a id="13509" class="Symbol">)</a> <a id="13511" href="plfa.part2.Substitution.html#13463" class="Bound">x</a>
  <a id="13515" href="/19.08/Substitution/#13452" class="Function">lemma</a> <a id="13521" class="Symbol">{</a><a id="13522" class="Argument">x</a> <a id="13524" class="Symbol">=</a> <a id="13526" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="13527" class="Symbol">}</a> <a id="13529" class="Symbol">=</a> <a id="13531" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="13538" href="/19.08/Substitution/#13452" class="Function">lemma</a> <a id="13544" class="Symbol">{</a><a id="13545" class="Argument">x</a> <a id="13547" class="Symbol">=</a> <a id="13549" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="13551" href="plfa.part2.Substitution.html#13551" class="Bound">x</a><a id="13552" class="Symbol">}</a> <a id="13554" class="Symbol">=</a> <a id="13556" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><p>With this lemma in hand, the proof is a straightforward induction on the term <code class="language-plaintext highlighter-rouge">M</code>.</p><pre class="Agda"><a id="rename-subst-ren"></a><a id="13654" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a> <a id="13671" class="Symbol">:</a> <a id="13673" class="Symbol">∀</a> <a id="13675" class="Symbol">{</a><a id="13676" href="plfa.part2.Substitution.html#13676" class="Bound">Γ</a> <a id="13678" href="plfa.part2.Substitution.html#13678" class="Bound">Δ</a><a id="13679" class="Symbol">}{</a><a id="13681" href="plfa.part2.Substitution.html#13681" class="Bound">A</a><a id="13682" class="Symbol">}</a> <a id="13684" class="Symbol">{</a><a id="13685" href="plfa.part2.Substitution.html#13685" class="Bound">ρ</a> <a id="13687" class="Symbol">:</a> <a id="13689" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="13696" href="plfa.part2.Substitution.html#13676" class="Bound">Γ</a> <a id="13698" href="plfa.part2.Substitution.html#13678" class="Bound">Δ</a><a id="13699" class="Symbol">}{</a><a id="13701" href="plfa.part2.Substitution.html#13701" class="Bound">M</a> <a id="13703" class="Symbol">:</a> <a id="13705" href="plfa.part2.Substitution.html#13676" class="Bound">Γ</a> <a id="13707" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="13709" href="plfa.part2.Substitution.html#13681" class="Bound">A</a><a id="13710" class="Symbol">}</a>
                 <a id="13729" class="Symbol">→</a> <a id="13731" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="13738" href="/19.08/Substitution/#13685" class="Bound">ρ</a> <a id="13740" href="plfa.part2.Substitution.html#13701" class="Bound">M</a> <a id="13742" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="13744" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="13746" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="13750" href="plfa.part2.Substitution.html#13685" class="Bound">ρ</a> <a id="13752" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="13754" href="plfa.part2.Substitution.html#13701" class="Bound">M</a>
<a id="13756" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a> <a id="13773" class="Symbol">{</a><a id="13774" class="Argument">M</a> <a id="13776" class="Symbol">=</a> <a id="13778" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="13780" href="plfa.part2.Substitution.html#13780" class="Bound">x</a><a id="13781" class="Symbol">}</a> <a id="13783" class="Symbol">=</a> <a id="13785" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="13790" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a> <a id="13807" class="Symbol">{</a><a id="13808" class="Argument">ρ</a> <a id="13810" class="Symbol">=</a> <a id="13812" href="plfa.part2.Substitution.html#13812" class="Bound">ρ</a><a id="13813" class="Symbol">}{</a><a id="13815" class="Argument">M</a> <a id="13817" class="Symbol">=</a> <a id="13819" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="13821" href="plfa.part2.Substitution.html#13821" class="Bound">N</a><a id="13822" class="Symbol">}</a> <a id="13824" class="Symbol">=</a>
  <a id="13828" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
      <a id="13840" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="13847" href="/19.08/Substitution/#13812" class="Bound">ρ</a> <a id="13849" class="Symbol">(</a><a id="13850" href="plfa.part2.Untyped.html#4382" class="InductiveConstructor Operator">ƛ</a> <a id="13852" href="plfa.part2.Substitution.html#13821" class="Bound">N</a><a id="13853" class="Symbol">)</a>
    <a id="13859" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
      <a id="13869" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="13871" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="13878" class="Symbol">(</a><a id="13879" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="13883" href="/19.08/Substitution/#13812" class="Bound">ρ</a><a id="13884" class="Symbol">)</a> <a id="13886" href="plfa.part2.Substitution.html#13821" class="Bound">N</a>
    <a id="13892" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="13895" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="13900" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="13903" class="Symbol">(</a><a id="13904" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a> <a id="13921" class="Symbol">{</a><a id="13922" class="Argument">ρ</a> <a id="13924" class="Symbol">=</a> <a id="13926" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="13930" href="plfa.part2.Substitution.html#13812" class="Bound">ρ</a><a id="13931" class="Symbol">}{</a><a id="13933" class="Argument">M</a> <a id="13935" class="Symbol">=</a> <a id="13937" href="plfa.part2.Substitution.html#13821" class="Bound">N</a><a id="13938" class="Symbol">})</a> <a id="13941" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="13949" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="13951" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="13953" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="13957" class="Symbol">(</a><a id="13958" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="13962" href="plfa.part2.Substitution.html#13812" class="Bound">ρ</a><a id="13963" class="Symbol">)</a> <a id="13965" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="13967" href="plfa.part2.Substitution.html#13821" class="Bound">N</a>
    <a id="13973" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="13976" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="13981" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="13984" class="Symbol">(</a><a id="13985" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="13994" class="Symbol">{</a><a id="13995" class="Argument">M</a> <a id="13997" class="Symbol">=</a> <a id="13999" href="plfa.part2.Substitution.html#13821" class="Bound">N</a><a id="14000" class="Symbol">}</a> <a id="14002" href="plfa.part2.Substitution.html#13285" class="Function">ren-ext</a> <a id="14010" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="14014" class="Symbol">)</a> <a id="14016" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="14024" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="14026" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="14028" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="14033" class="Symbol">(</a><a id="14034" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="14038" href="plfa.part2.Substitution.html#13812" class="Bound">ρ</a><a id="14039" class="Symbol">)</a> <a id="14041" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a>  <a id="14044" href="plfa.part2.Substitution.html#13821" class="Bound">N</a>
    <a id="14050" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
      <a id="14060" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="14062" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="14066" href="plfa.part2.Substitution.html#13812" class="Bound">ρ</a> <a id="14068" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="14070" class="Symbol">(</a><a id="14071" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="14073" href="plfa.part2.Substitution.html#13821" class="Bound">N</a><a id="14074" class="Symbol">)</a>
  <a id="14078" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
<a id="14080" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a> <a id="14097" class="Symbol">{</a><a id="14098" class="Argument">M</a> <a id="14100" class="Symbol">=</a> <a id="14102" href="plfa.part2.Substitution.html#14102" class="Bound">L</a> <a id="14104" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="14106" href="plfa.part2.Substitution.html#14106" class="Bound">M</a><a id="14107" class="Symbol">}</a> <a id="14109" class="Symbol">=</a> <a id="14111" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="14117" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">_·_</a> <a id="14121" href="plfa.part2.Substitution.html#13654" class="Function">rename-subst-ren</a> <a id="14138" href="plfa.part2.Substitution.html#13654" class="Function">rename-subst-ren</a>
</pre><p>The substitution <code class="language-plaintext highlighter-rouge">ren S_</code> is equivalent to <code class="language-plaintext highlighter-rouge">↑</code>.</p><pre class="Agda"><a id="ren-shift"></a><a id="14213" href="/19.08/Substitution/#14213" class="Function">ren-shift</a> <a id="14223" class="Symbol">:</a> <a id="14225" class="Symbol">∀{</a><a id="14227" href="plfa.part2.Substitution.html#14227" class="Bound">Γ</a><a id="14228" class="Symbol">}{</a><a id="14230" href="plfa.part2.Substitution.html#14230" class="Bound">A</a><a id="14231" class="Symbol">}{</a><a id="14233" href="plfa.part2.Substitution.html#14233" class="Bound">B</a><a id="14234" class="Symbol">}</a>
          <a id="14246" class="Symbol">→</a> <a id="14248" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="14252" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S_</a> <a id="14255" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="14257" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="14259" class="Symbol">{</a><a id="14260" class="Argument">A</a> <a id="14262" class="Symbol">=</a> <a id="14264" href="plfa.part2.Substitution.html#14233" class="Bound">B</a><a id="14265" class="Symbol">}</a> <a id="14267" class="Symbol">{</a><a id="14268" href="plfa.part2.Substitution.html#14230" class="Bound">A</a><a id="14269" class="Symbol">}</a>
<a id="14271" href="/19.08/Substitution/#14213" class="Function">ren-shift</a> <a id="14281" class="Symbol">{</a><a id="14282" href="plfa.part2.Substitution.html#14282" class="Bound">Γ</a><a id="14283" class="Symbol">}{</a><a id="14285" href="plfa.part2.Substitution.html#14285" class="Bound">A</a><a id="14286" class="Symbol">}{</a><a id="14288" href="plfa.part2.Substitution.html#14288" class="Bound">B</a><a id="14289" class="Symbol">}</a> <a id="14291" class="Symbol">=</a> <a id="14293" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="14308" class="Symbol">λ</a> <a id="14310" href="plfa.part2.Substitution.html#14310" class="Bound">x</a> <a id="14312" class="Symbol">→</a> <a id="14314" href="plfa.part2.Substitution.html#14338" class="Function">lemma</a> <a id="14320" class="Symbol">{</a><a id="14321" class="Argument">x</a> <a id="14323" class="Symbol">=</a> <a id="14325" href="plfa.part2.Substitution.html#14310" class="Bound">x</a><a id="14326" class="Symbol">}</a>
  <a id="14330" class="Keyword">where</a>
  <a id="14338" href="/19.08/Substitution/#14338" class="Function">lemma</a> <a id="14344" class="Symbol">:</a> <a id="14346" class="Symbol">∀</a> <a id="14348" class="Symbol">{</a><a id="14349" href="plfa.part2.Substitution.html#14349" class="Bound">x</a> <a id="14351" class="Symbol">:</a> <a id="14353" href="plfa.part2.Substitution.html#14282" class="Bound">Γ</a> <a id="14355" href="/19.08/Untyped/#3521" class="Datatype Operator">∋</a> <a id="14357" href="plfa.part2.Substitution.html#14285" class="Bound">A</a><a id="14358" class="Symbol">}</a> <a id="14360" class="Symbol">→</a> <a id="14362" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="14366" class="Symbol">(</a><a id="14367" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="14369" class="Symbol">{</a><a id="14370" class="Argument">B</a> <a id="14372" class="Symbol">=</a> <a id="14374" href="plfa.part2.Substitution.html#14288" class="Bound">B</a><a id="14375" class="Symbol">})</a> <a id="14378" href="plfa.part2.Substitution.html#14349" class="Bound">x</a> <a id="14380" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="14382" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="14384" class="Symbol">{</a><a id="14385" class="Argument">A</a> <a id="14387" class="Symbol">=</a> <a id="14389" href="plfa.part2.Substitution.html#14288" class="Bound">B</a><a id="14390" class="Symbol">}</a> <a id="14392" href="plfa.part2.Substitution.html#14349" class="Bound">x</a>
  <a id="14396" href="/19.08/Substitution/#14338" class="Function">lemma</a> <a id="14402" class="Symbol">{</a><a id="14403" class="Argument">x</a> <a id="14405" class="Symbol">=</a> <a id="14407" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="14408" class="Symbol">}</a> <a id="14410" class="Symbol">=</a> <a id="14412" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="14419" href="/19.08/Substitution/#14338" class="Function">lemma</a> <a id="14425" class="Symbol">{</a><a id="14426" class="Argument">x</a> <a id="14428" class="Symbol">=</a> <a id="14430" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="14432" href="plfa.part2.Substitution.html#14432" class="Bound">x</a><a id="14433" class="Symbol">}</a> <a id="14435" class="Symbol">=</a> <a id="14437" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><p>The substitution <code class="language-plaintext highlighter-rouge">rename S_ M</code> is equivalent to shifting: <code class="language-plaintext highlighter-rouge">⟪ ↑ ⟫ M</code>.</p><pre class="Agda"><a id="rename-shift"></a><a id="14521" href="/19.08/Substitution/#14521" class="Function">rename-shift</a> <a id="14534" class="Symbol">:</a> <a id="14536" class="Symbol">∀{</a><a id="14538" href="plfa.part2.Substitution.html#14538" class="Bound">Γ</a><a id="14539" class="Symbol">}</a> <a id="14541" class="Symbol">{</a><a id="14542" href="plfa.part2.Substitution.html#14542" class="Bound">A</a><a id="14543" class="Symbol">}</a> <a id="14545" class="Symbol">{</a><a id="14546" href="plfa.part2.Substitution.html#14546" class="Bound">B</a><a id="14547" class="Symbol">}</a> <a id="14549" class="Symbol">{</a><a id="14550" href="plfa.part2.Substitution.html#14550" class="Bound">M</a> <a id="14552" class="Symbol">:</a> <a id="14554" href="plfa.part2.Substitution.html#14538" class="Bound">Γ</a> <a id="14556" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="14558" href="plfa.part2.Substitution.html#14542" class="Bound">A</a><a id="14559" class="Symbol">}</a>
             <a id="14574" class="Symbol">→</a> <a id="14576" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="14583" class="Symbol">(</a><a id="14584" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="14586" class="Symbol">{</a><a id="14587" class="Argument">B</a> <a id="14589" class="Symbol">=</a> <a id="14591" href="/19.08/Substitution/#14546" class="Bound">B</a><a id="14592" class="Symbol">})</a> <a id="14595" href="plfa.part2.Substitution.html#14550" class="Bound">M</a> <a id="14597" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="14599" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="14601" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="14603" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="14605" href="plfa.part2.Substitution.html#14550" class="Bound">M</a>
<a id="14607" href="/19.08/Substitution/#14521" class="Function">rename-shift</a><a id="14619" class="Symbol">{</a><a id="14620" href="plfa.part2.Substitution.html#14620" class="Bound">Γ</a><a id="14621" class="Symbol">}{</a><a id="14623" href="plfa.part2.Substitution.html#14623" class="Bound">A</a><a id="14624" class="Symbol">}{</a><a id="14626" href="plfa.part2.Substitution.html#14626" class="Bound">B</a><a id="14627" class="Symbol">}{</a><a id="14629" href="plfa.part2.Substitution.html#14629" class="Bound">M</a><a id="14630" class="Symbol">}</a> <a id="14632" class="Symbol">=</a>
  <a id="14636" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
    <a id="14646" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="14653" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="14656" href="/19.08/Substitution/#14629" class="Bound">M</a>
  <a id="14660" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="14663" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a> <a id="14680" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
    <a id="14686" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="14688" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="14692" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S_</a> <a id="14695" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="14697" href="plfa.part2.Substitution.html#14629" class="Bound">M</a>
  <a id="14701" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="14704" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="14712" class="Symbol">{</a><a id="14713" class="Argument">M</a> <a id="14715" class="Symbol">=</a> <a id="14717" href="plfa.part2.Substitution.html#14629" class="Bound">M</a><a id="14718" class="Symbol">}</a> <a id="14720" href="plfa.part2.Substitution.html#14213" class="Function">ren-shift</a> <a id="14730" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="14735" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
    <a id="14741" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="14743" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="14745" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="14747" href="plfa.part2.Substitution.html#14629" class="Bound">M</a>
  <a id="14751" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><p>Next we prove the equation <code class="language-plaintext highlighter-rouge">exts-cons-shift</code>, which states that <code class="language-plaintext highlighter-rouge">exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code class="language-plaintext highlighter-rouge">σ</code> and then shifting. The proof is by case analysis on the variable <code class="language-plaintext highlighter-rouge">x</code>, using <code class="language-plaintext highlighter-rouge">rename-subst-ren</code> for when <code class="language-plaintext highlighter-rouge">x = S y</code>.</p><pre class="Agda"><a id="exts-cons-shift"></a><a id="15018" href="/19.08/Substitution/#15018" class="Function">exts-cons-shift</a> <a id="15034" class="Symbol">:</a> <a id="15036" class="Symbol">∀{</a><a id="15038" href="plfa.part2.Substitution.html#15038" class="Bound">Γ</a> <a id="15040" href="plfa.part2.Substitution.html#15040" class="Bound">Δ</a><a id="15041" class="Symbol">}</a> <a id="15043" class="Symbol">{</a><a id="15044" href="plfa.part2.Substitution.html#15044" class="Bound">A</a> <a id="15046" href="plfa.part2.Substitution.html#15046" class="Bound">B</a><a id="15047" class="Symbol">}</a> <a id="15049" class="Symbol">{</a><a id="15050" href="plfa.part2.Substitution.html#15050" class="Bound">σ</a> <a id="15052" class="Symbol">:</a> <a id="15054" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="15060" href="plfa.part2.Substitution.html#15038" class="Bound">Γ</a> <a id="15062" href="plfa.part2.Substitution.html#15040" class="Bound">Δ</a><a id="15063" class="Symbol">}</a>
                <a id="15081" class="Symbol">→</a> <a id="15083" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="15088" href="/19.08/Substitution/#15050" class="Bound">σ</a> <a id="15090" class="Symbol">{</a><a id="15091" href="plfa.part2.Substitution.html#15044" class="Bound">A</a><a id="15092" class="Symbol">}</a> <a id="15094" class="Symbol">{</a><a id="15095" href="plfa.part2.Substitution.html#15046" class="Bound">B</a><a id="15096" class="Symbol">}</a> <a id="15098" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="15100" class="Symbol">(</a><a id="15101" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`</a> <a id="15103" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a> <a id="15105" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="15107" class="Symbol">(</a><a id="15108" href="plfa.part2.Substitution.html#15050" class="Bound">σ</a> <a id="15110" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="15112" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="15113" class="Symbol">))</a>
<a id="15116" href="/19.08/Substitution/#15018" class="Function">exts-cons-shift</a> <a id="15132" class="Symbol">=</a> <a id="15134" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="15149" class="Symbol">λ</a> <a id="15151" href="plfa.part2.Substitution.html#15151" class="Bound">x</a> <a id="15153" class="Symbol">→</a> <a id="15155" href="plfa.part2.Substitution.html#15178" class="Function">lemma</a><a id="15160" class="Symbol">{</a><a id="15161" class="Argument">x</a> <a id="15163" class="Symbol">=</a> <a id="15165" href="plfa.part2.Substitution.html#15151" class="Bound">x</a><a id="15166" class="Symbol">}</a>
  <a id="15170" class="Keyword">where</a>
  <a id="15178" href="/19.08/Substitution/#15178" class="Function">lemma</a> <a id="15184" class="Symbol">:</a> <a id="15186" class="Symbol">∀{</a><a id="15188" href="plfa.part2.Substitution.html#15188" class="Bound">Γ</a> <a id="15190" href="plfa.part2.Substitution.html#15190" class="Bound">Δ</a><a id="15191" class="Symbol">}</a> <a id="15193" class="Symbol">{</a><a id="15194" href="plfa.part2.Substitution.html#15194" class="Bound">A</a> <a id="15196" href="plfa.part2.Substitution.html#15196" class="Bound">B</a><a id="15197" class="Symbol">}</a> <a id="15199" class="Symbol">{</a><a id="15200" href="plfa.part2.Substitution.html#15200" class="Bound">σ</a> <a id="15202" class="Symbol">:</a> <a id="15204" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="15210" href="plfa.part2.Substitution.html#15188" class="Bound">Γ</a> <a id="15212" href="plfa.part2.Substitution.html#15190" class="Bound">Δ</a><a id="15213" class="Symbol">}</a> <a id="15215" class="Symbol">{</a><a id="15216" href="plfa.part2.Substitution.html#15216" class="Bound">x</a> <a id="15218" class="Symbol">:</a> <a id="15220" href="plfa.part2.Substitution.html#15188" class="Bound">Γ</a> <a id="15222" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="15224" href="plfa.part2.Substitution.html#15196" class="Bound">B</a> <a id="15226" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="15228" href="plfa.part2.Substitution.html#15194" class="Bound">A</a><a id="15229" class="Symbol">}</a>
                  <a id="15249" class="Symbol">→</a> <a id="15251" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="15256" href="/19.08/Substitution/#15200" class="Bound">σ</a> <a id="15258" href="plfa.part2.Substitution.html#15216" class="Bound">x</a> <a id="15260" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="15262" class="Symbol">(</a><a id="15263" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`</a> <a id="15265" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a> <a id="15267" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="15269" class="Symbol">(</a><a id="15270" href="plfa.part2.Substitution.html#15200" class="Bound">σ</a> <a id="15272" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="15274" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="15275" class="Symbol">))</a> <a id="15278" href="plfa.part2.Substitution.html#15216" class="Bound">x</a>
  <a id="15282" href="/19.08/Substitution/#15178" class="Function">lemma</a> <a id="15288" class="Symbol">{</a><a id="15289" class="Argument">x</a> <a id="15291" class="Symbol">=</a> <a id="15293" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="15294" class="Symbol">}</a> <a id="15296" class="Symbol">=</a> <a id="15298" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="15305" href="/19.08/Substitution/#15178" class="Function">lemma</a> <a id="15311" class="Symbol">{</a><a id="15312" class="Argument">x</a> <a id="15314" class="Symbol">=</a> <a id="15316" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="15318" href="plfa.part2.Substitution.html#15318" class="Bound">y</a><a id="15319" class="Symbol">}</a> <a id="15321" class="Symbol">=</a> <a id="15323" href="plfa.part2.Substitution.html#13654" class="Function">rename-subst-ren</a>
</pre><p>As a corollary, we have a similar correspondence for <code class="language-plaintext highlighter-rouge">ren (ext ρ)</code>.</p><pre class="Agda"><a id="ext-cons-Z-shift"></a><a id="15418" href="/19.08/Substitution/#15418" class="Function">ext-cons-Z-shift</a> <a id="15435" class="Symbol">:</a> <a id="15437" class="Symbol">∀{</a><a id="15439" href="plfa.part2.Substitution.html#15439" class="Bound">Γ</a> <a id="15441" href="plfa.part2.Substitution.html#15441" class="Bound">Δ</a><a id="15442" class="Symbol">}</a> <a id="15444" class="Symbol">{</a><a id="15445" href="plfa.part2.Substitution.html#15445" class="Bound">ρ</a> <a id="15447" class="Symbol">:</a> <a id="15449" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="15456" href="plfa.part2.Substitution.html#15439" class="Bound">Γ</a> <a id="15458" href="plfa.part2.Substitution.html#15441" class="Bound">Δ</a><a id="15459" class="Symbol">}{</a><a id="15461" href="plfa.part2.Substitution.html#15461" class="Bound">A</a><a id="15462" class="Symbol">}{</a><a id="15464" href="plfa.part2.Substitution.html#15464" class="Bound">B</a><a id="15465" class="Symbol">}</a>
                 <a id="15484" class="Symbol">→</a> <a id="15486" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="15490" class="Symbol">(</a><a id="15491" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="15495" href="plfa.part2.Substitution.html#15445" class="Bound">ρ</a> <a id="15497" class="Symbol">{</a><a id="15498" class="Argument">B</a> <a id="15500" class="Symbol">=</a> <a id="15502" href="plfa.part2.Substitution.html#15464" class="Bound">B</a><a id="15503" class="Symbol">})</a> <a id="15506" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="15508" class="Symbol">(</a><a id="15509" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`</a> <a id="15511" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a> <a id="15513" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="15515" class="Symbol">(</a><a id="15516" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="15520" href="plfa.part2.Substitution.html#15445" class="Bound">ρ</a> <a id="15522" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="15524" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="15525" class="Symbol">))</a> <a id="15528" class="Symbol">{</a><a id="15529" href="plfa.part2.Substitution.html#15461" class="Bound">A</a><a id="15530" class="Symbol">}</a>
<a id="15532" href="/19.08/Substitution/#15418" class="Function">ext-cons-Z-shift</a> <a id="15549" class="Symbol">{</a><a id="15550" href="plfa.part2.Substitution.html#15550" class="Bound">Γ</a><a id="15551" class="Symbol">}{</a><a id="15553" href="plfa.part2.Substitution.html#15553" class="Bound">Δ</a><a id="15554" class="Symbol">}{</a><a id="15556" href="plfa.part2.Substitution.html#15556" class="Bound">ρ</a><a id="15557" class="Symbol">}{</a><a id="15559" href="plfa.part2.Substitution.html#15559" class="Bound">A</a><a id="15560" class="Symbol">}{</a><a id="15562" href="plfa.part2.Substitution.html#15562" class="Bound">B</a><a id="15563" class="Symbol">}</a> <a id="15565" class="Symbol">=</a>
  <a id="15569" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
    <a id="15579" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="15583" class="Symbol">(</a><a id="15584" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="15588" href="plfa.part2.Substitution.html#15556" class="Bound">ρ</a><a id="15589" class="Symbol">)</a>
  <a id="15593" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="15596" href="/19.08/Substitution/#13285" class="Function">ren-ext</a> <a id="15604" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
    <a id="15610" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="15615" class="Symbol">(</a><a id="15616" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="15620" href="plfa.part2.Substitution.html#15556" class="Bound">ρ</a><a id="15621" class="Symbol">)</a>
  <a id="15625" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="15628" href="/19.08/Substitution/#15018" class="Function">exts-cons-shift</a><a id="15643" class="Symbol">{</a><a id="15644" class="Argument">σ</a> <a id="15646" class="Symbol">=</a> <a id="15648" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="15652" href="plfa.part2.Substitution.html#15556" class="Bound">ρ</a><a id="15653" class="Symbol">}</a> <a id="15655" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
   <a id="15660" class="Symbol">((</a><a id="15662" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="15664" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="15665" class="Symbol">)</a> <a id="15667" href="/19.08/Substitution/#3427" class="Function Operator">•</a> <a id="15669" class="Symbol">(</a><a id="15670" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="15674" href="plfa.part2.Substitution.html#15556" class="Bound">ρ</a> <a id="15676" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="15678" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="15679" class="Symbol">))</a>
  <a id="15684" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><p>Finally, the <code class="language-plaintext highlighter-rouge">subst-zero M</code> substitution is equivalent to cons’ing <code class="language-plaintext highlighter-rouge">M</code> onto the identity substitution.</p><pre class="Agda"><a id="subst-Z-cons-ids"></a><a id="15799" href="/19.08/Substitution/#15799" class="Function">subst-Z-cons-ids</a> <a id="15816" class="Symbol">:</a> <a id="15818" class="Symbol">∀{</a><a id="15820" href="plfa.part2.Substitution.html#15820" class="Bound">Γ</a><a id="15821" class="Symbol">}{</a><a id="15823" href="plfa.part2.Substitution.html#15823" class="Bound">A</a> <a id="15825" href="plfa.part2.Substitution.html#15825" class="Bound">B</a> <a id="15827" class="Symbol">:</a> <a id="15829" href="/19.08/Untyped/#2869" class="Datatype">Type</a><a id="15833" class="Symbol">}{</a><a id="15835" href="plfa.part2.Substitution.html#15835" class="Bound">M</a> <a id="15837" class="Symbol">:</a> <a id="15839" href="plfa.part2.Substitution.html#15820" class="Bound">Γ</a> <a id="15841" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="15843" href="plfa.part2.Substitution.html#15825" class="Bound">B</a><a id="15844" class="Symbol">}</a>
                 <a id="15863" class="Symbol">→</a> <a id="15865" href="/19.08/Untyped/#7375" class="Function">subst-zero</a> <a id="15876" href="/19.08/Substitution/#15835" class="Bound">M</a> <a id="15878" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="15880" class="Symbol">(</a><a id="15881" href="plfa.part2.Substitution.html#15835" class="Bound">M</a> <a id="15883" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="15885" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="15888" class="Symbol">)</a> <a id="15890" class="Symbol">{</a><a id="15891" href="plfa.part2.Substitution.html#15823" class="Bound">A</a><a id="15892" class="Symbol">}</a>
<a id="15894" href="/19.08/Substitution/#15799" class="Function">subst-Z-cons-ids</a> <a id="15911" class="Symbol">=</a> <a id="15913" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="15928" class="Symbol">λ</a> <a id="15930" href="plfa.part2.Substitution.html#15930" class="Bound">x</a> <a id="15932" class="Symbol">→</a> <a id="15934" href="plfa.part2.Substitution.html#15958" class="Function">lemma</a> <a id="15940" class="Symbol">{</a><a id="15941" class="Argument">x</a> <a id="15943" class="Symbol">=</a> <a id="15945" href="plfa.part2.Substitution.html#15930" class="Bound">x</a><a id="15946" class="Symbol">}</a>
  <a id="15950" class="Keyword">where</a>
  <a id="15958" href="/19.08/Substitution/#15958" class="Function">lemma</a> <a id="15964" class="Symbol">:</a> <a id="15966" class="Symbol">∀{</a><a id="15968" href="plfa.part2.Substitution.html#15968" class="Bound">Γ</a><a id="15969" class="Symbol">}{</a><a id="15971" href="plfa.part2.Substitution.html#15971" class="Bound">A</a> <a id="15973" href="plfa.part2.Substitution.html#15973" class="Bound">B</a> <a id="15975" class="Symbol">:</a> <a id="15977" href="/19.08/Untyped/#2869" class="Datatype">Type</a><a id="15981" class="Symbol">}{</a><a id="15983" href="plfa.part2.Substitution.html#15983" class="Bound">M</a> <a id="15985" class="Symbol">:</a> <a id="15987" href="plfa.part2.Substitution.html#15968" class="Bound">Γ</a> <a id="15989" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="15991" href="plfa.part2.Substitution.html#15973" class="Bound">B</a><a id="15992" class="Symbol">}{</a><a id="15994" href="plfa.part2.Substitution.html#15994" class="Bound">x</a> <a id="15996" class="Symbol">:</a> <a id="15998" href="plfa.part2.Substitution.html#15968" class="Bound">Γ</a> <a id="16000" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="16002" href="plfa.part2.Substitution.html#15973" class="Bound">B</a> <a id="16004" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="16006" href="plfa.part2.Substitution.html#15971" class="Bound">A</a><a id="16007" class="Symbol">}</a>
                      <a id="16031" class="Symbol">→</a> <a id="16033" href="/19.08/Untyped/#7375" class="Function">subst-zero</a> <a id="16044" href="/19.08/Substitution/#15983" class="Bound">M</a> <a id="16046" href="plfa.part2.Substitution.html#15994" class="Bound">x</a> <a id="16048" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="16050" class="Symbol">(</a><a id="16051" href="plfa.part2.Substitution.html#15983" class="Bound">M</a> <a id="16053" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="16055" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="16058" class="Symbol">)</a> <a id="16060" href="plfa.part2.Substitution.html#15994" class="Bound">x</a>
  <a id="16064" href="/19.08/Substitution/#15958" class="Function">lemma</a> <a id="16070" class="Symbol">{</a><a id="16071" class="Argument">x</a> <a id="16073" class="Symbol">=</a> <a id="16075" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="16076" class="Symbol">}</a> <a id="16078" class="Symbol">=</a> <a id="16080" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="16087" href="/19.08/Substitution/#15958" class="Function">lemma</a> <a id="16093" class="Symbol">{</a><a id="16094" class="Argument">x</a> <a id="16096" class="Symbol">=</a> <a id="16098" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="16100" href="plfa.part2.Substitution.html#16100" class="Bound">x</a><a id="16101" class="Symbol">}</a> <a id="16103" class="Symbol">=</a> <a id="16105" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><h2 id="proofs-of-sub-abs-sub-id-and-rename-id">Proofs of sub-abs, sub-id, and rename-id</h2><p>The equation <code class="language-plaintext highlighter-rouge">sub-abs</code> follows immediately from the equation <code class="language-plaintext highlighter-rouge">exts-cons-shift</code>.</p><pre class="Agda"><a id="sub-abs"></a><a id="16246" href="/19.08/Substitution/#16246" class="Function">sub-abs</a> <a id="16254" class="Symbol">:</a> <a id="16256" class="Symbol">∀{</a><a id="16258" href="plfa.part2.Substitution.html#16258" class="Bound">Γ</a> <a id="16260" href="plfa.part2.Substitution.html#16260" class="Bound">Δ</a><a id="16261" class="Symbol">}</a> <a id="16263" class="Symbol">{</a><a id="16264" href="plfa.part2.Substitution.html#16264" class="Bound">σ</a> <a id="16266" class="Symbol">:</a> <a id="16268" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="16274" href="plfa.part2.Substitution.html#16258" class="Bound">Γ</a> <a id="16276" href="plfa.part2.Substitution.html#16260" class="Bound">Δ</a><a id="16277" class="Symbol">}</a> <a id="16279" class="Symbol">{</a><a id="16280" href="plfa.part2.Substitution.html#16280" class="Bound">N</a> <a id="16282" class="Symbol">:</a> <a id="16284" href="plfa.part2.Substitution.html#16258" class="Bound">Γ</a> <a id="16286" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="16288" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="16290" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="16292" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="16293" class="Symbol">}</a>
        <a id="16303" class="Symbol">→</a> <a id="16305" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="16307" href="plfa.part2.Substitution.html#16264" class="Bound">σ</a> <a id="16309" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="16311" class="Symbol">(</a><a id="16312" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="16314" href="plfa.part2.Substitution.html#16280" class="Bound">N</a><a id="16315" class="Symbol">)</a> <a id="16317" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="16319" href="plfa.part2.Untyped.html#4382" class="InductiveConstructor Operator">ƛ</a> <a id="16321" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="16323" class="Symbol">(</a><a id="16324" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`</a> <a id="16326" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="16327" class="Symbol">)</a> <a id="16329" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="16331" class="Symbol">(</a><a id="16332" href="plfa.part2.Substitution.html#16264" class="Bound">σ</a> <a id="16334" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="16336" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="16337" class="Symbol">)</a> <a id="16339" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="16341" href="plfa.part2.Substitution.html#16280" class="Bound">N</a>
<a id="16343" href="/19.08/Substitution/#16246" class="Function">sub-abs</a> <a id="16351" class="Symbol">{</a><a id="16352" class="Argument">σ</a> <a id="16354" class="Symbol">=</a> <a id="16356" href="plfa.part2.Substitution.html#16356" class="Bound">σ</a><a id="16357" class="Symbol">}{</a><a id="16359" class="Argument">N</a> <a id="16361" class="Symbol">=</a> <a id="16363" href="plfa.part2.Substitution.html#16363" class="Bound">N</a><a id="16364" class="Symbol">}</a> <a id="16366" class="Symbol">=</a>
   <a id="16371" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
     <a id="16382" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="16384" href="plfa.part2.Substitution.html#16356" class="Bound">σ</a> <a id="16386" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="16388" class="Symbol">(</a><a id="16389" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="16391" href="plfa.part2.Substitution.html#16363" class="Bound">N</a><a id="16392" class="Symbol">)</a>
   <a id="16397" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
     <a id="16406" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="16408" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="16410" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="16415" href="plfa.part2.Substitution.html#16356" class="Bound">σ</a> <a id="16417" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="16419" href="plfa.part2.Substitution.html#16363" class="Bound">N</a>
   <a id="16424" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="16427" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="16432" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="16435" class="Symbol">(</a><a id="16436" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="16444" class="Symbol">{</a><a id="16445" class="Argument">M</a> <a id="16447" class="Symbol">=</a> <a id="16449" href="plfa.part2.Substitution.html#16363" class="Bound">N</a><a id="16450" class="Symbol">}</a> <a id="16452" href="plfa.part2.Substitution.html#15018" class="Function">exts-cons-shift</a> <a id="16468" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="16472" class="Symbol">)</a> <a id="16474" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="16481" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="16483" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="16485" class="Symbol">(</a><a id="16486" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`</a> <a id="16488" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="16489" class="Symbol">)</a> <a id="16491" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="16493" class="Symbol">(</a><a id="16494" href="plfa.part2.Substitution.html#16356" class="Bound">σ</a> <a id="16496" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="16498" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="16499" class="Symbol">)</a> <a id="16501" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="16503" href="plfa.part2.Substitution.html#16363" class="Bound">N</a>
   <a id="16508" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><p>The proof of <code class="language-plaintext highlighter-rouge">sub-id</code> requires the following lemma which says that extending the identity substitution produces the identity substitution.</p><pre class="Agda"><a id="exts-ids"></a><a id="16659" href="/19.08/Substitution/#16659" class="Function">exts-ids</a> <a id="16668" class="Symbol">:</a> <a id="16670" class="Symbol">∀{</a><a id="16672" href="plfa.part2.Substitution.html#16672" class="Bound">Γ</a><a id="16673" class="Symbol">}{</a><a id="16675" href="plfa.part2.Substitution.html#16675" class="Bound">A</a> <a id="16677" href="plfa.part2.Substitution.html#16677" class="Bound">B</a><a id="16678" class="Symbol">}</a>
         <a id="16689" class="Symbol">→</a> <a id="16691" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="16696" href="/19.08/Substitution/#3046" class="Function">ids</a> <a id="16700" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="16702" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="16706" class="Symbol">{</a><a id="16707" href="plfa.part2.Substitution.html#16672" class="Bound">Γ</a> <a id="16709" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="16711" href="plfa.part2.Substitution.html#16677" class="Bound">B</a><a id="16712" class="Symbol">}</a> <a id="16714" class="Symbol">{</a><a id="16715" href="plfa.part2.Substitution.html#16675" class="Bound">A</a><a id="16716" class="Symbol">}</a>
<a id="16718" href="/19.08/Substitution/#16659" class="Function">exts-ids</a> <a id="16727" class="Symbol">{</a><a id="16728" href="plfa.part2.Substitution.html#16728" class="Bound">Γ</a><a id="16729" class="Symbol">}{</a><a id="16731" href="plfa.part2.Substitution.html#16731" class="Bound">A</a><a id="16732" class="Symbol">}{</a><a id="16734" href="plfa.part2.Substitution.html#16734" class="Bound">B</a><a id="16735" class="Symbol">}</a> <a id="16737" class="Symbol">=</a> <a id="16739" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="16754" href="plfa.part2.Substitution.html#16768" class="Function">lemma</a>
  <a id="16762" class="Keyword">where</a> <a id="16768" href="/19.08/Substitution/#16768" class="Function">lemma</a> <a id="16774" class="Symbol">:</a> <a id="16776" class="Symbol">(</a><a id="16777" href="plfa.part2.Substitution.html#16777" class="Bound">x</a> <a id="16779" class="Symbol">:</a> <a id="16781" href="plfa.part2.Substitution.html#16728" class="Bound">Γ</a> <a id="16783" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="16785" href="plfa.part2.Substitution.html#16734" class="Bound">B</a> <a id="16787" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="16789" href="plfa.part2.Substitution.html#16731" class="Bound">A</a><a id="16790" class="Symbol">)</a> <a id="16792" class="Symbol">→</a> <a id="16794" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="16799" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="16803" href="plfa.part2.Substitution.html#16777" class="Bound">x</a> <a id="16805" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="16807" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="16811" href="plfa.part2.Substitution.html#16777" class="Bound">x</a>
        <a id="16821" href="/19.08/Substitution/#16768" class="Function">lemma</a> <a id="16827" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="16829" class="Symbol">=</a> <a id="16831" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
        <a id="16844" href="/19.08/Substitution/#16768" class="Function">lemma</a> <a id="16850" class="Symbol">(</a><a id="16851" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="16853" href="plfa.part2.Substitution.html#16853" class="Bound">x</a><a id="16854" class="Symbol">)</a> <a id="16856" class="Symbol">=</a> <a id="16858" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><p>The proof of <code class="language-plaintext highlighter-rouge">⟪ ids ⟫ M ≡ M</code> now follows easily by induction on <code class="language-plaintext highlighter-rouge">M</code>, using <code class="language-plaintext highlighter-rouge">exts-ids</code> in the case for <code class="language-plaintext highlighter-rouge">M ≡ ƛ N</code>.</p><pre class="Agda"><a id="sub-id"></a><a id="16986" href="/19.08/Substitution/#16986" class="Function">sub-id</a> <a id="16993" class="Symbol">:</a> <a id="16995" class="Symbol">∀{</a><a id="16997" href="plfa.part2.Substitution.html#16997" class="Bound">Γ</a><a id="16998" class="Symbol">}</a> <a id="17000" class="Symbol">{</a><a id="17001" href="plfa.part2.Substitution.html#17001" class="Bound">A</a><a id="17002" class="Symbol">}</a> <a id="17004" class="Symbol">{</a><a id="17005" href="plfa.part2.Substitution.html#17005" class="Bound">M</a> <a id="17007" class="Symbol">:</a> <a id="17009" href="plfa.part2.Substitution.html#16997" class="Bound">Γ</a> <a id="17011" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="17013" href="plfa.part2.Substitution.html#17001" class="Bound">A</a><a id="17014" class="Symbol">}</a>
         <a id="17025" class="Symbol">→</a> <a id="17027" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17029" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="17033" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17035" href="plfa.part2.Substitution.html#17005" class="Bound">M</a> <a id="17037" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="17039" href="plfa.part2.Substitution.html#17005" class="Bound">M</a>
<a id="17041" href="/19.08/Substitution/#16986" class="Function">sub-id</a> <a id="17048" class="Symbol">{</a><a id="17049" class="Argument">M</a> <a id="17051" class="Symbol">=</a> <a id="17053" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="17055" href="plfa.part2.Substitution.html#17055" class="Bound">x</a><a id="17056" class="Symbol">}</a> <a id="17058" class="Symbol">=</a> <a id="17060" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="17065" href="/19.08/Substitution/#16986" class="Function">sub-id</a> <a id="17072" class="Symbol">{</a><a id="17073" class="Argument">M</a> <a id="17075" class="Symbol">=</a> <a id="17077" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="17079" href="plfa.part2.Substitution.html#17079" class="Bound">N</a><a id="17080" class="Symbol">}</a> <a id="17082" class="Symbol">=</a>
   <a id="17087" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
     <a id="17098" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17100" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="17104" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17106" class="Symbol">(</a><a id="17107" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="17109" href="plfa.part2.Substitution.html#17079" class="Bound">N</a><a id="17110" class="Symbol">)</a>
   <a id="17115" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
     <a id="17124" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="17126" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17128" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="17133" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="17137" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17139" href="plfa.part2.Substitution.html#17079" class="Bound">N</a>
   <a id="17144" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="17147" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="17152" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="17155" class="Symbol">(</a><a id="17156" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="17164" class="Symbol">{</a><a id="17165" class="Argument">M</a> <a id="17167" class="Symbol">=</a> <a id="17169" href="plfa.part2.Substitution.html#17079" class="Bound">N</a><a id="17170" class="Symbol">}</a> <a id="17172" href="plfa.part2.Substitution.html#16659" class="Function">exts-ids</a> <a id="17181" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="17185" class="Symbol">)</a>  <a id="17188" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="17195" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="17197" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17199" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="17203" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17205" href="plfa.part2.Substitution.html#17079" class="Bound">N</a>
   <a id="17210" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="17213" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="17218" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="17221" href="/19.08/Substitution/#16986" class="Function">sub-id</a> <a id="17228" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="17235" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="17237" href="/19.08/Substitution/#17079" class="Bound">N</a>
   <a id="17242" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
<a id="17244" href="/19.08/Substitution/#16986" class="Function">sub-id</a> <a id="17251" class="Symbol">{</a><a id="17252" class="Argument">M</a> <a id="17254" class="Symbol">=</a> <a id="17256" href="plfa.part2.Substitution.html#17256" class="Bound">L</a> <a id="17258" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="17260" href="plfa.part2.Substitution.html#17260" class="Bound">M</a><a id="17261" class="Symbol">}</a> <a id="17263" class="Symbol">=</a> <a id="17265" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="17271" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">_·_</a> <a id="17275" href="plfa.part2.Substitution.html#16986" class="Function">sub-id</a> <a id="17282" href="plfa.part2.Substitution.html#16986" class="Function">sub-id</a>
</pre><p>The <code class="language-plaintext highlighter-rouge">rename-id</code> equation is a corollary is <code class="language-plaintext highlighter-rouge">sub-id</code>.</p><pre class="Agda"><a id="rename-id"></a><a id="17352" href="/19.08/Substitution/#17352" class="Function">rename-id</a> <a id="17362" class="Symbol">:</a> <a id="17364" class="Symbol">∀</a> <a id="17366" class="Symbol">{</a><a id="17367" href="plfa.part2.Substitution.html#17367" class="Bound">Γ</a><a id="17368" class="Symbol">}{</a><a id="17370" href="plfa.part2.Substitution.html#17370" class="Bound">A</a><a id="17371" class="Symbol">}</a> <a id="17373" class="Symbol">{</a><a id="17374" href="plfa.part2.Substitution.html#17374" class="Bound">M</a> <a id="17376" class="Symbol">:</a> <a id="17378" href="plfa.part2.Substitution.html#17367" class="Bound">Γ</a> <a id="17380" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="17382" href="plfa.part2.Substitution.html#17370" class="Bound">A</a><a id="17383" class="Symbol">}</a>
  <a id="17387" class="Symbol">→</a> <a id="17389" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="17396" class="Symbol">(λ</a> <a id="17399" class="Symbol">{</a><a id="17400" href="/19.08/Substitution/#17400" class="Bound">A</a><a id="17401" class="Symbol">}</a> <a id="17403" href="plfa.part2.Substitution.html#17403" class="Bound">x</a> <a id="17405" class="Symbol">→</a> <a id="17407" href="plfa.part2.Substitution.html#17403" class="Bound">x</a><a id="17408" class="Symbol">)</a> <a id="17410" href="plfa.part2.Substitution.html#17374" class="Bound">M</a> <a id="17412" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="17414" href="plfa.part2.Substitution.html#17374" class="Bound">M</a>
<a id="17416" href="/19.08/Substitution/#17352" class="Function">rename-id</a> <a id="17426" class="Symbol">{</a><a id="17427" class="Argument">M</a> <a id="17429" class="Symbol">=</a> <a id="17431" href="plfa.part2.Substitution.html#17431" class="Bound">M</a><a id="17432" class="Symbol">}</a> <a id="17434" class="Symbol">=</a>
   <a id="17439" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
     <a id="17450" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="17457" class="Symbol">(λ</a> <a id="17460" class="Symbol">{</a><a id="17461" href="/19.08/Substitution/#17461" class="Bound">A</a><a id="17462" class="Symbol">}</a> <a id="17464" href="plfa.part2.Substitution.html#17464" class="Bound">x</a> <a id="17466" class="Symbol">→</a> <a id="17468" href="plfa.part2.Substitution.html#17464" class="Bound">x</a><a id="17469" class="Symbol">)</a> <a id="17471" href="plfa.part2.Substitution.html#17431" class="Bound">M</a>
   <a id="17476" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="17479" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a>  <a id="17497" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="17504" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17506" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="17510" class="Symbol">(λ</a> <a id="17513" class="Symbol">{</a><a id="17514" href="plfa.part2.Substitution.html#17514" class="Bound">A</a><a id="17515" class="Symbol">}</a> <a id="17517" href="plfa.part2.Substitution.html#17517" class="Bound">x</a> <a id="17519" class="Symbol">→</a> <a id="17521" href="plfa.part2.Substitution.html#17517" class="Bound">x</a><a id="17522" class="Symbol">)</a> <a id="17524" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17526" href="plfa.part2.Substitution.html#17431" class="Bound">M</a>
   <a id="17531" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
     <a id="17540" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17542" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="17546" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17548" href="plfa.part2.Substitution.html#17431" class="Bound">M</a>
   <a id="17553" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="17556" href="/19.08/Substitution/#16986" class="Function">sub-id</a>  <a id="17564" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="17571" href="/19.08/Substitution/#17431" class="Bound">M</a>
   <a id="17576" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-idr">Proof of sub-idR</h2><p>The proof of <code class="language-plaintext highlighter-rouge">sub-idR</code> follows directly from <code class="language-plaintext highlighter-rouge">sub-id</code>.</p><pre class="Agda"><a id="sub-idR"></a><a id="17664" href="/19.08/Substitution/#17664" class="Function">sub-idR</a> <a id="17672" class="Symbol">:</a> <a id="17674" class="Symbol">∀{</a><a id="17676" href="plfa.part2.Substitution.html#17676" class="Bound">Γ</a> <a id="17678" href="plfa.part2.Substitution.html#17678" class="Bound">Δ</a><a id="17679" class="Symbol">}</a> <a id="17681" class="Symbol">{</a><a id="17682" href="plfa.part2.Substitution.html#17682" class="Bound">σ</a> <a id="17684" class="Symbol">:</a> <a id="17686" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="17692" href="plfa.part2.Substitution.html#17676" class="Bound">Γ</a> <a id="17694" href="plfa.part2.Substitution.html#17678" class="Bound">Δ</a><a id="17695" class="Symbol">}</a> <a id="17697" class="Symbol">{</a><a id="17698" href="plfa.part2.Substitution.html#17698" class="Bound">A</a><a id="17699" class="Symbol">}</a>
       <a id="17708" class="Symbol">→</a> <a id="17710" class="Symbol">(</a><a id="17711" href="/19.08/Substitution/#17682" class="Bound">σ</a> <a id="17713" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="17715" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="17718" class="Symbol">)</a> <a id="17720" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="17722" href="plfa.part2.Substitution.html#17682" class="Bound">σ</a> <a id="17724" class="Symbol">{</a><a id="17725" href="plfa.part2.Substitution.html#17698" class="Bound">A</a><a id="17726" class="Symbol">}</a>
<a id="17728" href="/19.08/Substitution/#17664" class="Function">sub-idR</a> <a id="17736" class="Symbol">{</a><a id="17737" href="plfa.part2.Substitution.html#17737" class="Bound">Γ</a><a id="17738" class="Symbol">}{</a><a id="17740" class="Argument">σ</a> <a id="17742" class="Symbol">=</a> <a id="17744" href="plfa.part2.Substitution.html#17744" class="Bound">σ</a><a id="17745" class="Symbol">}{</a><a id="17747" href="plfa.part2.Substitution.html#17747" class="Bound">A</a><a id="17748" class="Symbol">}</a> <a id="17750" class="Symbol">=</a>
          <a id="17762" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
            <a id="17780" href="/19.08/Substitution/#17744" class="Bound">σ</a> <a id="17782" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="17784" href="plfa.part2.Substitution.html#3046" class="Function">ids</a>
          <a id="17798" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
            <a id="17814" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="17816" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="17820" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="17822" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="17824" href="plfa.part2.Substitution.html#17744" class="Bound">σ</a>
          <a id="17836" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="17839" href="/19.08/Substitution/#1927" class="Postulate">extensionality</a> <a id="17854" class="Symbol">(λ</a> <a id="17857" href="plfa.part2.Substitution.html#17857" class="Bound">x</a> <a id="17859" class="Symbol">→</a> <a id="17861" href="plfa.part2.Substitution.html#16986" class="Function">sub-id</a><a id="17867" class="Symbol">)</a> <a id="17869" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
            <a id="17883" href="/19.08/Substitution/#17744" class="Bound">σ</a>
          <a id="17895" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-sub">Proof of sub-sub</h2><p>The <code class="language-plaintext highlighter-rouge">sub-sub</code> equation states that sequenced substitutions <code class="language-plaintext highlighter-rouge">σ ⨟ τ</code> are equivalent to first applying <code class="language-plaintext highlighter-rouge">σ</code> then applying <code class="language-plaintext highlighter-rouge">τ</code>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M
</code></pre></div></div><p>The proof requires several lemmas. First, we need to prove the specialization for renaming.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ (rename ρ′ M) ≡ rename (ρ ∘ ρ′) M
</code></pre></div></div><p>This in turn requires the following lemma about <code class="language-plaintext highlighter-rouge">ext</code>.</p><pre class="Agda"><a id="compose-ext"></a><a id="18283" href="/19.08/Substitution/#18283" class="Function">compose-ext</a> <a id="18295" class="Symbol">:</a> <a id="18297" class="Symbol">∀{</a><a id="18299" href="plfa.part2.Substitution.html#18299" class="Bound">Γ</a> <a id="18301" href="plfa.part2.Substitution.html#18301" class="Bound">Δ</a> <a id="18303" href="plfa.part2.Substitution.html#18303" class="Bound">Σ</a><a id="18304" class="Symbol">}{</a><a id="18306" href="plfa.part2.Substitution.html#18306" class="Bound">ρ</a> <a id="18308" class="Symbol">:</a> <a id="18310" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="18317" href="plfa.part2.Substitution.html#18301" class="Bound">Δ</a> <a id="18319" href="plfa.part2.Substitution.html#18303" class="Bound">Σ</a><a id="18320" class="Symbol">}</a> <a id="18322" class="Symbol">{</a><a id="18323" href="plfa.part2.Substitution.html#18323" class="Bound">ρ′</a> <a id="18326" class="Symbol">:</a> <a id="18328" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="18335" href="plfa.part2.Substitution.html#18299" class="Bound">Γ</a> <a id="18337" href="plfa.part2.Substitution.html#18301" class="Bound">Δ</a><a id="18338" class="Symbol">}</a> <a id="18340" class="Symbol">{</a><a id="18341" href="plfa.part2.Substitution.html#18341" class="Bound">A</a> <a id="18343" href="plfa.part2.Substitution.html#18343" class="Bound">B</a><a id="18344" class="Symbol">}</a>
            <a id="18358" class="Symbol">→</a> <a id="18360" class="Symbol">((</a><a id="18362" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="18366" href="/19.08/Substitution/#18306" class="Bound">ρ</a><a id="18367" class="Symbol">)</a> <a id="18369" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="18371" class="Symbol">(</a><a id="18372" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="18376" href="plfa.part2.Substitution.html#18323" class="Bound">ρ′</a><a id="18378" class="Symbol">))</a> <a id="18381" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="18383" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="18387" class="Symbol">(</a><a id="18388" href="plfa.part2.Substitution.html#18306" class="Bound">ρ</a> <a id="18390" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="18392" href="plfa.part2.Substitution.html#18323" class="Bound">ρ′</a><a id="18394" class="Symbol">)</a> <a id="18396" class="Symbol">{</a><a id="18397" href="plfa.part2.Substitution.html#18343" class="Bound">B</a><a id="18398" class="Symbol">}</a> <a id="18400" class="Symbol">{</a><a id="18401" href="plfa.part2.Substitution.html#18341" class="Bound">A</a><a id="18402" class="Symbol">}</a>
<a id="18404" href="/19.08/Substitution/#18283" class="Function">compose-ext</a> <a id="18416" class="Symbol">=</a> <a id="18418" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="18433" class="Symbol">λ</a> <a id="18435" href="plfa.part2.Substitution.html#18435" class="Bound">x</a> <a id="18437" class="Symbol">→</a> <a id="18439" href="plfa.part2.Substitution.html#18463" class="Function">lemma</a> <a id="18445" class="Symbol">{</a><a id="18446" class="Argument">x</a> <a id="18448" class="Symbol">=</a> <a id="18450" href="plfa.part2.Substitution.html#18435" class="Bound">x</a><a id="18451" class="Symbol">}</a>
  <a id="18455" class="Keyword">where</a>
  <a id="18463" href="/19.08/Substitution/#18463" class="Function">lemma</a> <a id="18469" class="Symbol">:</a> <a id="18471" class="Symbol">∀{</a><a id="18473" href="plfa.part2.Substitution.html#18473" class="Bound">Γ</a> <a id="18475" href="plfa.part2.Substitution.html#18475" class="Bound">Δ</a> <a id="18477" href="plfa.part2.Substitution.html#18477" class="Bound">Σ</a><a id="18478" class="Symbol">}{</a><a id="18480" href="plfa.part2.Substitution.html#18480" class="Bound">ρ</a> <a id="18482" class="Symbol">:</a> <a id="18484" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="18491" href="plfa.part2.Substitution.html#18475" class="Bound">Δ</a> <a id="18493" href="plfa.part2.Substitution.html#18477" class="Bound">Σ</a><a id="18494" class="Symbol">}</a> <a id="18496" class="Symbol">{</a><a id="18497" href="plfa.part2.Substitution.html#18497" class="Bound">ρ′</a> <a id="18500" class="Symbol">:</a> <a id="18502" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="18509" href="plfa.part2.Substitution.html#18473" class="Bound">Γ</a> <a id="18511" href="plfa.part2.Substitution.html#18475" class="Bound">Δ</a><a id="18512" class="Symbol">}</a> <a id="18514" class="Symbol">{</a><a id="18515" href="plfa.part2.Substitution.html#18515" class="Bound">A</a> <a id="18517" href="plfa.part2.Substitution.html#18517" class="Bound">B</a><a id="18518" class="Symbol">}</a> <a id="18520" class="Symbol">{</a><a id="18521" href="plfa.part2.Substitution.html#18521" class="Bound">x</a> <a id="18523" class="Symbol">:</a> <a id="18525" href="plfa.part2.Substitution.html#18473" class="Bound">Γ</a> <a id="18527" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="18529" href="plfa.part2.Substitution.html#18517" class="Bound">B</a> <a id="18531" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="18533" href="plfa.part2.Substitution.html#18515" class="Bound">A</a><a id="18534" class="Symbol">}</a>
              <a id="18550" class="Symbol">→</a> <a id="18552" class="Symbol">((</a><a id="18554" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="18558" href="/19.08/Substitution/#18480" class="Bound">ρ</a><a id="18559" class="Symbol">)</a> <a id="18561" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="18563" class="Symbol">(</a><a id="18564" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="18568" href="plfa.part2.Substitution.html#18497" class="Bound">ρ′</a><a id="18570" class="Symbol">))</a> <a id="18573" href="plfa.part2.Substitution.html#18521" class="Bound">x</a> <a id="18575" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="18577" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="18581" class="Symbol">(</a><a id="18582" href="plfa.part2.Substitution.html#18480" class="Bound">ρ</a> <a id="18584" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="18586" href="plfa.part2.Substitution.html#18497" class="Bound">ρ′</a><a id="18588" class="Symbol">)</a> <a id="18590" href="plfa.part2.Substitution.html#18521" class="Bound">x</a>
  <a id="18594" href="/19.08/Substitution/#18463" class="Function">lemma</a> <a id="18600" class="Symbol">{</a><a id="18601" class="Argument">x</a> <a id="18603" class="Symbol">=</a> <a id="18605" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="18606" class="Symbol">}</a> <a id="18608" class="Symbol">=</a> <a id="18610" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="18617" href="/19.08/Substitution/#18463" class="Function">lemma</a> <a id="18623" class="Symbol">{</a><a id="18624" class="Argument">x</a> <a id="18626" class="Symbol">=</a> <a id="18628" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="18630" href="plfa.part2.Substitution.html#18630" class="Bound">x</a><a id="18631" class="Symbol">}</a> <a id="18633" class="Symbol">=</a> <a id="18635" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre><p>To prove that composing renamings is equivalent to applying one after the other using <code class="language-plaintext highlighter-rouge">rename</code>, we proceed by induction on the term <code class="language-plaintext highlighter-rouge">M</code>, using the <code class="language-plaintext highlighter-rouge">compose-ext</code> lemma in the case for <code class="language-plaintext highlighter-rouge">M ≡ ƛ N</code>.</p><pre class="Agda"><a id="compose-rename"></a><a id="18844" href="/19.08/Substitution/#18844" class="Function">compose-rename</a> <a id="18859" class="Symbol">:</a> <a id="18861" class="Symbol">∀{</a><a id="18863" href="plfa.part2.Substitution.html#18863" class="Bound">Γ</a> <a id="18865" href="plfa.part2.Substitution.html#18865" class="Bound">Δ</a> <a id="18867" href="plfa.part2.Substitution.html#18867" class="Bound">Σ</a><a id="18868" class="Symbol">}{</a><a id="18870" href="plfa.part2.Substitution.html#18870" class="Bound">A</a><a id="18871" class="Symbol">}{</a><a id="18873" href="plfa.part2.Substitution.html#18873" class="Bound">M</a> <a id="18875" class="Symbol">:</a> <a id="18877" href="plfa.part2.Substitution.html#18863" class="Bound">Γ</a> <a id="18879" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="18881" href="plfa.part2.Substitution.html#18870" class="Bound">A</a><a id="18882" class="Symbol">}{</a><a id="18884" href="plfa.part2.Substitution.html#18884" class="Bound">ρ</a> <a id="18886" class="Symbol">:</a> <a id="18888" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="18895" href="plfa.part2.Substitution.html#18865" class="Bound">Δ</a> <a id="18897" href="plfa.part2.Substitution.html#18867" class="Bound">Σ</a><a id="18898" class="Symbol">}{</a><a id="18900" href="plfa.part2.Substitution.html#18900" class="Bound">ρ′</a> <a id="18903" class="Symbol">:</a> <a id="18905" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="18912" href="plfa.part2.Substitution.html#18863" class="Bound">Γ</a> <a id="18914" href="plfa.part2.Substitution.html#18865" class="Bound">Δ</a><a id="18915" class="Symbol">}</a>
  <a id="18919" class="Symbol">→</a> <a id="18921" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="18928" href="/19.08/Substitution/#18884" class="Bound">ρ</a> <a id="18930" class="Symbol">(</a><a id="18931" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="18938" href="plfa.part2.Substitution.html#18900" class="Bound">ρ′</a> <a id="18941" href="plfa.part2.Substitution.html#18873" class="Bound">M</a><a id="18942" class="Symbol">)</a> <a id="18944" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="18946" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="18953" class="Symbol">(</a><a id="18954" href="plfa.part2.Substitution.html#18884" class="Bound">ρ</a> <a id="18956" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="18958" href="plfa.part2.Substitution.html#18900" class="Bound">ρ′</a><a id="18960" class="Symbol">)</a> <a id="18962" href="plfa.part2.Substitution.html#18873" class="Bound">M</a>
<a id="18964" href="/19.08/Substitution/#18844" class="Function">compose-rename</a> <a id="18979" class="Symbol">{</a><a id="18980" class="Argument">M</a> <a id="18982" class="Symbol">=</a> <a id="18984" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="18986" href="plfa.part2.Substitution.html#18986" class="Bound">x</a><a id="18987" class="Symbol">}</a> <a id="18989" class="Symbol">=</a> <a id="18991" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="18996" href="/19.08/Substitution/#18844" class="Function">compose-rename</a> <a id="19011" class="Symbol">{</a><a id="19012" href="plfa.part2.Substitution.html#19012" class="Bound">Γ</a><a id="19013" class="Symbol">}{</a><a id="19015" href="plfa.part2.Substitution.html#19015" class="Bound">Δ</a><a id="19016" class="Symbol">}{</a><a id="19018" href="plfa.part2.Substitution.html#19018" class="Bound">Σ</a><a id="19019" class="Symbol">}{</a><a id="19021" href="plfa.part2.Substitution.html#19021" class="Bound">A</a><a id="19022" class="Symbol">}{</a><a id="19024" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="19026" href="plfa.part2.Substitution.html#19026" class="Bound">N</a><a id="19027" class="Symbol">}{</a><a id="19029" href="plfa.part2.Substitution.html#19029" class="Bound">ρ</a><a id="19030" class="Symbol">}{</a><a id="19032" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19034" class="Symbol">}</a> <a id="19036" class="Symbol">=</a> <a id="19038" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="19043" href="plfa.part2.Untyped.html#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="19046" href="plfa.part2.Substitution.html#19058" class="Function">G</a>
  <a id="19050" class="Keyword">where</a>
  <a id="19058" href="/19.08/Substitution/#19058" class="Function">G</a> <a id="19060" class="Symbol">:</a> <a id="19062" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="19069" class="Symbol">(</a><a id="19070" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19074" href="plfa.part2.Substitution.html#19029" class="Bound">ρ</a><a id="19075" class="Symbol">)</a> <a id="19077" class="Symbol">(</a><a id="19078" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="19085" class="Symbol">(</a><a id="19086" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19090" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19092" class="Symbol">)</a> <a id="19094" href="plfa.part2.Substitution.html#19026" class="Bound">N</a><a id="19095" class="Symbol">)</a> <a id="19097" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="19099" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="19106" class="Symbol">(</a><a id="19107" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19111" class="Symbol">(</a><a id="19112" href="plfa.part2.Substitution.html#19029" class="Bound">ρ</a> <a id="19114" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="19116" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19118" class="Symbol">))</a> <a id="19121" href="plfa.part2.Substitution.html#19026" class="Bound">N</a>
  <a id="19125" href="/19.08/Substitution/#19058" class="Function">G</a> <a id="19127" class="Symbol">=</a>
      <a id="19135" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
        <a id="19149" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="19156" class="Symbol">(</a><a id="19157" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19161" href="/19.08/Substitution/#19029" class="Bound">ρ</a><a id="19162" class="Symbol">)</a> <a id="19164" class="Symbol">(</a><a id="19165" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="19172" class="Symbol">(</a><a id="19173" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19177" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19179" class="Symbol">)</a> <a id="19181" href="plfa.part2.Substitution.html#19026" class="Bound">N</a><a id="19182" class="Symbol">)</a>
      <a id="19190" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="19193" href="/19.08/Substitution/#18844" class="Function">compose-rename</a><a id="19207" class="Symbol">{</a><a id="19208" class="Argument">ρ</a> <a id="19210" class="Symbol">=</a> <a id="19212" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="19216" href="plfa.part2.Substitution.html#19029" class="Bound">ρ</a><a id="19217" class="Symbol">}{</a><a id="19219" class="Argument">ρ′</a> <a id="19222" class="Symbol">=</a> <a id="19224" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19228" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19230" class="Symbol">}</a> <a id="19232" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
        <a id="19242" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="19249" class="Symbol">((</a><a id="19251" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19255" href="/19.08/Substitution/#19029" class="Bound">ρ</a><a id="19256" class="Symbol">)</a> <a id="19258" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="19260" class="Symbol">(</a><a id="19261" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19265" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19267" class="Symbol">))</a> <a id="19270" href="plfa.part2.Substitution.html#19026" class="Bound">N</a>
      <a id="19278" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="19281" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="19293" href="plfa.part2.Substitution.html#18283" class="Function">compose-ext</a> <a id="19305" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="19310" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
        <a id="19320" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="19327" class="Symbol">(</a><a id="19328" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="19332" class="Symbol">(</a><a id="19333" href="/19.08/Substitution/#19029" class="Bound">ρ</a> <a id="19335" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="19337" href="plfa.part2.Substitution.html#19032" class="Bound">ρ′</a><a id="19339" class="Symbol">))</a> <a id="19342" href="plfa.part2.Substitution.html#19026" class="Bound">N</a>
      <a id="19350" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
<a id="19352" href="/19.08/Substitution/#18844" class="Function">compose-rename</a> <a id="19367" class="Symbol">{</a><a id="19368" class="Argument">M</a> <a id="19370" class="Symbol">=</a> <a id="19372" href="plfa.part2.Substitution.html#19372" class="Bound">L</a> <a id="19374" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="19376" href="plfa.part2.Substitution.html#19376" class="Bound">M</a><a id="19377" class="Symbol">}</a> <a id="19379" class="Symbol">=</a> <a id="19381" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="19387" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">_·_</a> <a id="19391" href="plfa.part2.Substitution.html#18844" class="Function">compose-rename</a> <a id="19406" href="plfa.part2.Substitution.html#18844" class="Function">compose-rename</a>
</pre><p>The next lemma states that if a renaming and substitution commute on variables, then they also commute on terms. We explain the proof in detail below.</p><pre class="Agda"><a id="commute-subst-rename"></a><a id="19582" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a> <a id="19603" class="Symbol">:</a> <a id="19605" class="Symbol">∀{</a><a id="19607" href="plfa.part2.Substitution.html#19607" class="Bound">Γ</a> <a id="19609" href="plfa.part2.Substitution.html#19609" class="Bound">Δ</a><a id="19610" class="Symbol">}{</a><a id="19612" href="plfa.part2.Substitution.html#19612" class="Bound">M</a> <a id="19614" class="Symbol">:</a> <a id="19616" href="plfa.part2.Substitution.html#19607" class="Bound">Γ</a> <a id="19618" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="19620" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19621" class="Symbol">}{</a><a id="19623" href="plfa.part2.Substitution.html#19623" class="Bound">σ</a> <a id="19625" class="Symbol">:</a> <a id="19627" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="19633" href="plfa.part2.Substitution.html#19607" class="Bound">Γ</a> <a id="19635" href="plfa.part2.Substitution.html#19609" class="Bound">Δ</a><a id="19636" class="Symbol">}</a>
                        <a id="19662" class="Symbol">{</a><a id="19663" href="/19.08/Substitution/#19663" class="Bound">ρ</a> <a id="19665" class="Symbol">:</a> <a id="19667" class="Symbol">∀{</a><a id="19669" href="plfa.part2.Substitution.html#19669" class="Bound">Γ</a><a id="19670" class="Symbol">}</a> <a id="19672" class="Symbol">→</a> <a id="19674" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="19681" href="plfa.part2.Substitution.html#19669" class="Bound">Γ</a> <a id="19683" class="Symbol">(</a><a id="19684" href="plfa.part2.Substitution.html#19669" class="Bound">Γ</a> <a id="19686" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="19688" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19689" class="Symbol">)}</a>
     <a id="19697" class="Symbol">→</a> <a id="19699" class="Symbol">(∀{</a><a id="19702" href="/19.08/Substitution/#19702" class="Bound">x</a> <a id="19704" class="Symbol">:</a> <a id="19706" href="plfa.part2.Substitution.html#19607" class="Bound">Γ</a> <a id="19708" href="/19.08/Untyped/#3521" class="Datatype Operator">∋</a> <a id="19710" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19711" class="Symbol">}</a> <a id="19713" class="Symbol">→</a> <a id="19715" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="19720" href="plfa.part2.Substitution.html#19623" class="Bound">σ</a> <a id="19722" class="Symbol">{</a><a id="19723" class="Argument">B</a> <a id="19725" class="Symbol">=</a> <a id="19727" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19728" class="Symbol">}</a> <a id="19730" class="Symbol">(</a><a id="19731" href="plfa.part2.Substitution.html#19663" class="Bound">ρ</a> <a id="19733" href="plfa.part2.Substitution.html#19702" class="Bound">x</a><a id="19734" class="Symbol">)</a> <a id="19736" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="19738" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="19745" href="plfa.part2.Substitution.html#19663" class="Bound">ρ</a> <a id="19747" class="Symbol">(</a><a id="19748" href="plfa.part2.Substitution.html#19623" class="Bound">σ</a> <a id="19750" href="plfa.part2.Substitution.html#19702" class="Bound">x</a><a id="19751" class="Symbol">))</a>
     <a id="19759" class="Symbol">→</a> <a id="19761" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="19767" class="Symbol">(</a><a id="19768" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="19773" href="/19.08/Substitution/#19623" class="Bound">σ</a> <a id="19775" class="Symbol">{</a><a id="19776" class="Argument">B</a> <a id="19778" class="Symbol">=</a> <a id="19780" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19781" class="Symbol">})</a> <a id="19784" class="Symbol">(</a><a id="19785" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="19792" href="plfa.part2.Substitution.html#19663" class="Bound">ρ</a> <a id="19794" href="plfa.part2.Substitution.html#19612" class="Bound">M</a><a id="19795" class="Symbol">)</a> <a id="19797" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="19799" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="19806" href="plfa.part2.Substitution.html#19663" class="Bound">ρ</a> <a id="19808" class="Symbol">(</a><a id="19809" href="plfa.part2.Untyped.html#6963" class="Function">subst</a> <a id="19815" href="plfa.part2.Substitution.html#19623" class="Bound">σ</a> <a id="19817" href="plfa.part2.Substitution.html#19612" class="Bound">M</a><a id="19818" class="Symbol">)</a>
<a id="19820" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a> <a id="19841" class="Symbol">{</a><a id="19842" class="Argument">M</a> <a id="19844" class="Symbol">=</a> <a id="19846" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="19848" href="plfa.part2.Substitution.html#19848" class="Bound">x</a><a id="19849" class="Symbol">}</a> <a id="19851" href="plfa.part2.Substitution.html#19851" class="Bound">r</a> <a id="19853" class="Symbol">=</a> <a id="19855" href="plfa.part2.Substitution.html#19851" class="Bound">r</a>
<a id="19857" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a><a id="19877" class="Symbol">{</a><a id="19878" href="plfa.part2.Substitution.html#19878" class="Bound">Γ</a><a id="19879" class="Symbol">}{</a><a id="19881" href="plfa.part2.Substitution.html#19881" class="Bound">Δ</a><a id="19882" class="Symbol">}{</a><a id="19884" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="19886" href="plfa.part2.Substitution.html#19886" class="Bound">N</a><a id="19887" class="Symbol">}{</a><a id="19889" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a><a id="19890" class="Symbol">}{</a><a id="19892" href="plfa.part2.Substitution.html#19892" class="Bound">ρ</a><a id="19893" class="Symbol">}</a> <a id="19895" href="plfa.part2.Substitution.html#19895" class="Bound">r</a> <a id="19897" class="Symbol">=</a>
   <a id="19902" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="19907" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="19910" class="Symbol">(</a><a id="19911" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a><a id="19931" class="Symbol">{</a><a id="19932" href="plfa.part2.Substitution.html#19878" class="Bound">Γ</a> <a id="19934" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="19936" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19937" class="Symbol">}{</a><a id="19939" href="plfa.part2.Substitution.html#19881" class="Bound">Δ</a> <a id="19941" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="19943" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="19944" class="Symbol">}{</a><a id="19946" href="plfa.part2.Substitution.html#19886" class="Bound">N</a><a id="19947" class="Symbol">}</a>
               <a id="19964" class="Symbol">{</a><a id="19965" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="19970" href="/19.08/Substitution/#19889" class="Bound">σ</a><a id="19971" class="Symbol">}{</a><a id="19973" class="Argument">ρ</a> <a id="19975" class="Symbol">=</a> <a id="19977" href="plfa.part2.Substitution.html#20010" class="Function">ρ′</a><a id="19979" class="Symbol">}</a> <a id="19981" class="Symbol">(λ</a> <a id="19984" class="Symbol">{</a><a id="19985" href="plfa.part2.Substitution.html#19985" class="Bound">x</a><a id="19986" class="Symbol">}</a> <a id="19988" class="Symbol">→</a> <a id="19990" href="plfa.part2.Substitution.html#20083" class="Function">H</a> <a id="19992" class="Symbol">{</a><a id="19993" href="plfa.part2.Substitution.html#19985" class="Bound">x</a><a id="19994" class="Symbol">}))</a>
   <a id="20001" class="Keyword">where</a>
   <a id="20010" href="/19.08/Substitution/#20010" class="Function">ρ′</a> <a id="20013" class="Symbol">:</a> <a id="20015" class="Symbol">∀</a> <a id="20017" class="Symbol">{</a><a id="20018" href="plfa.part2.Substitution.html#20018" class="Bound">Γ</a><a id="20019" class="Symbol">}</a> <a id="20021" class="Symbol">→</a> <a id="20023" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="20030" href="plfa.part2.Substitution.html#20018" class="Bound">Γ</a> <a id="20032" class="Symbol">(</a><a id="20033" href="plfa.part2.Substitution.html#20018" class="Bound">Γ</a> <a id="20035" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="20037" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="20038" class="Symbol">)</a>
   <a id="20043" href="/19.08/Substitution/#20010" class="Function">ρ′</a> <a id="20046" class="Symbol">{</a><a id="20047" href="/19.08/Untyped/#3175" class="InductiveConstructor">∅</a><a id="20048" class="Symbol">}</a> <a id="20050" class="Symbol">=</a> <a id="20052" class="Symbol">λ</a> <a id="20054" class="Symbol">()</a>
   <a id="20060" href="/19.08/Substitution/#20010" class="Function">ρ′</a> <a id="20063" class="Symbol">{</a><a id="20064" href="plfa.part2.Substitution.html#20064" class="Bound">Γ</a> <a id="20066" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="20068" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="20069" class="Symbol">}</a> <a id="20071" class="Symbol">=</a> <a id="20073" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20077" href="plfa.part2.Substitution.html#19892" class="Bound">ρ</a>

   <a id="20083" href="/19.08/Substitution/#20083" class="Function">H</a> <a id="20085" class="Symbol">:</a> <a id="20087" class="Symbol">{</a><a id="20088" href="plfa.part2.Substitution.html#20088" class="Bound">x</a> <a id="20090" class="Symbol">:</a> <a id="20092" href="plfa.part2.Substitution.html#19878" class="Bound">Γ</a> <a id="20094" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="20096" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="20098" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="20100" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="20101" class="Symbol">}</a> <a id="20103" class="Symbol">→</a> <a id="20105" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="20110" class="Symbol">(</a><a id="20111" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="20116" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a><a id="20117" class="Symbol">)</a> <a id="20119" class="Symbol">(</a><a id="20120" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20124" href="plfa.part2.Substitution.html#19892" class="Bound">ρ</a> <a id="20126" href="plfa.part2.Substitution.html#20088" class="Bound">x</a><a id="20127" class="Symbol">)</a> <a id="20129" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="20131" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="20138" class="Symbol">(</a><a id="20139" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20143" href="plfa.part2.Substitution.html#19892" class="Bound">ρ</a><a id="20144" class="Symbol">)</a> <a id="20146" class="Symbol">(</a><a id="20147" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="20152" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a> <a id="20154" href="plfa.part2.Substitution.html#20088" class="Bound">x</a><a id="20155" class="Symbol">)</a>
   <a id="20160" href="/19.08/Substitution/#20083" class="Function">H</a> <a id="20162" class="Symbol">{</a><a id="20163" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="20164" class="Symbol">}</a> <a id="20166" class="Symbol">=</a> <a id="20168" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
   <a id="20176" href="/19.08/Substitution/#20083" class="Function">H</a> <a id="20178" class="Symbol">{</a><a id="20179" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="20181" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20182" class="Symbol">}</a> <a id="20184" class="Symbol">=</a>
     <a id="20191" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
       <a id="20204" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="20209" class="Symbol">(</a><a id="20210" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="20215" href="/19.08/Substitution/#19889" class="Bound">σ</a><a id="20216" class="Symbol">)</a> <a id="20218" class="Symbol">(</a><a id="20219" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20223" href="plfa.part2.Substitution.html#19892" class="Bound">ρ</a> <a id="20225" class="Symbol">(</a><a id="20226" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S</a> <a id="20228" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20229" class="Symbol">))</a>
     <a id="20237" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="20248" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20255" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="20258" class="Symbol">(</a><a id="20259" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="20264" href="/19.08/Substitution/#19889" class="Bound">σ</a> <a id="20266" class="Symbol">(</a><a id="20267" href="plfa.part2.Substitution.html#19892" class="Bound">ρ</a> <a id="20269" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20270" class="Symbol">))</a>
     <a id="20278" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="20281" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="20286" class="Symbol">(</a><a id="20287" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20294" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="20296" class="Symbol">)</a> <a id="20298" href="/19.08/Substitution/#19895" class="Bound">r</a> <a id="20300" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="20309" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20316" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="20319" class="Symbol">(</a><a id="20320" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="20327" href="/19.08/Substitution/#19892" class="Bound">ρ</a> <a id="20329" class="Symbol">(</a><a id="20330" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a> <a id="20332" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20333" class="Symbol">))</a>
     <a id="20341" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="20344" href="/19.08/Substitution/#18844" class="Function">compose-rename</a> <a id="20359" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="20368" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20375" class="Symbol">(</a><a id="20376" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="20379" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="20381" href="/19.08/Substitution/#19892" class="Bound">ρ</a><a id="20382" class="Symbol">)</a> <a id="20384" class="Symbol">(</a><a id="20385" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a> <a id="20387" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20388" class="Symbol">)</a>
     <a id="20395" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="20398" href="/19.08/Substitution/#10370" class="Function">cong-rename</a> <a id="20410" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="20415" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="20420" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="20429" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20436" class="Symbol">((</a><a id="20438" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20442" href="/19.08/Substitution/#19892" class="Bound">ρ</a><a id="20443" class="Symbol">)</a> <a id="20445" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="20447" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="20449" class="Symbol">)</a> <a id="20451" class="Symbol">(</a><a id="20452" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a> <a id="20454" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20455" class="Symbol">)</a>
     <a id="20462" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="20465" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="20469" href="/19.08/Substitution/#18844" class="Function">compose-rename</a> <a id="20484" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="20493" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20500" class="Symbol">(</a><a id="20501" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20505" href="/19.08/Substitution/#19892" class="Bound">ρ</a><a id="20506" class="Symbol">)</a> <a id="20508" class="Symbol">(</a><a id="20509" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="20516" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="20519" class="Symbol">(</a><a id="20520" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a> <a id="20522" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20523" class="Symbol">))</a>
     <a id="20531" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="20542" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="20549" class="Symbol">(</a><a id="20550" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="20554" href="/19.08/Substitution/#19892" class="Bound">ρ</a><a id="20555" class="Symbol">)</a> <a id="20557" class="Symbol">(</a><a id="20558" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="20563" href="plfa.part2.Substitution.html#19889" class="Bound">σ</a> <a id="20565" class="Symbol">(</a><a id="20566" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S</a> <a id="20568" href="plfa.part2.Substitution.html#20181" class="Bound">y</a><a id="20569" class="Symbol">))</a>
     <a id="20577" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
<a id="20579" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a> <a id="20600" class="Symbol">{</a><a id="20601" class="Argument">M</a> <a id="20603" class="Symbol">=</a> <a id="20605" href="plfa.part2.Substitution.html#20605" class="Bound">L</a> <a id="20607" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="20609" href="plfa.part2.Substitution.html#20609" class="Bound">M</a><a id="20610" class="Symbol">}{</a><a id="20612" class="Argument">ρ</a> <a id="20614" class="Symbol">=</a> <a id="20616" href="plfa.part2.Substitution.html#20616" class="Bound">ρ</a><a id="20617" class="Symbol">}</a> <a id="20619" href="plfa.part2.Substitution.html#20619" class="Bound">r</a> <a id="20621" class="Symbol">=</a>
   <a id="20626" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="20632" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">_·_</a> <a id="20636" class="Symbol">(</a><a id="20637" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a><a id="20657" class="Symbol">{</a><a id="20658" class="Argument">M</a> <a id="20660" class="Symbol">=</a> <a id="20662" href="plfa.part2.Substitution.html#20605" class="Bound">L</a><a id="20663" class="Symbol">}{</a><a id="20665" class="Argument">ρ</a> <a id="20667" class="Symbol">=</a> <a id="20669" href="plfa.part2.Substitution.html#20616" class="Bound">ρ</a><a id="20670" class="Symbol">}</a> <a id="20672" href="plfa.part2.Substitution.html#20619" class="Bound">r</a><a id="20673" class="Symbol">)</a>
             <a id="20688" class="Symbol">(</a><a id="20689" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a><a id="20709" class="Symbol">{</a><a id="20710" class="Argument">M</a> <a id="20712" class="Symbol">=</a> <a id="20714" href="plfa.part2.Substitution.html#20609" class="Bound">M</a><a id="20715" class="Symbol">}{</a><a id="20717" class="Argument">ρ</a> <a id="20719" class="Symbol">=</a> <a id="20721" href="plfa.part2.Substitution.html#20616" class="Bound">ρ</a><a id="20722" class="Symbol">}</a> <a id="20724" href="plfa.part2.Substitution.html#20619" class="Bound">r</a><a id="20725" class="Symbol">)</a>
</pre><p>The proof is by induction on the term <code class="language-plaintext highlighter-rouge">M</code>.</p><ul><li><p>If <code class="language-plaintext highlighter-rouge">M</code> is a variable, then we use the premise to conclude.</p></li><li><p>If <code class="language-plaintext highlighter-rouge">M ≡ ƛ N</code>, we conclude using the induction hypothesis for <code class="language-plaintext highlighter-rouge">N</code>. However, to use the induction hypothesis, we must show that</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  exts (exts σ) (ext ρ x) ≡ rename (ext ρ) (exts σ x)
</code></pre></div></div><p>We prove this equation by cases on x.</p><ul><li><p>If <code class="language-plaintext highlighter-rouge">x = Z</code>, the two sides are equal by definition.</p></li><li><p>If <code class="language-plaintext highlighter-rouge">x = S y</code>, we obtain the goal by the following equational reasoning.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts (exts σ) (ext ρ (S y))   ≡ rename S_ (exts σ (ρ y))   ≡ rename S_ (rename S_ (σ (ρ y)      (by the premise)   ≡ rename (ext ρ) (exts σ (S y))      (by compose-rename)   ≡ rename ((ext ρ) ∘ S_) (σ y)   ≡ rename (ext ρ) (rename S_ (σ y))   (by compose-rename)   ≡ rename (ext ρ) (exts σ (S y))
</code></pre></div></div></li></ul></li><li><p>If <code class="language-plaintext highlighter-rouge">M</code> is an application, we obtain the goal using the induction hypothesis for each subterm.</p></li></ul><p>The last lemma needed to prove <code class="language-plaintext highlighter-rouge">sub-sub</code> states that the <code class="language-plaintext highlighter-rouge">exts</code> function distributes with sequencing. It is a corollary of <code class="language-plaintext highlighter-rouge">commute-subst-rename</code> as described below. (It would have been nicer to prove this directly by equational reasoning in the σ algebra, but that would require the <code class="language-plaintext highlighter-rouge">sub-assoc</code> equation, whose proof depends on <code class="language-plaintext highlighter-rouge">sub-sub</code>, which in turn depends on this lemma.)</p><pre class="Agda"><a id="exts-seq"></a><a id="22038" href="/19.08/Substitution/#22038" class="Function">exts-seq</a> <a id="22047" class="Symbol">:</a> <a id="22049" class="Symbol">∀{</a><a id="22051" href="plfa.part2.Substitution.html#22051" class="Bound">Γ</a> <a id="22053" href="plfa.part2.Substitution.html#22053" class="Bound">Δ</a> <a id="22055" href="plfa.part2.Substitution.html#22055" class="Bound">Δ′</a><a id="22057" class="Symbol">}</a> <a id="22059" class="Symbol">{</a><a id="22060" href="plfa.part2.Substitution.html#22060" class="Bound">σ₁</a> <a id="22063" class="Symbol">:</a> <a id="22065" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="22071" href="plfa.part2.Substitution.html#22051" class="Bound">Γ</a> <a id="22073" href="plfa.part2.Substitution.html#22053" class="Bound">Δ</a><a id="22074" class="Symbol">}</a> <a id="22076" class="Symbol">{</a><a id="22077" href="plfa.part2.Substitution.html#22077" class="Bound">σ₂</a> <a id="22080" class="Symbol">:</a> <a id="22082" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="22088" href="plfa.part2.Substitution.html#22053" class="Bound">Δ</a> <a id="22090" href="plfa.part2.Substitution.html#22055" class="Bound">Δ′</a><a id="22092" class="Symbol">}</a>
         <a id="22103" class="Symbol">→</a> <a id="22105" class="Symbol">∀</a> <a id="22107" class="Symbol">{</a><a id="22108" href="/19.08/Substitution/#22108" class="Bound">A</a><a id="22109" class="Symbol">}</a> <a id="22111" class="Symbol">→</a> <a id="22113" class="Symbol">(</a><a id="22114" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="22119" href="plfa.part2.Substitution.html#22060" class="Bound">σ₁</a> <a id="22122" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="22124" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="22129" href="plfa.part2.Substitution.html#22077" class="Bound">σ₂</a><a id="22131" class="Symbol">)</a> <a id="22133" class="Symbol">{</a><a id="22134" href="plfa.part2.Substitution.html#22108" class="Bound">A</a><a id="22135" class="Symbol">}</a> <a id="22137" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="22139" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="22144" class="Symbol">(</a><a id="22145" href="plfa.part2.Substitution.html#22060" class="Bound">σ₁</a> <a id="22148" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="22150" href="plfa.part2.Substitution.html#22077" class="Bound">σ₂</a><a id="22152" class="Symbol">)</a>
<a id="22154" href="/19.08/Substitution/#22038" class="Function">exts-seq</a> <a id="22163" class="Symbol">=</a> <a id="22165" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="22180" class="Symbol">λ</a> <a id="22182" href="plfa.part2.Substitution.html#22182" class="Bound">x</a> <a id="22184" class="Symbol">→</a> <a id="22186" href="plfa.part2.Substitution.html#22210" class="Function">lemma</a> <a id="22192" class="Symbol">{</a><a id="22193" class="Argument">x</a> <a id="22195" class="Symbol">=</a> <a id="22197" href="plfa.part2.Substitution.html#22182" class="Bound">x</a><a id="22198" class="Symbol">}</a>
  <a id="22202" class="Keyword">where</a>
  <a id="22210" href="/19.08/Substitution/#22210" class="Function">lemma</a> <a id="22216" class="Symbol">:</a> <a id="22218" class="Symbol">∀{</a><a id="22220" href="plfa.part2.Substitution.html#22220" class="Bound">Γ</a> <a id="22222" href="plfa.part2.Substitution.html#22222" class="Bound">Δ</a> <a id="22224" href="plfa.part2.Substitution.html#22224" class="Bound">Δ′</a><a id="22226" class="Symbol">}{</a><a id="22228" href="plfa.part2.Substitution.html#22228" class="Bound">A</a><a id="22229" class="Symbol">}{</a><a id="22231" href="plfa.part2.Substitution.html#22231" class="Bound">x</a> <a id="22233" class="Symbol">:</a> <a id="22235" href="plfa.part2.Substitution.html#22220" class="Bound">Γ</a> <a id="22237" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="22239" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="22241" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">∋</a> <a id="22243" href="plfa.part2.Substitution.html#22228" class="Bound">A</a><a id="22244" class="Symbol">}</a> <a id="22246" class="Symbol">{</a><a id="22247" href="plfa.part2.Substitution.html#22247" class="Bound">σ₁</a> <a id="22250" class="Symbol">:</a> <a id="22252" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="22258" href="plfa.part2.Substitution.html#22220" class="Bound">Γ</a> <a id="22260" href="plfa.part2.Substitution.html#22222" class="Bound">Δ</a><a id="22261" class="Symbol">}{</a><a id="22263" href="plfa.part2.Substitution.html#22263" class="Bound">σ₂</a> <a id="22266" class="Symbol">:</a> <a id="22268" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="22274" href="plfa.part2.Substitution.html#22222" class="Bound">Δ</a> <a id="22276" href="plfa.part2.Substitution.html#22224" class="Bound">Δ′</a><a id="22278" class="Symbol">}</a>
     <a id="22285" class="Symbol">→</a> <a id="22287" class="Symbol">(</a><a id="22288" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="22293" href="/19.08/Substitution/#22247" class="Bound">σ₁</a> <a id="22296" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="22298" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="22303" href="plfa.part2.Substitution.html#22263" class="Bound">σ₂</a><a id="22305" class="Symbol">)</a> <a id="22307" href="plfa.part2.Substitution.html#22231" class="Bound">x</a> <a id="22309" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="22311" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="22316" class="Symbol">(</a><a id="22317" href="plfa.part2.Substitution.html#22247" class="Bound">σ₁</a> <a id="22320" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="22322" href="plfa.part2.Substitution.html#22263" class="Bound">σ₂</a><a id="22324" class="Symbol">)</a> <a id="22326" href="plfa.part2.Substitution.html#22231" class="Bound">x</a>
  <a id="22330" href="/19.08/Substitution/#22210" class="Function">lemma</a> <a id="22336" class="Symbol">{</a><a id="22337" class="Argument">x</a> <a id="22339" class="Symbol">=</a> <a id="22341" href="/19.08/Untyped/#3557" class="InductiveConstructor">Z</a><a id="22342" class="Symbol">}</a> <a id="22344" class="Symbol">=</a> <a id="22346" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
  <a id="22353" href="/19.08/Substitution/#22210" class="Function">lemma</a> <a id="22359" class="Symbol">{</a><a id="22360" class="Argument">A</a> <a id="22362" class="Symbol">=</a> <a id="22364" href="/19.08/Untyped/#2888" class="InductiveConstructor">★</a><a id="22365" class="Symbol">}{</a><a id="22367" class="Argument">x</a> <a id="22369" class="Symbol">=</a> <a id="22371" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S</a> <a id="22373" href="plfa.part2.Substitution.html#22373" class="Bound">x</a><a id="22374" class="Symbol">}{</a><a id="22376" href="plfa.part2.Substitution.html#22376" class="Bound">σ₁</a><a id="22378" class="Symbol">}{</a><a id="22380" href="plfa.part2.Substitution.html#22380" class="Bound">σ₂</a><a id="22382" class="Symbol">}</a> <a id="22384" class="Symbol">=</a>
     <a id="22391" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
       <a id="22404" class="Symbol">(</a><a id="22405" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="22410" href="/19.08/Substitution/#22376" class="Bound">σ₁</a> <a id="22413" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="22415" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="22420" href="plfa.part2.Substitution.html#22380" class="Bound">σ₂</a><a id="22422" class="Symbol">)</a> <a id="22424" class="Symbol">(</a><a id="22425" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S</a> <a id="22427" href="plfa.part2.Substitution.html#22373" class="Bound">x</a><a id="22428" class="Symbol">)</a>
     <a id="22435" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="22446" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="22448" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="22453" href="plfa.part2.Substitution.html#22380" class="Bound">σ₂</a> <a id="22456" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="22458" class="Symbol">(</a><a id="22459" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="22466" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="22469" class="Symbol">(</a><a id="22470" href="plfa.part2.Substitution.html#22376" class="Bound">σ₁</a> <a id="22473" href="plfa.part2.Substitution.html#22373" class="Bound">x</a><a id="22474" class="Symbol">))</a>
     <a id="22482" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="22485" href="/19.08/Substitution/#19582" class="Function">commute-subst-rename</a><a id="22505" class="Symbol">{</a><a id="22506" class="Argument">M</a> <a id="22508" class="Symbol">=</a> <a id="22510" href="plfa.part2.Substitution.html#22376" class="Bound">σ₁</a> <a id="22513" href="plfa.part2.Substitution.html#22373" class="Bound">x</a><a id="22514" class="Symbol">}{</a><a id="22516" class="Argument">σ</a> <a id="22518" class="Symbol">=</a> <a id="22520" href="plfa.part2.Substitution.html#22380" class="Bound">σ₂</a><a id="22522" class="Symbol">}{</a><a id="22524" class="Argument">ρ</a> <a id="22526" class="Symbol">=</a> <a id="22528" href="/19.08/Untyped/#3602" class="InductiveConstructor Operator">S_</a><a id="22530" class="Symbol">}</a> <a id="22532" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="22537" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="22546" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="22553" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="22556" class="Symbol">(</a><a id="22557" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="22559" href="plfa.part2.Substitution.html#22380" class="Bound">σ₂</a> <a id="22562" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="22564" class="Symbol">(</a><a id="22565" href="plfa.part2.Substitution.html#22376" class="Bound">σ₁</a> <a id="22568" href="plfa.part2.Substitution.html#22373" class="Bound">x</a><a id="22569" class="Symbol">))</a>
     <a id="22577" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="22588" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="22595" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a> <a id="22598" class="Symbol">((</a><a id="22600" href="/19.08/Substitution/#22376" class="Bound">σ₁</a> <a id="22603" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="22605" href="plfa.part2.Substitution.html#22380" class="Bound">σ₂</a><a id="22607" class="Symbol">)</a> <a id="22609" href="plfa.part2.Substitution.html#22373" class="Bound">x</a><a id="22610" class="Symbol">)</a>
     <a id="22617" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><p>The proof proceed by cases on <code class="language-plaintext highlighter-rouge">x</code>.</p><ul><li><p>If <code class="language-plaintext highlighter-rouge">x = Z</code>, the two sides are equal by the definition of <code class="language-plaintext highlighter-rouge">exts</code> and sequencing.</p></li><li><p>If <code class="language-plaintext highlighter-rouge">x = S x</code>, we unfold the first use of <code class="language-plaintext highlighter-rouge">exts</code> and sequencing, then apply the lemma <code class="language-plaintext highlighter-rouge">commute-subst-rename</code>. We conclude by the definition of sequencing.</p></li></ul><p>Now we come to the proof of <code class="language-plaintext highlighter-rouge">sub-sub</code>, which we explain below.</p><pre class="Agda"><a id="sub-sub"></a><a id="22975" href="/19.08/Substitution/#22975" class="Function">sub-sub</a> <a id="22983" class="Symbol">:</a> <a id="22985" class="Symbol">∀{</a><a id="22987" href="plfa.part2.Substitution.html#22987" class="Bound">Γ</a> <a id="22989" href="plfa.part2.Substitution.html#22989" class="Bound">Δ</a> <a id="22991" href="plfa.part2.Substitution.html#22991" class="Bound">Σ</a><a id="22992" class="Symbol">}{</a><a id="22994" href="plfa.part2.Substitution.html#22994" class="Bound">A</a><a id="22995" class="Symbol">}{</a><a id="22997" href="plfa.part2.Substitution.html#22997" class="Bound">M</a> <a id="22999" class="Symbol">:</a> <a id="23001" href="plfa.part2.Substitution.html#22987" class="Bound">Γ</a> <a id="23003" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="23005" href="plfa.part2.Substitution.html#22994" class="Bound">A</a><a id="23006" class="Symbol">}</a> <a id="23008" class="Symbol">{</a><a id="23009" href="plfa.part2.Substitution.html#23009" class="Bound">σ₁</a> <a id="23012" class="Symbol">:</a> <a id="23014" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="23020" href="plfa.part2.Substitution.html#22987" class="Bound">Γ</a> <a id="23022" href="plfa.part2.Substitution.html#22989" class="Bound">Δ</a><a id="23023" class="Symbol">}{</a><a id="23025" href="plfa.part2.Substitution.html#23025" class="Bound">σ₂</a> <a id="23028" class="Symbol">:</a> <a id="23030" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="23036" href="plfa.part2.Substitution.html#22989" class="Bound">Δ</a> <a id="23038" href="plfa.part2.Substitution.html#22991" class="Bound">Σ</a><a id="23039" class="Symbol">}</a>
            <a id="23053" class="Symbol">→</a> <a id="23055" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="23057" href="plfa.part2.Substitution.html#23025" class="Bound">σ₂</a> <a id="23060" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23062" class="Symbol">(</a><a id="23063" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="23065" href="plfa.part2.Substitution.html#23009" class="Bound">σ₁</a> <a id="23068" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23070" href="plfa.part2.Substitution.html#22997" class="Bound">M</a><a id="23071" class="Symbol">)</a> <a id="23073" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="23075" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="23077" href="plfa.part2.Substitution.html#23009" class="Bound">σ₁</a> <a id="23080" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="23082" href="plfa.part2.Substitution.html#23025" class="Bound">σ₂</a> <a id="23085" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23087" href="plfa.part2.Substitution.html#22997" class="Bound">M</a>
<a id="23089" href="/19.08/Substitution/#22975" class="Function">sub-sub</a> <a id="23097" class="Symbol">{</a><a id="23098" class="Argument">M</a> <a id="23100" class="Symbol">=</a> <a id="23102" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="23104" href="plfa.part2.Substitution.html#23104" class="Bound">x</a><a id="23105" class="Symbol">}</a> <a id="23107" class="Symbol">=</a> <a id="23109" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="23114" href="/19.08/Substitution/#22975" class="Function">sub-sub</a> <a id="23122" class="Symbol">{</a><a id="23123" href="plfa.part2.Substitution.html#23123" class="Bound">Γ</a><a id="23124" class="Symbol">}{</a><a id="23126" href="plfa.part2.Substitution.html#23126" class="Bound">Δ</a><a id="23127" class="Symbol">}{</a><a id="23129" href="plfa.part2.Substitution.html#23129" class="Bound">Σ</a><a id="23130" class="Symbol">}{</a><a id="23132" href="plfa.part2.Substitution.html#23132" class="Bound">A</a><a id="23133" class="Symbol">}{</a><a id="23135" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="23137" href="plfa.part2.Substitution.html#23137" class="Bound">N</a><a id="23138" class="Symbol">}{</a><a id="23140" href="plfa.part2.Substitution.html#23140" class="Bound">σ₁</a><a id="23142" class="Symbol">}{</a><a id="23144" href="plfa.part2.Substitution.html#23144" class="Bound">σ₂</a><a id="23146" class="Symbol">}</a> <a id="23148" class="Symbol">=</a>
   <a id="23153" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
     <a id="23164" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="23166" href="plfa.part2.Substitution.html#23144" class="Bound">σ₂</a> <a id="23169" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23171" class="Symbol">(</a><a id="23172" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="23174" href="plfa.part2.Substitution.html#23140" class="Bound">σ₁</a> <a id="23177" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23179" class="Symbol">(</a><a id="23180" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="23182" href="plfa.part2.Substitution.html#23137" class="Bound">N</a><a id="23183" class="Symbol">))</a>
   <a id="23189" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
     <a id="23198" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="23200" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="23202" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23207" href="plfa.part2.Substitution.html#23144" class="Bound">σ₂</a> <a id="23210" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23212" class="Symbol">(</a><a id="23213" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="23215" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23220" href="plfa.part2.Substitution.html#23140" class="Bound">σ₁</a> <a id="23223" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23225" href="plfa.part2.Substitution.html#23137" class="Bound">N</a><a id="23226" class="Symbol">)</a>
   <a id="23231" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="23234" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="23239" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="23242" class="Symbol">(</a><a id="23243" href="/19.08/Substitution/#22975" class="Function">sub-sub</a><a id="23250" class="Symbol">{</a><a id="23251" class="Argument">M</a> <a id="23253" class="Symbol">=</a> <a id="23255" href="plfa.part2.Substitution.html#23137" class="Bound">N</a><a id="23256" class="Symbol">}{</a><a id="23258" class="Argument">σ₁</a> <a id="23261" class="Symbol">=</a> <a id="23263" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23268" href="plfa.part2.Substitution.html#23140" class="Bound">σ₁</a><a id="23270" class="Symbol">}{</a><a id="23272" class="Argument">σ₂</a> <a id="23275" class="Symbol">=</a> <a id="23277" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23282" href="plfa.part2.Substitution.html#23144" class="Bound">σ₂</a><a id="23284" class="Symbol">})</a> <a id="23287" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="23294" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="23296" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="23298" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23303" href="plfa.part2.Substitution.html#23140" class="Bound">σ₁</a> <a id="23306" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="23308" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23313" href="plfa.part2.Substitution.html#23144" class="Bound">σ₂</a> <a id="23316" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23318" href="plfa.part2.Substitution.html#23137" class="Bound">N</a>
   <a id="23323" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="23326" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="23331" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ_</a> <a id="23334" class="Symbol">(</a><a id="23335" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="23343" class="Symbol">{</a><a id="23344" class="Argument">M</a> <a id="23346" class="Symbol">=</a> <a id="23348" href="plfa.part2.Substitution.html#23137" class="Bound">N</a><a id="23349" class="Symbol">}</a> <a id="23351" class="Symbol">(λ</a> <a id="23354" class="Symbol">{</a><a id="23355" href="plfa.part2.Substitution.html#23355" class="Bound">A</a><a id="23356" class="Symbol">}</a> <a id="23358" class="Symbol">→</a> <a id="23360" href="plfa.part2.Substitution.html#22038" class="Function">exts-seq</a><a id="23368" class="Symbol">)</a> <a id="23370" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="23374" class="Symbol">)</a> <a id="23376" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="23383" href="/19.08/Untyped/#4382" class="InductiveConstructor Operator">ƛ</a> <a id="23385" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="23387" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="23392" class="Symbol">(</a> <a id="23394" href="plfa.part2.Substitution.html#23140" class="Bound">σ₁</a> <a id="23397" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="23399" href="plfa.part2.Substitution.html#23144" class="Bound">σ₂</a><a id="23401" class="Symbol">)</a> <a id="23403" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="23405" href="plfa.part2.Substitution.html#23137" class="Bound">N</a>
   <a id="23410" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
<a id="23412" href="/19.08/Substitution/#22975" class="Function">sub-sub</a> <a id="23420" class="Symbol">{</a><a id="23421" class="Argument">M</a> <a id="23423" class="Symbol">=</a> <a id="23425" href="plfa.part2.Substitution.html#23425" class="Bound">L</a> <a id="23427" href="/19.08/Untyped/#4442" class="InductiveConstructor Operator">·</a> <a id="23429" href="plfa.part2.Substitution.html#23429" class="Bound">M</a><a id="23430" class="Symbol">}</a> <a id="23432" class="Symbol">=</a> <a id="23434" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a> <a id="23440" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">_·_</a> <a id="23444" class="Symbol">(</a><a id="23445" href="plfa.part2.Substitution.html#22975" class="Function">sub-sub</a><a id="23452" class="Symbol">{</a><a id="23453" class="Argument">M</a> <a id="23455" class="Symbol">=</a> <a id="23457" href="plfa.part2.Substitution.html#23425" class="Bound">L</a><a id="23458" class="Symbol">})</a> <a id="23461" class="Symbol">(</a><a id="23462" href="plfa.part2.Substitution.html#22975" class="Function">sub-sub</a><a id="23469" class="Symbol">{</a><a id="23470" class="Argument">M</a> <a id="23472" class="Symbol">=</a> <a id="23474" href="plfa.part2.Substitution.html#23429" class="Bound">M</a><a id="23475" class="Symbol">})</a>
</pre><p>We proceed by induction on the term <code class="language-plaintext highlighter-rouge">M</code>.</p><ul><li><p>If <code class="language-plaintext highlighter-rouge">M = x</code>, then both sides are equal to <code class="language-plaintext highlighter-rouge">σ₂ (σ₁ x)</code>.</p></li><li><p>If <code class="language-plaintext highlighter-rouge">M = ƛ N</code>, we first use the induction hypothesis to show that</p><p>ƛ ⟪ exts σ₂ ⟫ (⟪ exts σ₁ ⟫ N) ≡ ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N</p><p>and then use the lemma <code class="language-plaintext highlighter-rouge">exts-seq</code> to show</p><p>ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N ≡ ƛ ⟪ exts ( σ₁ ⨟ σ₂) ⟫ N</p></li><li><p>If <code class="language-plaintext highlighter-rouge">M</code> is an application, we use the induction hypothesis for both subterms.</p></li></ul><p>The following corollary of <code class="language-plaintext highlighter-rouge">sub-sub</code> specializes the first substitution to a renaming.</p><pre class="Agda"><a id="rename-subst"></a><a id="23991" href="/19.08/Substitution/#23991" class="Function">rename-subst</a> <a id="24004" class="Symbol">:</a> <a id="24006" class="Symbol">∀{</a><a id="24008" href="plfa.part2.Substitution.html#24008" class="Bound">Γ</a> <a id="24010" href="plfa.part2.Substitution.html#24010" class="Bound">Δ</a> <a id="24012" href="plfa.part2.Substitution.html#24012" class="Bound">Δ′</a><a id="24014" class="Symbol">}{</a><a id="24016" href="plfa.part2.Substitution.html#24016" class="Bound">M</a> <a id="24018" class="Symbol">:</a> <a id="24020" href="plfa.part2.Substitution.html#24008" class="Bound">Γ</a> <a id="24022" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="24024" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="24025" class="Symbol">}{</a><a id="24027" href="plfa.part2.Substitution.html#24027" class="Bound">ρ</a> <a id="24029" class="Symbol">:</a> <a id="24031" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="24038" href="plfa.part2.Substitution.html#24008" class="Bound">Γ</a> <a id="24040" href="plfa.part2.Substitution.html#24010" class="Bound">Δ</a><a id="24041" class="Symbol">}{</a><a id="24043" href="plfa.part2.Substitution.html#24043" class="Bound">σ</a> <a id="24045" class="Symbol">:</a> <a id="24047" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="24053" href="plfa.part2.Substitution.html#24010" class="Bound">Δ</a> <a id="24055" href="plfa.part2.Substitution.html#24012" class="Bound">Δ′</a><a id="24057" class="Symbol">}</a>
             <a id="24072" class="Symbol">→</a> <a id="24074" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24076" href="plfa.part2.Substitution.html#24043" class="Bound">σ</a> <a id="24078" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24080" class="Symbol">(</a><a id="24081" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="24088" href="plfa.part2.Substitution.html#24027" class="Bound">ρ</a> <a id="24090" href="plfa.part2.Substitution.html#24016" class="Bound">M</a><a id="24091" class="Symbol">)</a> <a id="24093" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="24095" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="24097" href="plfa.part2.Substitution.html#24043" class="Bound">σ</a> <a id="24099" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="24101" href="plfa.part2.Substitution.html#24027" class="Bound">ρ</a> <a id="24103" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24105" href="plfa.part2.Substitution.html#24016" class="Bound">M</a>
<a id="24107" href="/19.08/Substitution/#23991" class="Function">rename-subst</a> <a id="24120" class="Symbol">{</a><a id="24121" href="plfa.part2.Substitution.html#24121" class="Bound">Γ</a><a id="24122" class="Symbol">}{</a><a id="24124" href="plfa.part2.Substitution.html#24124" class="Bound">Δ</a><a id="24125" class="Symbol">}{</a><a id="24127" href="plfa.part2.Substitution.html#24127" class="Bound">Δ′</a><a id="24129" class="Symbol">}{</a><a id="24131" href="plfa.part2.Substitution.html#24131" class="Bound">M</a><a id="24132" class="Symbol">}{</a><a id="24134" href="plfa.part2.Substitution.html#24134" class="Bound">ρ</a><a id="24135" class="Symbol">}{</a><a id="24137" href="plfa.part2.Substitution.html#24137" class="Bound">σ</a><a id="24138" class="Symbol">}</a> <a id="24140" class="Symbol">=</a>
   <a id="24145" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
     <a id="24156" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24158" href="plfa.part2.Substitution.html#24137" class="Bound">σ</a> <a id="24160" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24162" class="Symbol">(</a><a id="24163" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="24170" href="plfa.part2.Substitution.html#24134" class="Bound">ρ</a> <a id="24172" href="plfa.part2.Substitution.html#24131" class="Bound">M</a><a id="24173" class="Symbol">)</a>
   <a id="24178" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="24181" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="24186" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24188" href="plfa.part2.Substitution.html#24137" class="Bound">σ</a> <a id="24190" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24192" class="Symbol">(</a><a id="24193" href="plfa.part2.Substitution.html#13654" class="Function">rename-subst-ren</a><a id="24209" class="Symbol">{</a><a id="24210" class="Argument">M</a> <a id="24212" class="Symbol">=</a> <a id="24214" href="plfa.part2.Substitution.html#24131" class="Bound">M</a><a id="24215" class="Symbol">})</a> <a id="24218" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="24225" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24227" href="plfa.part2.Substitution.html#24137" class="Bound">σ</a> <a id="24229" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24231" class="Symbol">(</a><a id="24232" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="24234" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="24238" href="plfa.part2.Substitution.html#24134" class="Bound">ρ</a> <a id="24240" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24242" href="plfa.part2.Substitution.html#24131" class="Bound">M</a><a id="24243" class="Symbol">)</a>
   <a id="24248" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="24251" href="/19.08/Substitution/#22975" class="Function">sub-sub</a><a id="24258" class="Symbol">{</a><a id="24259" class="Argument">M</a> <a id="24261" class="Symbol">=</a> <a id="24263" href="plfa.part2.Substitution.html#24131" class="Bound">M</a><a id="24264" class="Symbol">}</a> <a id="24266" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
     <a id="24273" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24275" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="24279" href="plfa.part2.Substitution.html#24134" class="Bound">ρ</a> <a id="24281" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24283" href="plfa.part2.Substitution.html#24137" class="Bound">σ</a> <a id="24285" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24287" href="plfa.part2.Substitution.html#24131" class="Bound">M</a>
   <a id="24292" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
     <a id="24301" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24303" href="plfa.part2.Substitution.html#24137" class="Bound">σ</a> <a id="24305" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="24307" href="plfa.part2.Substitution.html#24134" class="Bound">ρ</a> <a id="24309" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24311" href="plfa.part2.Substitution.html#24131" class="Bound">M</a>
   <a id="24316" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-assoc">Proof of sub-assoc</h2><p>The proof of <code class="language-plaintext highlighter-rouge">sub-assoc</code> follows directly from <code class="language-plaintext highlighter-rouge">sub-sub</code> and the definition of sequencing.</p><pre class="Agda"><a id="sub-assoc"></a><a id="24443" href="/19.08/Substitution/#24443" class="Function">sub-assoc</a> <a id="24453" class="Symbol">:</a> <a id="24455" class="Symbol">∀{</a><a id="24457" href="plfa.part2.Substitution.html#24457" class="Bound">Γ</a> <a id="24459" href="plfa.part2.Substitution.html#24459" class="Bound">Δ</a> <a id="24461" href="plfa.part2.Substitution.html#24461" class="Bound">Σ</a> <a id="24463" href="plfa.part2.Substitution.html#24463" class="Bound">Ψ</a> <a id="24465" class="Symbol">:</a> <a id="24467" href="/19.08/Untyped/#3153" class="Datatype">Context</a><a id="24474" class="Symbol">}</a> <a id="24476" class="Symbol">{</a><a id="24477" href="plfa.part2.Substitution.html#24477" class="Bound">σ</a> <a id="24479" class="Symbol">:</a> <a id="24481" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="24487" href="plfa.part2.Substitution.html#24457" class="Bound">Γ</a> <a id="24489" href="plfa.part2.Substitution.html#24459" class="Bound">Δ</a><a id="24490" class="Symbol">}</a> <a id="24492" class="Symbol">{</a><a id="24493" href="plfa.part2.Substitution.html#24493" class="Bound">τ</a> <a id="24495" class="Symbol">:</a> <a id="24497" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="24503" href="plfa.part2.Substitution.html#24459" class="Bound">Δ</a> <a id="24505" href="plfa.part2.Substitution.html#24461" class="Bound">Σ</a><a id="24506" class="Symbol">}</a>
             <a id="24521" class="Symbol">{</a><a id="24522" href="/19.08/Substitution/#24522" class="Bound">θ</a> <a id="24524" class="Symbol">:</a> <a id="24526" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="24532" href="plfa.part2.Substitution.html#24461" class="Bound">Σ</a> <a id="24534" href="plfa.part2.Substitution.html#24463" class="Bound">Ψ</a><a id="24535" class="Symbol">}</a>
          <a id="24547" class="Symbol">→</a> <a id="24549" class="Symbol">∀{</a><a id="24551" href="/19.08/Substitution/#24551" class="Bound">A</a><a id="24552" class="Symbol">}</a> <a id="24554" class="Symbol">→</a> <a id="24556" class="Symbol">(</a><a id="24557" href="plfa.part2.Substitution.html#24477" class="Bound">σ</a> <a id="24559" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24561" href="plfa.part2.Substitution.html#24493" class="Bound">τ</a><a id="24562" class="Symbol">)</a> <a id="24564" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24566" href="plfa.part2.Substitution.html#24522" class="Bound">θ</a> <a id="24568" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="24570" class="Symbol">(</a><a id="24571" href="plfa.part2.Substitution.html#24477" class="Bound">σ</a> <a id="24573" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24575" href="plfa.part2.Substitution.html#24493" class="Bound">τ</a> <a id="24577" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24579" href="plfa.part2.Substitution.html#24522" class="Bound">θ</a><a id="24580" class="Symbol">)</a> <a id="24582" class="Symbol">{</a><a id="24583" href="plfa.part2.Substitution.html#24551" class="Bound">A</a><a id="24584" class="Symbol">}</a>
<a id="24586" href="/19.08/Substitution/#24443" class="Function">sub-assoc</a> <a id="24596" class="Symbol">{</a><a id="24597" href="plfa.part2.Substitution.html#24597" class="Bound">Γ</a><a id="24598" class="Symbol">}{</a><a id="24600" href="plfa.part2.Substitution.html#24600" class="Bound">Δ</a><a id="24601" class="Symbol">}{</a><a id="24603" href="plfa.part2.Substitution.html#24603" class="Bound">Σ</a><a id="24604" class="Symbol">}{</a><a id="24606" href="plfa.part2.Substitution.html#24606" class="Bound">Ψ</a><a id="24607" class="Symbol">}{</a><a id="24609" href="plfa.part2.Substitution.html#24609" class="Bound">σ</a><a id="24610" class="Symbol">}{</a><a id="24612" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a><a id="24613" class="Symbol">}{</a><a id="24615" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a><a id="24616" class="Symbol">}{</a><a id="24618" href="plfa.part2.Substitution.html#24618" class="Bound">A</a><a id="24619" class="Symbol">}</a> <a id="24621" class="Symbol">=</a> <a id="24623" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a> <a id="24638" class="Symbol">λ</a> <a id="24640" href="plfa.part2.Substitution.html#24640" class="Bound">x</a> <a id="24642" class="Symbol">→</a> <a id="24644" href="plfa.part2.Substitution.html#24667" class="Function">lemma</a><a id="24649" class="Symbol">{</a><a id="24650" class="Argument">x</a> <a id="24652" class="Symbol">=</a> <a id="24654" href="plfa.part2.Substitution.html#24640" class="Bound">x</a><a id="24655" class="Symbol">}</a>
  <a id="24659" class="Keyword">where</a>
  <a id="24667" href="/19.08/Substitution/#24667" class="Function">lemma</a> <a id="24673" class="Symbol">:</a> <a id="24675" class="Symbol">∀</a> <a id="24677" class="Symbol">{</a><a id="24678" href="plfa.part2.Substitution.html#24678" class="Bound">x</a> <a id="24680" class="Symbol">:</a> <a id="24682" href="plfa.part2.Substitution.html#24597" class="Bound">Γ</a> <a id="24684" href="/19.08/Untyped/#3521" class="Datatype Operator">∋</a> <a id="24686" href="plfa.part2.Substitution.html#24618" class="Bound">A</a><a id="24687" class="Symbol">}</a> <a id="24689" class="Symbol">→</a> <a id="24691" class="Symbol">((</a><a id="24693" href="plfa.part2.Substitution.html#24609" class="Bound">σ</a> <a id="24695" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24697" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a><a id="24698" class="Symbol">)</a> <a id="24700" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24702" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a><a id="24703" class="Symbol">)</a> <a id="24705" href="plfa.part2.Substitution.html#24678" class="Bound">x</a> <a id="24707" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="24709" class="Symbol">(</a><a id="24710" href="plfa.part2.Substitution.html#24609" class="Bound">σ</a> <a id="24712" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24714" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a> <a id="24716" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24718" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a><a id="24719" class="Symbol">)</a> <a id="24721" href="plfa.part2.Substitution.html#24678" class="Bound">x</a>
  <a id="24725" href="/19.08/Substitution/#24667" class="Function">lemma</a> <a id="24731" class="Symbol">{</a><a id="24732" href="plfa.part2.Substitution.html#24732" class="Bound">x</a><a id="24733" class="Symbol">}</a> <a id="24735" class="Symbol">=</a>
      <a id="24743" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
        <a id="24757" class="Symbol">((</a><a id="24759" href="/19.08/Substitution/#24609" class="Bound">σ</a> <a id="24761" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24763" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a><a id="24764" class="Symbol">)</a> <a id="24766" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24768" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a><a id="24769" class="Symbol">)</a> <a id="24771" href="plfa.part2.Substitution.html#24732" class="Bound">x</a>
      <a id="24779" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
        <a id="24791" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24793" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a> <a id="24795" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24797" class="Symbol">(</a><a id="24798" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="24800" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a> <a id="24802" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24804" class="Symbol">(</a><a id="24805" href="plfa.part2.Substitution.html#24609" class="Bound">σ</a> <a id="24807" href="plfa.part2.Substitution.html#24732" class="Bound">x</a><a id="24808" class="Symbol">))</a>
      <a id="24817" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="24820" href="/19.08/Substitution/#22975" class="Function">sub-sub</a><a id="24827" class="Symbol">{</a><a id="24828" class="Argument">M</a> <a id="24830" class="Symbol">=</a> <a id="24832" href="plfa.part2.Substitution.html#24609" class="Bound">σ</a> <a id="24834" href="plfa.part2.Substitution.html#24732" class="Bound">x</a><a id="24835" class="Symbol">}</a> <a id="24837" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
        <a id="24847" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="24849" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a> <a id="24851" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24853" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a> <a id="24855" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="24857" class="Symbol">(</a><a id="24858" href="plfa.part2.Substitution.html#24609" class="Bound">σ</a> <a id="24860" href="plfa.part2.Substitution.html#24732" class="Bound">x</a><a id="24861" class="Symbol">)</a>
      <a id="24869" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
        <a id="24881" class="Symbol">(</a><a id="24882" href="/19.08/Substitution/#24609" class="Bound">σ</a> <a id="24884" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24886" href="plfa.part2.Substitution.html#24612" class="Bound">τ</a> <a id="24888" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="24890" href="plfa.part2.Substitution.html#24615" class="Bound">θ</a><a id="24891" class="Symbol">)</a> <a id="24893" href="plfa.part2.Substitution.html#24732" class="Bound">x</a>
      <a id="24901" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><h2 id="proof-of-subst-zero-exts-cons">Proof of subst-zero-exts-cons</h2><p>The last equation we needed to prove <code class="language-plaintext highlighter-rouge">subst-zero-exts-cons</code> was <code class="language-plaintext highlighter-rouge">sub-assoc</code>, so we can now go ahead with its proof. We simply apply the equations for <code class="language-plaintext highlighter-rouge">exts</code> and <code class="language-plaintext highlighter-rouge">subst-zero</code> and then apply the σ algebra equation to arrive at the normal form <code class="language-plaintext highlighter-rouge">M • σ</code>.</p><pre class="Agda"><a id="subst-zero-exts-cons"></a><a id="25198" href="/19.08/Substitution/#25198" class="Function">subst-zero-exts-cons</a> <a id="25219" class="Symbol">:</a> <a id="25221" class="Symbol">∀{</a><a id="25223" href="plfa.part2.Substitution.html#25223" class="Bound">Γ</a> <a id="25225" href="plfa.part2.Substitution.html#25225" class="Bound">Δ</a><a id="25226" class="Symbol">}{</a><a id="25228" href="plfa.part2.Substitution.html#25228" class="Bound">σ</a> <a id="25230" class="Symbol">:</a> <a id="25232" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="25238" href="plfa.part2.Substitution.html#25223" class="Bound">Γ</a> <a id="25240" href="plfa.part2.Substitution.html#25225" class="Bound">Δ</a><a id="25241" class="Symbol">}{</a><a id="25243" href="plfa.part2.Substitution.html#25243" class="Bound">B</a><a id="25244" class="Symbol">}{</a><a id="25246" href="plfa.part2.Substitution.html#25246" class="Bound">M</a> <a id="25248" class="Symbol">:</a> <a id="25250" href="plfa.part2.Substitution.html#25225" class="Bound">Δ</a> <a id="25252" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="25254" href="plfa.part2.Substitution.html#25243" class="Bound">B</a><a id="25255" class="Symbol">}{</a><a id="25257" href="plfa.part2.Substitution.html#25257" class="Bound">A</a><a id="25258" class="Symbol">}</a>
                     <a id="25281" class="Symbol">→</a> <a id="25283" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="25288" href="/19.08/Substitution/#25228" class="Bound">σ</a> <a id="25290" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25292" href="plfa.part2.Untyped.html#7375" class="Function">subst-zero</a> <a id="25303" href="plfa.part2.Substitution.html#25246" class="Bound">M</a> <a id="25305" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="25307" class="Symbol">(</a><a id="25308" href="plfa.part2.Substitution.html#25246" class="Bound">M</a> <a id="25310" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25312" href="plfa.part2.Substitution.html#25228" class="Bound">σ</a><a id="25313" class="Symbol">)</a> <a id="25315" class="Symbol">{</a><a id="25316" href="plfa.part2.Substitution.html#25257" class="Bound">A</a><a id="25317" class="Symbol">}</a>
<a id="25319" href="/19.08/Substitution/#25198" class="Function">subst-zero-exts-cons</a> <a id="25340" class="Symbol">{</a><a id="25341" href="plfa.part2.Substitution.html#25341" class="Bound">Γ</a><a id="25342" class="Symbol">}{</a><a id="25344" href="plfa.part2.Substitution.html#25344" class="Bound">Δ</a><a id="25345" class="Symbol">}{</a><a id="25347" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a><a id="25348" class="Symbol">}{</a><a id="25350" href="plfa.part2.Substitution.html#25350" class="Bound">B</a><a id="25351" class="Symbol">}{</a><a id="25353" href="plfa.part2.Substitution.html#25353" class="Bound">M</a><a id="25354" class="Symbol">}{</a><a id="25356" href="plfa.part2.Substitution.html#25356" class="Bound">A</a><a id="25357" class="Symbol">}</a> <a id="25359" class="Symbol">=</a>
    <a id="25365" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
      <a id="25377" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="25382" href="/19.08/Substitution/#25347" class="Bound">σ</a> <a id="25384" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25386" href="plfa.part2.Untyped.html#7375" class="Function">subst-zero</a> <a id="25397" href="plfa.part2.Substitution.html#25353" class="Bound">M</a>
    <a id="25403" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="25406" href="/19.08/Substitution/#12256" class="Function">cong-seq</a> <a id="25415" href="plfa.part2.Substitution.html#15018" class="Function">exts-cons-shift</a> <a id="25431" href="plfa.part2.Substitution.html#15799" class="Function">subst-Z-cons-ids</a> <a id="25448" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="25456" class="Symbol">(</a><a id="25457" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="25459" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a> <a id="25461" href="/19.08/Substitution/#3427" class="Function Operator">•</a> <a id="25463" class="Symbol">(</a><a id="25464" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a> <a id="25466" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25468" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="25469" class="Symbol">))</a> <a id="25472" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25474" class="Symbol">(</a><a id="25475" href="plfa.part2.Substitution.html#25353" class="Bound">M</a> <a id="25477" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25479" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25482" class="Symbol">)</a>
    <a id="25488" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="25491" href="/19.08/Substitution/#9074" class="Function">sub-dist</a> <a id="25500" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="25508" class="Symbol">(</a><a id="25509" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="25511" href="plfa.part2.Substitution.html#25353" class="Bound">M</a> <a id="25513" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25515" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="25519" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="25521" class="Symbol">(</a><a id="25522" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="25524" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="25525" class="Symbol">))</a> <a id="25528" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25530" class="Symbol">((</a><a id="25532" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a> <a id="25534" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25536" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="25537" class="Symbol">)</a> <a id="25539" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25541" class="Symbol">(</a><a id="25542" href="plfa.part2.Substitution.html#25353" class="Bound">M</a> <a id="25544" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25546" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25549" class="Symbol">))</a>
    <a id="25556" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="25559" href="/19.08/Substitution/#11911" class="Function">cong-cons</a> <a id="25569" class="Symbol">(</a><a id="25570" href="plfa.part2.Substitution.html#8259" class="Function">sub-head</a><a id="25578" class="Symbol">{</a><a id="25579" class="Argument">σ</a> <a id="25581" class="Symbol">=</a> <a id="25583" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25586" class="Symbol">})</a> <a id="25589" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="25594" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="25602" href="/19.08/Substitution/#25353" class="Bound">M</a> <a id="25604" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25606" class="Symbol">((</a><a id="25608" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a> <a id="25610" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25612" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="25613" class="Symbol">)</a> <a id="25615" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25617" class="Symbol">(</a><a id="25618" href="plfa.part2.Substitution.html#25353" class="Bound">M</a> <a id="25620" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25622" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25625" class="Symbol">))</a>
    <a id="25632" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="25635" href="/19.08/Substitution/#11911" class="Function">cong-cons</a> <a id="25645" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="25650" class="Symbol">(</a><a id="25651" href="plfa.part2.Substitution.html#24443" class="Function">sub-assoc</a><a id="25660" class="Symbol">{</a><a id="25661" class="Argument">σ</a> <a id="25663" class="Symbol">=</a> <a id="25665" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a><a id="25666" class="Symbol">})</a> <a id="25669" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="25677" href="/19.08/Substitution/#25353" class="Bound">M</a> <a id="25679" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25681" class="Symbol">(</a><a id="25682" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a> <a id="25684" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25686" class="Symbol">(</a><a id="25687" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="25689" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25691" class="Symbol">(</a><a id="25692" href="plfa.part2.Substitution.html#25353" class="Bound">M</a> <a id="25694" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25696" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25699" class="Symbol">)))</a>
    <a id="25707" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="25710" href="/19.08/Substitution/#11911" class="Function">cong-cons</a> <a id="25720" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="25725" class="Symbol">(</a><a id="25726" href="plfa.part2.Substitution.html#12256" class="Function">cong-seq</a><a id="25734" class="Symbol">{</a><a id="25735" class="Argument">σ</a> <a id="25737" class="Symbol">=</a> <a id="25739" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a><a id="25740" class="Symbol">}</a> <a id="25742" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="25747" class="Symbol">(</a><a id="25748" href="plfa.part2.Substitution.html#8365" class="Function">sub-tail</a><a id="25756" class="Symbol">{</a><a id="25757" class="Argument">M</a> <a id="25759" class="Symbol">=</a> <a id="25761" href="plfa.part2.Substitution.html#25353" class="Bound">M</a><a id="25762" class="Symbol">}{</a><a id="25764" class="Argument">σ</a> <a id="25766" class="Symbol">=</a> <a id="25768" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25771" class="Symbol">}))</a> <a id="25775" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="25783" href="/19.08/Substitution/#25353" class="Bound">M</a> <a id="25785" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25787" class="Symbol">(</a><a id="25788" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a> <a id="25790" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="25792" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="25795" class="Symbol">)</a>
    <a id="25801" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="25804" href="/19.08/Substitution/#11911" class="Function">cong-cons</a> <a id="25814" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="25819" class="Symbol">(</a><a id="25820" href="plfa.part2.Substitution.html#17664" class="Function">sub-idR</a><a id="25827" class="Symbol">{</a><a id="25828" class="Argument">σ</a> <a id="25830" class="Symbol">=</a> <a id="25832" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a><a id="25833" class="Symbol">})</a> <a id="25836" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
      <a id="25844" href="/19.08/Substitution/#25353" class="Bound">M</a> <a id="25846" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="25848" href="plfa.part2.Substitution.html#25347" class="Bound">σ</a>
    <a id="25854" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><h2 id="proof-of-the-substitution-lemma">Proof of the substitution lemma</h2><p>We first prove the generalized form of the substitution lemma, showing that a substitution <code class="language-plaintext highlighter-rouge">σ</code> commutes with the substitution of <code class="language-plaintext highlighter-rouge">M</code> into <code class="language-plaintext highlighter-rouge">N</code>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⟪ exts σ ⟫ N [ ⟪ σ ⟫ M ] ≡ ⟪ σ ⟫ (N [ M ])
</code></pre></div></div><p>This proof is where the σ algebra pays off. The proof is by direct equational reasoning. Starting with the left-hand side, we apply σ algebra equations, oriented left-to-right, until we arrive at the normal form</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⟪ ⟪ σ ⟫ M • σ ⟫ N
</code></pre></div></div><p>We then do the same with the right-hand side, arriving at the same normal form.</p><pre class="Agda"><a id="subst-commute"></a><a id="26412" href="/19.08/Substitution/#26412" class="Function">subst-commute</a> <a id="26426" class="Symbol">:</a> <a id="26428" class="Symbol">∀{</a><a id="26430" href="plfa.part2.Substitution.html#26430" class="Bound">Γ</a> <a id="26432" href="plfa.part2.Substitution.html#26432" class="Bound">Δ</a><a id="26433" class="Symbol">}{</a><a id="26435" href="plfa.part2.Substitution.html#26435" class="Bound">N</a> <a id="26437" class="Symbol">:</a> <a id="26439" href="plfa.part2.Substitution.html#26430" class="Bound">Γ</a> <a id="26441" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="26443" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="26445" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="26447" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="26448" class="Symbol">}{</a><a id="26450" href="plfa.part2.Substitution.html#26450" class="Bound">M</a> <a id="26452" class="Symbol">:</a> <a id="26454" href="plfa.part2.Substitution.html#26430" class="Bound">Γ</a> <a id="26456" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="26458" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="26459" class="Symbol">}{</a><a id="26461" href="plfa.part2.Substitution.html#26461" class="Bound">σ</a> <a id="26463" class="Symbol">:</a> <a id="26465" href="plfa.part2.Substitution.html#2405" class="Function">Subst</a> <a id="26471" href="plfa.part2.Substitution.html#26430" class="Bound">Γ</a> <a id="26473" href="plfa.part2.Substitution.html#26432" class="Bound">Δ</a> <a id="26475" class="Symbol">}</a>
    <a id="26481" class="Symbol">→</a> <a id="26483" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26485" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="26490" href="plfa.part2.Substitution.html#26461" class="Bound">σ</a> <a id="26492" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26494" href="plfa.part2.Substitution.html#26435" class="Bound">N</a> <a id="26496" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="26498" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26500" href="plfa.part2.Substitution.html#26461" class="Bound">σ</a> <a id="26502" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26504" href="plfa.part2.Substitution.html#26450" class="Bound">M</a> <a id="26506" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a> <a id="26508" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="26510" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26512" href="plfa.part2.Substitution.html#26461" class="Bound">σ</a> <a id="26514" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26516" class="Symbol">(</a><a id="26517" href="plfa.part2.Substitution.html#26435" class="Bound">N</a> <a id="26519" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="26521" href="plfa.part2.Substitution.html#26450" class="Bound">M</a> <a id="26523" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="26524" class="Symbol">)</a>
<a id="26526" href="/19.08/Substitution/#26412" class="Function">subst-commute</a> <a id="26540" class="Symbol">{</a><a id="26541" href="plfa.part2.Substitution.html#26541" class="Bound">Γ</a><a id="26542" class="Symbol">}{</a><a id="26544" href="plfa.part2.Substitution.html#26544" class="Bound">Δ</a><a id="26545" class="Symbol">}{</a><a id="26547" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26548" class="Symbol">}{</a><a id="26550" href="plfa.part2.Substitution.html#26550" class="Bound">M</a><a id="26551" class="Symbol">}{</a><a id="26553" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a><a id="26554" class="Symbol">}</a> <a id="26556" class="Symbol">=</a>
     <a id="26563" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
       <a id="26576" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26578" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="26583" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26585" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26587" href="plfa.part2.Substitution.html#26547" class="Bound">N</a> <a id="26589" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="26591" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26593" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26595" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26597" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="26599" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a>
     <a id="26606" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="26617" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26619" href="/19.08/Untyped/#7375" class="Function">subst-zero</a> <a id="26630" class="Symbol">(</a><a id="26631" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26633" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26635" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26637" href="plfa.part2.Substitution.html#26550" class="Bound">M</a><a id="26638" class="Symbol">)</a> <a id="26640" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26642" class="Symbol">(</a><a id="26643" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26645" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="26650" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26652" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26654" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26655" class="Symbol">)</a>
     <a id="26662" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="26665" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="26674" class="Symbol">{</a><a id="26675" class="Argument">M</a> <a id="26677" class="Symbol">=</a> <a id="26679" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26681" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="26686" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26688" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26690" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26691" class="Symbol">}</a> <a id="26693" href="plfa.part2.Substitution.html#15799" class="Function">subst-Z-cons-ids</a> <a id="26710" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="26715" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="26724" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26726" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26728" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26730" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26732" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="26734" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="26736" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="26740" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26742" class="Symbol">(</a><a id="26743" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26745" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="26750" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26752" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26754" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26755" class="Symbol">)</a>
     <a id="26762" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="26765" href="/19.08/Substitution/#22975" class="Function">sub-sub</a> <a id="26773" class="Symbol">{</a><a id="26774" class="Argument">M</a> <a id="26776" class="Symbol">=</a> <a id="26778" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26779" class="Symbol">}</a> <a id="26781" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="26790" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26792" class="Symbol">(</a><a id="26793" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="26798" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a><a id="26799" class="Symbol">)</a> <a id="26801" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="26803" class="Symbol">((</a><a id="26805" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26807" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26809" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26811" href="plfa.part2.Substitution.html#26550" class="Bound">M</a><a id="26812" class="Symbol">)</a> <a id="26814" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="26816" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="26819" class="Symbol">)</a> <a id="26821" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26823" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="26830" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="26833" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="26842" class="Symbol">{</a><a id="26843" class="Argument">M</a> <a id="26845" class="Symbol">=</a> <a id="26847" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26848" class="Symbol">}</a> <a id="26850" class="Symbol">(</a><a id="26851" href="plfa.part2.Substitution.html#12256" class="Function">cong-seq</a> <a id="26860" href="plfa.part2.Substitution.html#15018" class="Function">exts-cons-shift</a> <a id="26876" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="26880" class="Symbol">)</a> <a id="26882" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="26887" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="26896" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26898" class="Symbol">(</a><a id="26899" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="26901" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a> <a id="26903" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="26905" class="Symbol">(</a><a id="26906" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26908" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="26910" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="26911" class="Symbol">))</a> <a id="26914" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="26916" class="Symbol">(</a><a id="26917" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="26919" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="26921" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26923" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="26925" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="26927" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="26930" class="Symbol">)</a> <a id="26932" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="26934" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="26941" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="26944" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="26953" class="Symbol">{</a><a id="26954" class="Argument">M</a> <a id="26956" class="Symbol">=</a> <a id="26958" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="26959" class="Symbol">}</a> <a id="26961" class="Symbol">(</a><a id="26962" href="plfa.part2.Substitution.html#9074" class="Function">sub-dist</a> <a id="26971" class="Symbol">{</a><a id="26972" class="Argument">M</a> <a id="26974" class="Symbol">=</a> <a id="26976" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="26978" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="26979" class="Symbol">})</a> <a id="26982" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="26987" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="26996" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="26998" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27000" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27002" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27004" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27006" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27008" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27010" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="27014" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27016" class="Symbol">(</a><a id="27017" href="/19.08/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="27019" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="27020" class="Symbol">)</a> <a id="27022" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27024" class="Symbol">((</a><a id="27026" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27028" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27030" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="27031" class="Symbol">)</a> <a id="27033" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27035" class="Symbol">(</a><a id="27036" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27038" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27040" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27042" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27044" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27046" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="27049" class="Symbol">))</a> <a id="27052" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27054" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27061" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">≡⟨⟩</a>
       <a id="27072" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27074" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27076" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27078" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27080" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27082" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27084" class="Symbol">((</a><a id="27086" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27088" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27090" href="plfa.part2.Substitution.html#3185" class="Function">↑</a><a id="27091" class="Symbol">)</a> <a id="27093" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27095" class="Symbol">(</a><a id="27096" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27098" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27100" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27102" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27104" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27106" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="27109" class="Symbol">))</a> <a id="27112" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27114" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27121" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27124" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="27132" class="Symbol">{</a><a id="27133" class="Argument">M</a> <a id="27135" class="Symbol">=</a> <a id="27137" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27138" class="Symbol">}</a> <a id="27140" class="Symbol">(</a><a id="27141" href="plfa.part2.Substitution.html#11911" class="Function">cong-cons</a> <a id="27151" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27156" class="Symbol">(</a><a id="27157" href="plfa.part2.Substitution.html#24443" class="Function">sub-assoc</a><a id="27166" class="Symbol">{</a><a id="27167" class="Argument">σ</a> <a id="27169" class="Symbol">=</a> <a id="27171" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a><a id="27172" class="Symbol">}))</a> <a id="27176" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27181" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27190" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27192" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27194" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27196" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27198" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27200" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27202" class="Symbol">(</a><a id="27203" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27205" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27207" href="plfa.part2.Substitution.html#3185" class="Function">↑</a> <a id="27209" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27211" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27213" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27215" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27217" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27219" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27221" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="27224" class="Symbol">)</a> <a id="27226" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27228" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27235" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27238" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="27246" class="Symbol">{</a><a id="27247" class="Argument">M</a> <a id="27249" class="Symbol">=</a> <a id="27251" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27252" class="Symbol">}</a> <a id="27254" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27259" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27264" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27273" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27275" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27277" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27279" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27281" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27283" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27285" class="Symbol">(</a><a id="27286" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27288" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27290" href="plfa.part2.Substitution.html#3046" class="Function">ids</a><a id="27293" class="Symbol">)</a> <a id="27295" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27297" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27304" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27307" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="27315" class="Symbol">{</a><a id="27316" class="Argument">M</a> <a id="27318" class="Symbol">=</a> <a id="27320" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27321" class="Symbol">}</a> <a id="27323" class="Symbol">(</a><a id="27324" href="plfa.part2.Substitution.html#11911" class="Function">cong-cons</a> <a id="27334" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27339" class="Symbol">(</a><a id="27340" href="plfa.part2.Substitution.html#17664" class="Function">sub-idR</a><a id="27347" class="Symbol">{</a><a id="27348" class="Argument">σ</a> <a id="27350" class="Symbol">=</a> <a id="27352" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a><a id="27353" class="Symbol">}))</a> <a id="27357" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27362" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27371" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27373" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27375" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27377" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27379" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27381" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27383" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27385" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27387" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27394" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27397" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="27405" class="Symbol">{</a><a id="27406" class="Argument">M</a> <a id="27408" class="Symbol">=</a> <a id="27410" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27411" class="Symbol">}</a> <a id="27413" class="Symbol">(</a><a id="27414" href="plfa.part2.Substitution.html#11911" class="Function">cong-cons</a> <a id="27424" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27429" class="Symbol">(</a><a id="27430" href="plfa.part2.Substitution.html#8967" class="Function">sub-idL</a><a id="27437" class="Symbol">{</a><a id="27438" class="Argument">σ</a> <a id="27440" class="Symbol">=</a> <a id="27442" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a><a id="27443" class="Symbol">}))</a> <a id="27447" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27452" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27461" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27463" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27465" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27467" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27469" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27471" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27473" class="Symbol">(</a><a id="27474" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="27478" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27480" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a><a id="27481" class="Symbol">)</a> <a id="27483" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27485" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27492" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27495" href="/19.08/Substitution/#11172" class="Function">cong-sub</a><a id="27503" class="Symbol">{</a><a id="27504" class="Argument">M</a> <a id="27506" class="Symbol">=</a> <a id="27508" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27509" class="Symbol">}</a> <a id="27511" class="Symbol">(</a><a id="27512" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="27516" href="plfa.part2.Substitution.html#9074" class="Function">sub-dist</a><a id="27524" class="Symbol">)</a> <a id="27526" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="27531" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27540" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27542" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27544" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27546" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="27550" href="plfa.part2.Substitution.html#3760" class="Function Operator">⨟</a> <a id="27552" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27554" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27556" href="plfa.part2.Substitution.html#26547" class="Bound">N</a>
     <a id="27563" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27566" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="27570" class="Symbol">(</a><a id="27571" href="/19.08/Substitution/#22975" class="Function">sub-sub</a><a id="27578" class="Symbol">{</a><a id="27579" class="Argument">M</a> <a id="27581" class="Symbol">=</a> <a id="27583" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27584" class="Symbol">})</a> <a id="27587" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27596" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27598" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27600" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27602" class="Symbol">(</a><a id="27603" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="27605" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27607" href="plfa.part2.Substitution.html#3427" class="Function Operator">•</a> <a id="27609" href="plfa.part2.Substitution.html#3046" class="Function">ids</a> <a id="27613" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27615" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27616" class="Symbol">)</a>
     <a id="27623" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="27626" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="27631" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27633" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27635" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27637" class="Symbol">(</a><a id="27638" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="27642" class="Symbol">(</a><a id="27643" href="plfa.part2.Substitution.html#11172" class="Function">cong-sub</a><a id="27651" class="Symbol">{</a><a id="27652" class="Argument">M</a> <a id="27654" class="Symbol">=</a> <a id="27656" href="plfa.part2.Substitution.html#26547" class="Bound">N</a><a id="27657" class="Symbol">}</a> <a id="27659" href="plfa.part2.Substitution.html#15799" class="Function">subst-Z-cons-ids</a> <a id="27676" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="27680" class="Symbol">))</a> <a id="27683" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="27692" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="27694" href="plfa.part2.Substitution.html#26553" class="Bound">σ</a> <a id="27696" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="27698" class="Symbol">(</a><a id="27699" href="plfa.part2.Substitution.html#26547" class="Bound">N</a> <a id="27701" href="/19.08/Untyped/#7491" class="Function Operator">[</a> <a id="27703" href="plfa.part2.Substitution.html#26550" class="Bound">M</a> <a id="27705" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="27706" class="Symbol">)</a>
     <a id="27713" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><p>A corollary of <code class="language-plaintext highlighter-rouge">subst-commute</code> is that <code class="language-plaintext highlighter-rouge">rename</code> also commutes with substitution. In the proof below, we first exchange <code class="language-plaintext highlighter-rouge">rename ρ</code> for the substitution <code class="language-plaintext highlighter-rouge">⟪ ren ρ ⟫</code>, and apply <code class="language-plaintext highlighter-rouge">subst-commute</code>, and then convert back to <code class="language-plaintext highlighter-rouge">rename ρ</code>.</p><pre class="Agda"><a id="rename-subst-commute"></a><a id="27953" href="/19.08/Substitution/#27953" class="Function">rename-subst-commute</a> <a id="27974" class="Symbol">:</a> <a id="27976" class="Symbol">∀{</a><a id="27978" href="plfa.part2.Substitution.html#27978" class="Bound">Γ</a> <a id="27980" href="plfa.part2.Substitution.html#27980" class="Bound">Δ</a><a id="27981" class="Symbol">}{</a><a id="27983" href="plfa.part2.Substitution.html#27983" class="Bound">N</a> <a id="27985" class="Symbol">:</a> <a id="27987" href="plfa.part2.Substitution.html#27978" class="Bound">Γ</a> <a id="27989" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="27991" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="27993" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="27995" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="27996" class="Symbol">}{</a><a id="27998" href="plfa.part2.Substitution.html#27998" class="Bound">M</a> <a id="28000" class="Symbol">:</a> <a id="28002" href="plfa.part2.Substitution.html#27978" class="Bound">Γ</a> <a id="28004" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="28006" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="28007" class="Symbol">}{</a><a id="28009" href="plfa.part2.Substitution.html#28009" class="Bound">ρ</a> <a id="28011" class="Symbol">:</a> <a id="28013" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a> <a id="28020" href="plfa.part2.Substitution.html#27978" class="Bound">Γ</a> <a id="28022" href="plfa.part2.Substitution.html#27980" class="Bound">Δ</a> <a id="28024" class="Symbol">}</a>
    <a id="28030" class="Symbol">→</a> <a id="28032" class="Symbol">(</a><a id="28033" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="28040" class="Symbol">(</a><a id="28041" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="28045" href="/19.08/Substitution/#28009" class="Bound">ρ</a><a id="28046" class="Symbol">)</a> <a id="28048" href="plfa.part2.Substitution.html#27983" class="Bound">N</a><a id="28049" class="Symbol">)</a> <a id="28051" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28053" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="28060" href="plfa.part2.Substitution.html#28009" class="Bound">ρ</a> <a id="28062" href="plfa.part2.Substitution.html#27998" class="Bound">M</a> <a id="28064" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a> <a id="28066" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="28068" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="28075" href="plfa.part2.Substitution.html#28009" class="Bound">ρ</a> <a id="28077" class="Symbol">(</a><a id="28078" href="plfa.part2.Substitution.html#27983" class="Bound">N</a> <a id="28080" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28082" href="plfa.part2.Substitution.html#27998" class="Bound">M</a> <a id="28084" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="28085" class="Symbol">)</a>
<a id="28087" href="/19.08/Substitution/#27953" class="Function">rename-subst-commute</a> <a id="28108" class="Symbol">{</a><a id="28109" href="plfa.part2.Substitution.html#28109" class="Bound">Γ</a><a id="28110" class="Symbol">}{</a><a id="28112" href="plfa.part2.Substitution.html#28112" class="Bound">Δ</a><a id="28113" class="Symbol">}{</a><a id="28115" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28116" class="Symbol">}{</a><a id="28118" href="plfa.part2.Substitution.html#28118" class="Bound">M</a><a id="28119" class="Symbol">}{</a><a id="28121" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a><a id="28122" class="Symbol">}</a> <a id="28124" class="Symbol">=</a>
     <a id="28131" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
       <a id="28144" class="Symbol">(</a><a id="28145" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="28152" class="Symbol">(</a><a id="28153" href="plfa.part2.Untyped.html#5925" class="Function">ext</a> <a id="28157" href="/19.08/Substitution/#28121" class="Bound">ρ</a><a id="28158" class="Symbol">)</a> <a id="28160" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28161" class="Symbol">)</a> <a id="28163" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28165" href="plfa.part2.Untyped.html#6235" class="Function">rename</a> <a id="28172" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a> <a id="28174" href="plfa.part2.Substitution.html#28118" class="Bound">M</a> <a id="28176" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a>
     <a id="28183" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="28186" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="28195" class="Symbol">(</a><a id="28196" href="plfa.part2.Substitution.html#11660" class="Function">cong-sub-zero</a> <a id="28210" class="Symbol">(</a><a id="28211" href="plfa.part2.Substitution.html#13654" class="Function">rename-subst-ren</a><a id="28227" class="Symbol">{</a><a id="28228" class="Argument">M</a> <a id="28230" class="Symbol">=</a> <a id="28232" href="plfa.part2.Substitution.html#28118" class="Bound">M</a><a id="28233" class="Symbol">}))</a>
                 <a id="28254" class="Symbol">(</a><a id="28255" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a><a id="28271" class="Symbol">{</a><a id="28272" class="Argument">M</a> <a id="28274" class="Symbol">=</a> <a id="28276" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28277" class="Symbol">})</a> <a id="28280" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="28289" class="Symbol">(</a><a id="28290" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="28292" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="28296" class="Symbol">(</a><a id="28297" href="/19.08/Untyped/#5925" class="Function">ext</a> <a id="28301" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a><a id="28302" class="Symbol">)</a> <a id="28304" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="28306" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28307" class="Symbol">)</a> <a id="28309" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28311" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="28313" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="28317" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a> <a id="28319" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="28321" href="plfa.part2.Substitution.html#28118" class="Bound">M</a> <a id="28323" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a>
     <a id="28330" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="28333" href="/19.08/Substitution/#11172" class="Function">cong-sub</a> <a id="28342" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="28347" class="Symbol">(</a><a id="28348" href="plfa.part2.Substitution.html#11172" class="Function">cong-sub</a><a id="28356" class="Symbol">{</a><a id="28357" class="Argument">M</a> <a id="28359" class="Symbol">=</a> <a id="28361" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28362" class="Symbol">}</a> <a id="28364" href="plfa.part2.Substitution.html#13285" class="Function">ren-ext</a> <a id="28372" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="28376" class="Symbol">)</a> <a id="28378" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="28387" class="Symbol">(</a><a id="28388" href="/19.08/Substitution/#2546" class="Function Operator">⟪</a> <a id="28390" href="/19.08/Untyped/#6671" class="Function">exts</a> <a id="28395" class="Symbol">(</a><a id="28396" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="28400" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a><a id="28401" class="Symbol">)</a> <a id="28403" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="28405" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28406" class="Symbol">)</a> <a id="28408" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28410" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟪</a> <a id="28412" href="plfa.part2.Substitution.html#6498" class="Function">ren</a> <a id="28416" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a> <a id="28418" href="plfa.part2.Substitution.html#2546" class="Function Operator">⟫</a> <a id="28420" href="plfa.part2.Substitution.html#28118" class="Bound">M</a> <a id="28422" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a>
     <a id="28429" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="28432" href="/19.08/Substitution/#26412" class="Function">subst-commute</a><a id="28445" class="Symbol">{</a><a id="28446" class="Argument">N</a> <a id="28448" class="Symbol">=</a> <a id="28450" href="plfa.part2.Substitution.html#28115" class="Bound">N</a><a id="28451" class="Symbol">}</a> <a id="28453" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="28462" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="28468" class="Symbol">(</a><a id="28469" href="/19.08/Substitution/#6498" class="Function">ren</a> <a id="28473" href="plfa.part2.Substitution.html#28121" class="Bound">ρ</a><a id="28474" class="Symbol">)</a> <a id="28476" class="Symbol">(</a><a id="28477" href="plfa.part2.Substitution.html#28115" class="Bound">N</a> <a id="28479" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28481" href="plfa.part2.Substitution.html#28118" class="Bound">M</a> <a id="28483" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="28484" class="Symbol">)</a>
     <a id="28491" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">≡⟨</a> <a id="28494" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="28498" class="Symbol">(</a><a id="28499" href="/19.08/Substitution/#13654" class="Function">rename-subst-ren</a><a id="28515" class="Symbol">)</a> <a id="28517" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">⟩</a>
       <a id="28526" href="/19.08/Untyped/#6235" class="Function">rename</a> <a id="28533" href="/19.08/Substitution/#28121" class="Bound">ρ</a> <a id="28535" class="Symbol">(</a><a id="28536" href="plfa.part2.Substitution.html#28115" class="Bound">N</a> <a id="28538" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="28540" href="plfa.part2.Substitution.html#28118" class="Bound">M</a> <a id="28542" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="28543" class="Symbol">)</a>
     <a id="28550" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">∎</a>
</pre><p>To present the substitution lemma, we introduce the following notation for substituting a term <code class="language-plaintext highlighter-rouge">M</code> for index 1 within term <code class="language-plaintext highlighter-rouge">N</code>.</p><pre class="Agda"><a id="_〔_〕"></a><a id="28690" href="/19.08/Substitution/#28690" class="Function Operator">_〔_〕</a> <a id="28695" class="Symbol">:</a> <a id="28697" class="Symbol">∀</a> <a id="28699" class="Symbol">{</a><a id="28700" href="plfa.part2.Substitution.html#28700" class="Bound">Γ</a> <a id="28702" href="plfa.part2.Substitution.html#28702" class="Bound">A</a> <a id="28704" href="plfa.part2.Substitution.html#28704" class="Bound">B</a> <a id="28706" href="plfa.part2.Substitution.html#28706" class="Bound">C</a><a id="28707" class="Symbol">}</a>
        <a id="28717" class="Symbol">→</a> <a id="28719" href="/19.08/Substitution/#28700" class="Bound">Γ</a> <a id="28721" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="28723" href="plfa.part2.Substitution.html#28704" class="Bound">B</a> <a id="28725" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="28727" href="plfa.part2.Substitution.html#28706" class="Bound">C</a> <a id="28729" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="28731" href="plfa.part2.Substitution.html#28702" class="Bound">A</a>
        <a id="28741" class="Symbol">→</a> <a id="28743" href="/19.08/Substitution/#28700" class="Bound">Γ</a> <a id="28745" href="/19.08/Untyped/#4294" class="Datatype Operator">⊢</a> <a id="28747" href="plfa.part2.Substitution.html#28704" class="Bound">B</a>
          <a id="28759" class="Comment">---------</a>
        <a id="28777" class="Symbol">→</a> <a id="28779" href="/19.08/Substitution/#28700" class="Bound">Γ</a> <a id="28781" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="28783" href="plfa.part2.Substitution.html#28706" class="Bound">C</a> <a id="28785" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="28787" href="plfa.part2.Substitution.html#28702" class="Bound">A</a>
<a id="28789" href="/19.08/Substitution/#28690" class="Function Operator">_〔_〕</a> <a id="28794" class="Symbol">{</a><a id="28795" href="plfa.part2.Substitution.html#28795" class="Bound">Γ</a><a id="28796" class="Symbol">}</a> <a id="28798" class="Symbol">{</a><a id="28799" href="plfa.part2.Substitution.html#28799" class="Bound">A</a><a id="28800" class="Symbol">}</a> <a id="28802" class="Symbol">{</a><a id="28803" href="plfa.part2.Substitution.html#28803" class="Bound">B</a><a id="28804" class="Symbol">}</a> <a id="28806" class="Symbol">{</a><a id="28807" href="plfa.part2.Substitution.html#28807" class="Bound">C</a><a id="28808" class="Symbol">}</a> <a id="28810" href="plfa.part2.Substitution.html#28810" class="Bound">N</a> <a id="28812" href="plfa.part2.Substitution.html#28812" class="Bound">M</a> <a id="28814" class="Symbol">=</a>
   <a id="28819" href="/19.08/Untyped/#6963" class="Function">subst</a> <a id="28825" class="Symbol">{</a><a id="28826" href="/19.08/Substitution/#28795" class="Bound">Γ</a> <a id="28828" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="28830" href="plfa.part2.Substitution.html#28803" class="Bound">B</a> <a id="28832" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="28834" href="plfa.part2.Substitution.html#28807" class="Bound">C</a><a id="28835" class="Symbol">}</a> <a id="28837" class="Symbol">{</a><a id="28838" href="plfa.part2.Substitution.html#28795" class="Bound">Γ</a> <a id="28840" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="28842" href="plfa.part2.Substitution.html#28807" class="Bound">C</a><a id="28843" class="Symbol">}</a> <a id="28845" class="Symbol">(</a><a id="28846" href="plfa.part2.Untyped.html#6671" class="Function">exts</a> <a id="28851" class="Symbol">(</a><a id="28852" href="plfa.part2.Untyped.html#7375" class="Function">subst-zero</a> <a id="28863" href="plfa.part2.Substitution.html#28812" class="Bound">M</a><a id="28864" class="Symbol">))</a> <a id="28867" class="Symbol">{</a><a id="28868" href="plfa.part2.Substitution.html#28799" class="Bound">A</a><a id="28869" class="Symbol">}</a> <a id="28871" href="plfa.part2.Substitution.html#28810" class="Bound">N</a>
</pre><p>The substitution lemma is stated as follows and proved as a corollary of the <code class="language-plaintext highlighter-rouge">subst-commute</code> lemma.</p><pre class="Agda"><a id="substitution"></a><a id="28983" href="/19.08/Substitution/#28983" class="Function">substitution</a> <a id="28996" class="Symbol">:</a> <a id="28998" class="Symbol">∀{</a><a id="29000" href="plfa.part2.Substitution.html#29000" class="Bound">Γ</a><a id="29001" class="Symbol">}{</a><a id="29003" href="plfa.part2.Substitution.html#29003" class="Bound">M</a> <a id="29005" class="Symbol">:</a> <a id="29007" href="plfa.part2.Substitution.html#29000" class="Bound">Γ</a> <a id="29009" href="/19.08/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="29011" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="29013" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="29015" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="29017" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="29019" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="29020" class="Symbol">}{</a><a id="29022" href="plfa.part2.Substitution.html#29022" class="Bound">N</a> <a id="29024" class="Symbol">:</a> <a id="29026" href="plfa.part2.Substitution.html#29000" class="Bound">Γ</a> <a id="29028" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="29030" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a> <a id="29032" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="29034" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="29035" class="Symbol">}{</a><a id="29037" href="plfa.part2.Substitution.html#29037" class="Bound">L</a> <a id="29039" class="Symbol">:</a> <a id="29041" href="plfa.part2.Substitution.html#29000" class="Bound">Γ</a> <a id="29043" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">⊢</a> <a id="29045" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">★</a><a id="29046" class="Symbol">}</a>
    <a id="29052" class="Symbol">→</a> <a id="29054" class="Symbol">(</a><a id="29055" href="/19.08/Substitution/#29003" class="Bound">M</a> <a id="29057" href="/19.08/Untyped/#7491" class="Function Operator">[</a> <a id="29059" href="plfa.part2.Substitution.html#29022" class="Bound">N</a> <a id="29061" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="29062" class="Symbol">)</a> <a id="29064" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="29066" href="plfa.part2.Substitution.html#29037" class="Bound">L</a> <a id="29068" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a> <a id="29070" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="29072" class="Symbol">(</a><a id="29073" href="plfa.part2.Substitution.html#29003" class="Bound">M</a> <a id="29075" href="plfa.part2.Substitution.html#28690" class="Function Operator">〔</a> <a id="29077" href="plfa.part2.Substitution.html#29037" class="Bound">L</a> <a id="29079" href="plfa.part2.Substitution.html#28690" class="Function Operator">〕</a><a id="29080" class="Symbol">)</a> <a id="29082" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="29084" class="Symbol">(</a><a id="29085" href="plfa.part2.Substitution.html#29022" class="Bound">N</a> <a id="29087" href="plfa.part2.Untyped.html#7491" class="Function Operator">[</a> <a id="29089" href="plfa.part2.Substitution.html#29037" class="Bound">L</a> <a id="29091" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a><a id="29092" class="Symbol">)</a> <a id="29094" href="plfa.part2.Untyped.html#7491" class="Function Operator">]</a>
<a id="29096" href="/19.08/Substitution/#28983" class="Function">substitution</a><a id="29108" class="Symbol">{</a><a id="29109" class="Argument">M</a> <a id="29111" class="Symbol">=</a> <a id="29113" href="plfa.part2.Substitution.html#29113" class="Bound">M</a><a id="29114" class="Symbol">}{</a><a id="29116" class="Argument">N</a> <a id="29118" class="Symbol">=</a> <a id="29120" href="plfa.part2.Substitution.html#29120" class="Bound">N</a><a id="29121" class="Symbol">}{</a><a id="29123" class="Argument">L</a> <a id="29125" class="Symbol">=</a> <a id="29127" href="plfa.part2.Substitution.html#29127" class="Bound">L</a><a id="29128" class="Symbol">}</a> <a id="29130" class="Symbol">=</a>
   <a id="29135" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="29139" class="Symbol">(</a><a id="29140" href="/19.08/Substitution/#26412" class="Function">subst-commute</a><a id="29153" class="Symbol">{</a><a id="29154" class="Argument">N</a> <a id="29156" class="Symbol">=</a> <a id="29158" href="plfa.part2.Substitution.html#29113" class="Bound">M</a><a id="29159" class="Symbol">}{</a><a id="29161" class="Argument">M</a> <a id="29163" class="Symbol">=</a> <a id="29165" href="plfa.part2.Substitution.html#29120" class="Bound">N</a><a id="29166" class="Symbol">}{</a><a id="29168" class="Argument">σ</a> <a id="29170" class="Symbol">=</a> <a id="29172" href="/19.08/Untyped/#7375" class="Function">subst-zero</a> <a id="29183" href="plfa.part2.Substitution.html#29127" class="Bound">L</a><a id="29184" class="Symbol">})</a>
</pre><h2 id="notes">Notes</h2><p>Most of the properties and proofs in this file are based on the paper <em>Autosubst: Reasoning with de Bruijn Terms and Parallel Substitution</em> by Schafer, Tebbi, and Smolka (ITP 2015). That paper, in turn, is based on the paper of Abadi, Cardelli, Curien, and Levy (1991) that defines the σ algebra.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⟪  U+27EA  MATHEMATICAL LEFT DOUBLE ANGLE BRACKET (\&lt;&lt;)
⟫  U+27EA  MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET (\&gt;&gt;)
↑  U+2191  UPWARDS ARROW (\u)
•  U+2022  BULLET (\bub)
⨟  U+2A1F  Z NOTATION SCHEMA COMPOSITION (C-x 8 RET Z NOTATION SCHEMA COMPOSITION)
〔  U+3014  LEFT TORTOISE SHELL BRACKET (\( option 9 on page 2)
〕  U+3015  RIGHT TORTOISE SHELL BRACKET (\) option 9 on page 2)
</code></pre></div></div></div><p style="text-align:center"><a alt="Previous chapter" href="/19.08/ContextualEquivalence/">Prev</a> &bullet; <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev-19.08/src/plfa/part2/Substitution.lagda.md">Source</a> &bullet; <a alt="Next chapter" href="/19.08/Acknowledgements/">Next</a></p></article></div></main><footer class="site-footer h-card"><data class="u-url" href="/19.08/"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/19.08/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/19.08/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/19.08/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jsiek"><svg class="svg-icon"><use xlink:href="/19.08/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jsiek</span></a></li><li><a href="https://www.twitter.com/jeremysiek"><svg class="svg-icon"><use xlink:href="/19.08/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jeremysiek</span></a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer><script type="text/javascript" src="/19.08/assets/jquery.js"></script><script type="text/javascript">$(".menu-icon").click(function(){$(".trigger").toggle()}),$("div.foldable pre").each(function(){var i=$(this).height(),t=parseFloat($(this).css("line-height")),h=$("<div></div>"),e=$("<div></div>"),o=$("<div></div>");$(this).prepend(h),h.css({position:"relative",float:"right",right:"-"+(.5*t-1.5)+"px",width:t,height:t}),o.css({position:"relative",height:t,width:"3px","background-color":"#C1E0FF"}),e.css({position:"relative",top:"-"+(.5*t+1.5)+"px",left:"-"+(.5*t-1.5)+"px",height:"3px",width:t,"background-color":"#C1E0FF"}),h.append(o),h.append(e),$(this).height(2*t),$(this).css("overflow","hidden"),$(this).click(function(){$(this).height()==i?($(this).height(2*t),h.show()):($(this).height("auto"),h.hide())})})</script><script type="text/javascript" src="/19.08/assets/katex.js"></script><script type="text/javascript">$("script[type='math/tex']").replaceWith(function(){var t=$(this).text();return'<span class="inline-equation">'+katex.renderToString(t)+"</span>"}),$("script[type='math/tex; mode=display']").replaceWith(function(){var t=$(this).text().replace(/%.*?(\n|$)/g,"");return'<div class="equation">'+katex.renderToString("\\displaystyle "+t)+"</div>"})</script></body></html>