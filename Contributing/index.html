<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-MkpYfmkWIfATGEd6NpDhZJQB2nIkJDL4/+fTWrR8KGUYK4WpHdNkNtsOewHrkVqI4K1SrtjK7aC/fwQljbifBA==" title="Light" id="stylesheet-light"><link rel="alternate stylesheet" href="../assets/css/dark.css" integrity="sha512-T2Tad3PSo5pIHyLVaV57XanuJRwSgTPT+WVb96FUf6y0ZJIXP4d/lNPJUqbUZ3j0Nq/gej2yteryEz/Hkr2Cdg==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Contributing</title><script src="../assets/js/anchor.js" integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-V+AMQJ9JF/vAsMQDtvDFJNf3sdNJJA/gp99DtQQSl+MRntiwnPuNmZ+UDn4wYSwgdzDKICANdJRm950LZoli6w==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/CONTRIBUTING.md">Source</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Contributing</h1></header><div class="post-content"><h2 id="getting-started-for-contributors">Getting Started for Contributors</h2><p>If you plan to contribute to the book, and wish to build the book locally, you will need to install some additional dependencies: Please start by following the instructions for readers in <a href="../GettingStarted/#getting-started-for-readers">Getting Started</a>. This should leave you with a working installation of basic development tools, Haskell, Agda, the standard library, and PLFA.</p><h3 id="building-viewing-and-basic-testing">Building, Viewing, and Basic Testing</h3><p>Building the book requires the latest version of <a href="https://nodejs.dev/learn/how-to-install-nodejs">Node.js</a>, which is used at various stages to compile and test HTML, CSS, and JavaScript.</p><p>Once you have installed <a href="https://nodejs.dev/learn/how-to-install-nodejs">Node.js</a>, you can build the book, and run basic tests, using the following commands:</p><div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span>                    <span class="co"># Alias for &quot;make build&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> build              <span class="co"># Builds PLFA</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean              <span class="co"># Cleans out the build cache</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clobber            <span class="co"># Cleans out the build cache and clobbers the build</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> serve              <span class="co"># Starts server and opens the book in a browser</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test               <span class="co"># Alias for &quot;make test-html-validate&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-html-validate <span class="co"># Tests the generated HTML using HTML-validate</span></span></code></pre></div><p>The continuous integration tests the generated output with two additional testing commands, each of which come with their own dependencies.</p><h3 id="testing-links-with-htmlproofer">Testing Links with HTMLProofer</h3><p>To test whether or not any of the internal links in the book are broken, we use <a href="https://github.com/gjtorikian/html-proofer">HTMLProofer</a>. This requires <a href="https://www.ruby-lang.org/en/downloads/">a relatively recent Ruby version</a> (see the <code>.ruby-version</code> file for details) as well as <a href="https://bundler.io/#getting-started">bundler</a>. We recommend installing Ruby via <a href="https://github.com/rbenv/rbenv">rbenv</a>.</p><p>Once you have installed <a href="https://www.ruby-lang.org/en/downloads/">Ruby</a> and <a href="https://bundler.io/#getting-started">bundler</a>, you can test for broken links using the following command:</p><div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-html-proofer  <span class="co"># Tests the generated HTML using HTMLProofer</span></span></code></pre></div><p>You can optionally pass <code>EXTERNAL_LINKS=true</code> to test external links as well.</p><h3 id="testing-epub-with-epubcheck">Testing EPUB with EPUBCheck</h3><p>To test whether or not there are any faults in the generated EPUB, we use <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a>. This requires <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a>, and possibly <a href="https://www.java.com/en/download/">Java</a>. We recommend installing <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a> via <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">the installation instructions given by W3C</a>.</p><p>Once you have installed <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a>, you can test the generated EPUB using the following command:</p><div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-epubcheck     <span class="co"># Tests the generated EPUB using EPUBCheck</span></span></code></pre></div><h3 id="checking-for-whitespace-violations-using-fix-whitespace">Checking for whitespace violations using fix-whitespace</h3><p>To keep the code clean of trailing whitespace and missing terminal newlines we use <a href="https://github.com/agda/fix-whitespace">fix-whitespace</a>.</p><p>You can install <a href="https://github.com/agda/fix-whitespace">fix-whitespace</a> by running the following command:</p><div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">cabal</span> v2-install fix-whitespace</span></code></pre></div><p>Once you have installed <a href="https://github.com/agda/fix-whitespace">fix-whitespace</a>, you can set up a git hook which automatically checks the whitespace on commit (see <code>.githooks/pre-commit</code>) by running the following command:</p><div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config core.hooksPath .githooks</span></code></pre></div><h2 id="how-to-make-changes-to-plfa">How to make changes to PLFA</h2><p>The <code>dev</code> branch of the repository is write-protected, meaning that changes can only be made via pull requests, once all tests have passed. To make changes, create a new branch by running the following command from your local copy of the repository:</p><div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> [new_branch_name] [old_branch_name]</span></code></pre></div><p>We suggest basing your branches on <code>dev</code>, and naming branches after issues, e.g., <code>issue-650</code> or using a description of the new features they implement, e,g., <code>feature-subtyping</code>.</p><p>Publish the branch by running the following command from your local copy of the repository:</p><div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin [new_branch_name]</span></code></pre></div><p>Then open a pull request on GitHub, from the <a href="https://github.com/plfa/plfa.github.io/pulls">Pull Requests</a> tab.</p><h2 id="how-to-publish-the-current-version-of-plfa">How to publish the current version of PLFA</h2><p>Any changes to the development branch <code>dev</code> are automatically published to the live version of the book, provided that they pass certain tests. If you’ve made changes though the book, and they are not propagated to the live version, please check the build status on <a href="https://github.com/plfa/plfa.github.io/actions">GitHub Actions</a>.</p><p>The copy of PLFA hosted at <a href="https://plfa.inf.ed.ac.uk" class="uri">https://plfa.inf.ed.ac.uk</a> updates daily.</p><h2 id="how-to-publish-an-announcement">How to publish an announcement</h2><p>PLFA announcements are files with names of the form <code>YYYY-0M-0D-SLUG.md</code>, where <code>YYYY</code> is the long year, <code>0M</code> is the zero-padded month, <code>0D</code> is the zero-padded day, and <code>SLUG</code> is the URL slug for the post, usually an URL-safe version of the title.</p><p>There are several steps to writing an announcement for PLFA:</p><ul><li>Create a new file in <code>web/posts</code> with the name <code>YYYY-0M-0D-SLUG.md</code>.</li><li>Add the metadata block, setting at least the <code>title</code> field.</li><li>Write the announcement in the remainder of the file.</li></ul><p>If the announcement is short, it will be displayed in full in on the announcements page. If the announcement is long, insert a <code>&lt;!--more--&gt;</code> tag after the first paragraph. Everything before this tag will be displayed on the announcements page, followed by a link to the full announcement.</p><h2 id="how-to-publish-a-new-release">How to publish a new release</h2><p>For a project such as PLFA, <a href="https://semver.org/">Semantic Versioning</a> doesn’t make a huge amount of sense. Instead, we’ve adopted <a href="https://calver.org">Calendar Versioning</a>, following, e.g., <a href="https://www.ubuntu.com">Ubuntu</a>. PLFA versions are of the form <code>YY.0M</code>, where <code>YY</code> is the short year, and <code>0M</code> is the zero-padded month.</p><p>To create a new release for PLFA, follow these steps:</p><ul><li>Write <a href="#how-to-publish-an-announcement">an announcement</a> for the release, which describes any major changes.</li><li>Update the version in <code>plfa.cabal</code> to <code>YY.M</code>. Don’t use zero padding for the month, as Cabal does not allow leading zeros.</li><li>Run <code>make test</code> and handle any warnings or errors.</li><li>Push your changes to the <code>dev</code> branch.</li><li>Wait for your changes to be propagated to the live version.</li><li>Create a new tag named <code>vYY.0M</code>.</li></ul><p>Then, to make sure that the release is published to live versions of PLFA, update the <code>deploy</code> job in the GitHub workflow to download and include the web build for the new version.</p><h2 id="how-to-add-a-citation">How to add a citation</h2><p>You can cite works by writing <code>@</code> followed by a citation key, e.g., <code>@plfa20.07</code>. For instance, the first release of PLFA was by <span class="citation" data-cites="plfa19.08">Wadler and Kokke (2019)</span>. See the <a href="#bibliography">Bibliography</a> section below for the bibliography. Citations and the bibliography are currently styled using Pandoc’s default citation style. Other styles can easily be found using the <a href="https://www.zotero.org/styles">Zotero Style Repository</a> and added into the build file by setting the <code>citation-style</code> meta-variable. The citation keys are cross-referenced with <code>data/bibliography.bib</code>.</p><h2 id="the-structure-of-the-plfa-repository">The structure of the PLFA repository</h2><pre><code>plfa
├── book
│   ├── epub
│   └── pdf
├── courses
│   └── TSPL/2019
├── data
│   ├── authors
│   ├── contributors
│   ├── dotagda
│   └── bibliography.bib
│   └── metadata.yml
│   └── tableOfContents.yml
├── extra
├── papers
├── src
│   └── plfa
│       ├── backmatter
│       ├── frontmatter
│       ├── part1
│       ├── part2
│       └── part3
├── tools
│   └── Buildfile.hs
│   └── UpdateContributors.hs
└── web
    ├── assets
    ├── posts
    ├── sass
    └── templates</code></pre><h2 class="unnumbered" id="references">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography"><div id="ref-plfa19.08" class="csl-entry" role="doc-biblioentry">Wadler, Philip, and Wen Kokke. 2019. <em>Programming Language Foundations in <span>A</span>gda</em>. <a href="https://plfa.inf.ed.ac.uk/19.08/">https://plfa.inf.ed.ac.uk/19.08/</a>.</div></div></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/CONTRIBUTING.md">Source</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>