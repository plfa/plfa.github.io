<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-MkpYfmkWIfATGEd6NpDhZJQB2nIkJDL4/+fTWrR8KGUYK4WpHdNkNtsOewHrkVqI4K1SrtjK7aC/fwQljbifBA==" title="Light" id="stylesheet-light"><link rel="alternate stylesheet" href="../assets/css/dark.css" integrity="sha512-T2Tad3PSo5pIHyLVaV57XanuJRwSgTPT+WVb96FUf6y0ZJIXP4d/lNPJUqbUZ3j0Nq/gej2yteryEz/Hkr2Cdg==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Contributing</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/CONTRIBUTING.md">Source</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Contributing</h1></header><div class="post-content"><h2 id="getting-started-for-contributors">Getting Started for Contributors</h2><p>If you plan to contribute to the book, and wish to build the book locally, you will need to install some additional dependencies. Please start by following the instructions for readers in <a href="../GettingStarted/#getting-started-for-readers">Getting Started</a>. This should leave you with a working installation of basic development tools, Haskell, Agda, the standard library, and PLFA.</p><h3 id="building-viewing-and-basic-testing">Building, Viewing, and Basic Testing</h3><p>Building the book requires the latest version of <a href="https://nodejs.dev/learn/how-to-install-nodejs">Node.js</a>, which is used at various stages to compile and test HTML, CSS, and JavaScript.</p><p>Once you have installed <a href="https://nodejs.dev/learn/how-to-install-nodejs">Node.js</a>, you can build the book, and run basic tests, using the following commands:</p><div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span>                    <span class="co"># Alias for &quot;make build&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> build              <span class="co"># Builds PLFA</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean              <span class="co"># Cleans out the build cache</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clobber            <span class="co"># Cleans out the build cache and clobbers the build</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> serve              <span class="co"># Starts server and opens the book in a browser</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test               <span class="co"># Alias for &quot;make test-html-validate&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-html-validate <span class="co"># Tests the generated HTML using HTML-validate</span></span></code></pre></div><p>The continuous integration tests the generated output with two additional testing commands, each of which come with their own dependencies.</p><h3 id="testing-links-with-htmlproofer">Testing Links with HTMLProofer</h3><p>To test whether or not any of the internal links in the book are broken, we use <a href="https://github.com/gjtorikian/html-proofer">HTMLProofer</a>. This requires <a href="https://www.ruby-lang.org/en/downloads/">a relatively recent Ruby version</a> (see the <code>.ruby-version</code> file for details) as well as <a href="https://bundler.io/#getting-started">bundler</a>. We recommend installing Ruby via <a href="https://github.com/rbenv/rbenv">rbenv</a>.</p><p>Once you have installed <a href="https://www.ruby-lang.org/en/downloads/">Ruby</a> and <a href="https://bundler.io/#getting-started">bundler</a>, you can test for broken links using the following command:</p><div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-htmlproofer  <span class="co"># Tests the generated HTML using HTMLProofer</span></span></code></pre></div><p>You can optionally pass <code>EXTERNAL_LINKS=true</code> to test external links as well.</p><h3 id="testing-epub-with-epubcheck">Testing EPUB with EPUBCheck</h3><p>To test whether or not there are any faults in the generated EPUB, we use <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a>. This requires <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a>, and possibly <a href="https://www.java.com/en/download/">Java</a>. We recommend installing <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a> via <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">the installation instructions given by W3C</a>.</p><p>Once you have installed <a href="https://www.w3.org/publishing/epubcheck/docs/installation/">EPUBCheck</a>, you can test the generated EPUB using the following command:</p><div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-epubcheck     <span class="co"># Tests the generated EPUB using EPUBCheck</span></span></code></pre></div><h2 id="how-to-make-changes-to-plfa">How to make changes to PLFA</h2><p>The <code>dev</code> branch of the repository is write-protected, meaning that changes can only be made via pull requests, once all tests have passed. To make changes, create a new branch by running the following command from your local copy of the repository:</p><div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> [new_branch_name] [old_branch_name]</span></code></pre></div><p>We suggest basing your branches on <code>dev</code>, and naming branches after issues, e.g., <code>issue-650</code> or using a description of the new features they implement, e,g., <code>feature-subtyping</code>.</p><p>Publish the branch by running the following command from your local copy of the repository:</p><div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin [new_branch_name]</span></code></pre></div><p>Then open a pull request on GitHub, from the <a href="https://github.com/plfa/plfa.github.io/pulls">Pull Requests</a> tab.</p><h2 id="how-to-publish-the-current-version-of-plfa">How to publish the current version of PLFA</h2><p>Any changes to the development branch <code>dev</code> are automatically published to the live version of the book, provided that they pass certain tests. If you’ve made changes though the book, and they are not propagated to the live version, please check the build status on <a href="https://github.com/plfa/plfa.github.io/actions">GitHub Actions</a>.</p><p>The copy of PLFA hosted at <a href="https://plfa.inf.ed.ac.uk" class="uri">https://plfa.inf.ed.ac.uk</a> updates daily.</p><h2 id="how-to-publish-an-announcement">How to publish an announcement</h2><p>PLFA announcements are files with names of the form <code>0Y0Y-0M-0D-SLUG.md</code>, where <code>0Y0Y</code> is the long year, <code>0M</code> is the zero-padded month, <code>0D</code> is the zero-padded day, and <code>SLUG</code> is the URL slug for the post, usually an URL-safe version of the title.</p><p>There are several steps to writing an announcement for PLFA:</p><ul><li>Create a new file in <code>web/posts</code> with the name <code>0Y0Y-0M-0D-SLUG.md</code>.</li><li>Add the metadata block, setting at least the <code>title</code> field.</li><li>Write the announcement in the remainder of the file.</li></ul><p>If the announcement is short, it will be displayed in full in on the announcements page. If the announcement is long, insert a <code>&lt;!--more--&gt;</code> tag after the first paragraph. Everything before this tag will be displayed on the announcements page, followed by a link to the full announcement.</p><h2 id="how-to-publish-a-new-release">How to publish a new release</h2><p>For a project such as PLFA, <a href="https://semver.org/">Semantic Versioning</a> doesn’t make a huge amount of sense. Instead, we’ve adopted <a href="https://calver.org">Calendar Versioning</a>, following, e.g., <a href="https://www.ubuntu.com">Ubuntu</a>. PLFA versions are of the form <code>0Y.0M</code>, where <code>0Y</code> is the short year, and <code>0M</code> is the zero-padded month.</p><p>To create a new release for PLFA, follow these steps:</p><ul><li><p>Write <a href="#how-to-publish-an-announcement">an announcement</a> for the release, which describes any major changes. Use the previous release notes announcements as a template.</p></li><li><p>Add an entry for the new version to <a href="https://github.com/plfa/plfa.github.io/blob/dev/web/Citing.md"><code>Citing.md</code></a>.</p></li><li><p>Run <code>bumpver update</code>, or:</p><ul><li>Update the version in <code>plfa.cabal</code> to <code>YY.MM</code>. Don’t use zero padding, as Cabal does not allow leading zeros.</li><li>Update the version in the badge in the README file, which is in the footnotes as <code>[plfa-badge-version-svg]</code>.</li><li>Commit and push your changes.</li><li>Run <code>make test</code> and handle any warnings or errors.</li><li>Create a new tag named <code>v0Y.0M</code> and push it to GitHub.</li></ul></li><li><p>Wait for the CI to finish, and a new version to be published to <a href="https://github.com/plfa/plfa.github.io/releases">GitHub Releases</a>.</p></li><li><p>Update <code>publish.yml</code> to download and publish the new version, by adding the following snippet:</p><div class="sourceCode" id="cb6"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> ./.github/actions/download-release</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">plfa-version</span><span class="kw">:</span><span class="at"> v0Y.0M</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> site</span></span></code></pre></div></li><li><p>Commit and push your changes.</p></li><li><p>Wait for the CI to finish, and for the website to be updated.</p></li><li><p>Check if the new version is available at <a href="https://plfa.github.io/0Y.0M/" class="uri">https://plfa.github.io/0Y.0M/</a>.</p></li></ul><h2 id="how-to-add-a-citation">How to add a citation</h2><p>You can cite works by writing <code>@</code> followed by a citation key, e.g., <code>@plfa20.07</code>. For instance, the first release of PLFA was by <span class="citation" data-cites="plfa19.08">Wadler and Kokke (2019)</span>. See the <a href="#bibliography">Bibliography</a> section below for the bibliography. Citations and the bibliography are currently styled using Pandoc’s default citation style. Other styles can easily be found using the <a href="https://www.zotero.org/styles">Zotero Style Repository</a> and added into the build file by setting the <code>citation-style</code> meta-variable. The citation keys are cross-referenced with <code>data/bibliography.bib</code>.</p><h2 id="the-structure-of-the-plfa-repository">The structure of the PLFA repository</h2><div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">plfa</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> src                        <span class="co"># Source files for PLFA chapters:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── plfa                   <span class="co">#</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── backmatter         <span class="co"># All files in these folders must be either</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── frontmatter        <span class="co"># plain Markdown or well-typed literate Agda</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── part1              <span class="co"># with Markdown, and must contain a YAML header</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── part2              <span class="co"># defining at least a title and a permalink.</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     └── part3              <span class="co">#</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> tools                      <span class="co"># Tools used for building PLFA:</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── Buildfile.hs           <span class="co">#   - code for building PLFA.</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── UpdateContributors.hs  <span class="co">#   - code for updating data/contributors.</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> data                       <span class="co"># Data used when building PLFA:</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> ├── authors                <span class="co">#   - information about the authors</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> ├── contributors           <span class="co">#   - information about the contributors</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── bibliography.bib       <span class="co">#   - bibliographic information</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── metadata.yml           <span class="co">#   - web metadata, e.g., language &amp; description</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── tableOfContents.yml    <span class="co">#   - table of contents</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> web                        <span class="co"># Files only used for website:</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   ├── assets                 <span class="co">#   - static assets</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   ├── posts                  <span class="co">#   - announcements</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   ├── sass                   <span class="co">#   - stylesheets</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── templates              <span class="co">#   - HTML templates</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> book</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> ├── epub                   <span class="co"># Files only used for EPUB version.</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── pdf                    <span class="co"># Files only used for PDF version.</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> courses                    <span class="co"># Pages for courses using PLFA by the authors:</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── TSPL/2019              <span class="co">#   - TSPL, University of Edinburgh, 2019</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> papers                     <span class="co"># Source files for papers written about PLFA.</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> extra                      <span class="co"># Incomplete, unincorporated formalisations.</span></span></code></pre></div><h2 class="unnumbered" id="bibliography">Bibliography</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography"><div id="ref-plfa19.08" class="csl-entry" role="doc-biblioentry">Wadler, Philip, and Wen Kokke. 2019. <em>Programming Language Foundations in <span>A</span>gda</em>. <a href="https://plfa.inf.ed.ac.uk/19.08/">https://plfa.inf.ed.ac.uk/19.08/</a>.</div></div></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/CONTRIBUTING.md">Source</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>